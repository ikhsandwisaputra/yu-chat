(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function DA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yy={exports:{}},jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function iD(){if(kw)return jc;kw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:o}}return jc.Fragment=e,jc.jsx=t,jc.jsxs=t,jc}var Vw;function sD(){return Vw||(Vw=1,Yy.exports=iD()),Yy.exports}var S=sD(),Xy={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function aD(){if(Mw)return Ce;Mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,P={};function D(L,oe,me){this.props=L,this.context=oe,this.refs=P,this.updater=me||A}D.prototype.isReactComponent={},D.prototype.setState=function(L,oe){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,oe,"setState")},D.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function V(){}V.prototype=D.prototype;function F(L,oe,me){this.props=L,this.context=oe,this.refs=P,this.updater=me||A}var B=F.prototype=new V;B.constructor=F,R(B,D.prototype),B.isPureReactComponent=!0;var X=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function C(L,oe,me,ue,Ee,Oe){return me=Oe.ref,{$$typeof:n,type:L,key:oe,ref:me!==void 0?me:null,props:Oe}}function x(L,oe){return C(L.type,oe,void 0,void 0,void 0,L.props)}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function M(L){var oe={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return oe[me]})}var U=/\/+/g;function q(L,oe){return typeof L=="object"&&L!==null&&L.key!=null?M(""+L.key):oe.toString(36)}function k(){}function zt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(k,k):(L.status="pending",L.then(function(oe){L.status==="pending"&&(L.status="fulfilled",L.value=oe)},function(oe){L.status==="pending"&&(L.status="rejected",L.reason=oe)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function dt(L,oe,me,ue,Ee){var Oe=typeof L;(Oe==="undefined"||Oe==="boolean")&&(L=null);var xe=!1;if(L===null)xe=!0;else switch(Oe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(L.$$typeof){case n:case e:xe=!0;break;case y:return xe=L._init,dt(xe(L._payload),oe,me,ue,Ee)}}if(xe)return Ee=Ee(L),xe=ue===""?"."+q(L,0):ue,X(Ee)?(me="",xe!=null&&(me=xe.replace(U,"$&/")+"/"),dt(Ee,oe,me,"",function(Or){return Or})):Ee!=null&&(N(Ee)&&(Ee=x(Ee,me+(Ee.key==null||L&&L.key===Ee.key?"":(""+Ee.key).replace(U,"$&/")+"/")+xe)),oe.push(Ee)),1;xe=0;var Yt=ue===""?".":ue+":";if(X(L))for(var lt=0;lt<L.length;lt++)ue=L[lt],Oe=Yt+q(ue,lt),xe+=dt(ue,oe,me,Oe,Ee);else if(lt=E(L),typeof lt=="function")for(L=lt.call(L),lt=0;!(ue=L.next()).done;)ue=ue.value,Oe=Yt+q(ue,lt++),xe+=dt(ue,oe,me,Oe,Ee);else if(Oe==="object"){if(typeof L.then=="function")return dt(zt(L),oe,me,ue,Ee);throw oe=String(L),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ne(L,oe,me){if(L==null)return L;var ue=[],Ee=0;return dt(L,ue,"","",function(Oe){return oe.call(me,Oe,Ee++)}),ue}function fe(L){if(L._status===-1){var oe=L._result;oe=oe(),oe.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=oe)}if(L._status===1)return L._result.default;throw L._result}var _e=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ke(){}return Ce.Children={map:ne,forEach:function(L,oe,me){ne(L,function(){oe.apply(this,arguments)},me)},count:function(L){var oe=0;return ne(L,function(){oe++}),oe},toArray:function(L){return ne(L,function(oe){return oe})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ce.Component=D,Ce.Fragment=t,Ce.Profiler=s,Ce.PureComponent=F,Ce.StrictMode=r,Ce.Suspense=d,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ee.H.useMemoCache(L)}},Ce.cache=function(L){return function(){return L.apply(null,arguments)}},Ce.cloneElement=function(L,oe,me){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ue=R({},L.props),Ee=L.key,Oe=void 0;if(oe!=null)for(xe in oe.ref!==void 0&&(Oe=void 0),oe.key!==void 0&&(Ee=""+oe.key),oe)!te.call(oe,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&oe.ref===void 0||(ue[xe]=oe[xe]);var xe=arguments.length-2;if(xe===1)ue.children=me;else if(1<xe){for(var Yt=Array(xe),lt=0;lt<xe;lt++)Yt[lt]=arguments[lt+2];ue.children=Yt}return C(L.type,Ee,void 0,void 0,Oe,ue)},Ce.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ce.createElement=function(L,oe,me){var ue,Ee={},Oe=null;if(oe!=null)for(ue in oe.key!==void 0&&(Oe=""+oe.key),oe)te.call(oe,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ee[ue]=oe[ue]);var xe=arguments.length-2;if(xe===1)Ee.children=me;else if(1<xe){for(var Yt=Array(xe),lt=0;lt<xe;lt++)Yt[lt]=arguments[lt+2];Ee.children=Yt}if(L&&L.defaultProps)for(ue in xe=L.defaultProps,xe)Ee[ue]===void 0&&(Ee[ue]=xe[ue]);return C(L,Oe,void 0,void 0,null,Ee)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(L){return{$$typeof:h,render:L}},Ce.isValidElement=N,Ce.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:fe}},Ce.memo=function(L,oe){return{$$typeof:p,type:L,compare:oe===void 0?null:oe}},Ce.startTransition=function(L){var oe=ee.T,me={};ee.T=me;try{var ue=L(),Ee=ee.S;Ee!==null&&Ee(me,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ke,_e)}catch(Oe){_e(Oe)}finally{ee.T=oe}},Ce.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Ce.use=function(L){return ee.H.use(L)},Ce.useActionState=function(L,oe,me){return ee.H.useActionState(L,oe,me)},Ce.useCallback=function(L,oe){return ee.H.useCallback(L,oe)},Ce.useContext=function(L){return ee.H.useContext(L)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(L,oe){return ee.H.useDeferredValue(L,oe)},Ce.useEffect=function(L,oe,me){var ue=ee.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(L,oe)},Ce.useId=function(){return ee.H.useId()},Ce.useImperativeHandle=function(L,oe,me){return ee.H.useImperativeHandle(L,oe,me)},Ce.useInsertionEffect=function(L,oe){return ee.H.useInsertionEffect(L,oe)},Ce.useLayoutEffect=function(L,oe){return ee.H.useLayoutEffect(L,oe)},Ce.useMemo=function(L,oe){return ee.H.useMemo(L,oe)},Ce.useOptimistic=function(L,oe){return ee.H.useOptimistic(L,oe)},Ce.useReducer=function(L,oe,me){return ee.H.useReducer(L,oe,me)},Ce.useRef=function(L){return ee.H.useRef(L)},Ce.useState=function(L){return ee.H.useState(L)},Ce.useSyncExternalStore=function(L,oe,me){return ee.H.useSyncExternalStore(L,oe,me)},Ce.useTransition=function(){return ee.H.useTransition()},Ce.version="19.1.0",Ce}var Lw;function ip(){return Lw||(Lw=1,Xy.exports=aD()),Xy.exports}var z=ip();const Ge=DA(z);var Wy={exports:{}},Bc={},Jy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function oD(){return Uw||(Uw=1,function(n){function e(ne,fe){var _e=ne.length;ne.push(fe);e:for(;0<_e;){var Ke=_e-1>>>1,L=ne[Ke];if(0<s(L,fe))ne[Ke]=fe,ne[_e]=L,_e=Ke;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var fe=ne[0],_e=ne.pop();if(_e!==fe){ne[0]=_e;e:for(var Ke=0,L=ne.length,oe=L>>>1;Ke<oe;){var me=2*(Ke+1)-1,ue=ne[me],Ee=me+1,Oe=ne[Ee];if(0>s(ue,_e))Ee<L&&0>s(Oe,ue)?(ne[Ke]=Oe,ne[Ee]=_e,Ke=Ee):(ne[Ke]=ue,ne[me]=_e,Ke=me);else if(Ee<L&&0>s(Oe,_e))ne[Ke]=Oe,ne[Ee]=_e,Ke=Ee;else break e}}return fe}function s(ne,fe){var _e=ne.sortIndex-fe.sortIndex;return _e!==0?_e:ne.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],y=1,v=null,E=3,A=!1,R=!1,P=!1,D=!1,V=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function X(ne){for(var fe=t(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=ne)r(p),fe.sortIndex=fe.expirationTime,e(d,fe);else break;fe=t(p)}}function ee(ne){if(P=!1,X(ne),!R)if(t(d)!==null)R=!0,te||(te=!0,q());else{var fe=t(p);fe!==null&&dt(ee,fe.startTime-ne)}}var te=!1,C=-1,x=5,N=-1;function M(){return D?!0:!(n.unstable_now()-N<x)}function U(){if(D=!1,te){var ne=n.unstable_now();N=ne;var fe=!0;try{e:{R=!1,P&&(P=!1,F(C),C=-1),A=!0;var _e=E;try{t:{for(X(ne),v=t(d);v!==null&&!(v.expirationTime>ne&&M());){var Ke=v.callback;if(typeof Ke=="function"){v.callback=null,E=v.priorityLevel;var L=Ke(v.expirationTime<=ne);if(ne=n.unstable_now(),typeof L=="function"){v.callback=L,X(ne),fe=!0;break t}v===t(d)&&r(d),X(ne)}else r(d);v=t(d)}if(v!==null)fe=!0;else{var oe=t(p);oe!==null&&dt(ee,oe.startTime-ne),fe=!1}}break e}finally{v=null,E=_e,A=!1}fe=void 0}}finally{fe?q():te=!1}}}var q;if(typeof B=="function")q=function(){B(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,zt=k.port2;k.port1.onmessage=U,q=function(){zt.postMessage(null)}}else q=function(){V(U,0)};function dt(ne,fe){C=V(function(){ne(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(ne){switch(E){case 1:case 2:case 3:var fe=3;break;default:fe=E}var _e=E;E=fe;try{return ne()}finally{E=_e}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var _e=E;E=ne;try{return fe()}finally{E=_e}},n.unstable_scheduleCallback=function(ne,fe,_e){var Ke=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ke+_e:Ke):_e=Ke,ne){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=_e+L,ne={id:y++,callback:fe,priorityLevel:ne,startTime:_e,expirationTime:L,sortIndex:-1},_e>Ke?(ne.sortIndex=_e,e(p,ne),t(d)===null&&ne===t(p)&&(P?(F(C),C=-1):P=!0,dt(ee,_e-Ke))):(ne.sortIndex=L,e(d,ne),R||A||(R=!0,te||(te=!0,q()))),ne},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ne){var fe=E;return function(){var _e=E;E=fe;try{return ne.apply(this,arguments)}finally{E=_e}}}}(Zy)),Zy}var jw;function lD(){return jw||(jw=1,Jy.exports=oD()),Jy.exports}var e_={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function uD(){if(Bw)return gn;Bw=1;var n=ip();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(d,p,null,y)},gn.flushSync=function(d){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=p,r.p=y,r.d.f()}},gn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},gn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},gn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:A}):y==="script"&&r.d.X(d,{crossOrigin:v,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},gn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gn.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},gn.requestFormReset=function(d){r.d.r(d)},gn.unstable_batchedUpdates=function(d,p){return d(p)},gn.useFormState=function(d,p,y){return u.H.useFormState(d,p,y)},gn.useFormStatus=function(){return u.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var zw;function cD(){if(zw)return e_.exports;zw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),e_.exports=uD(),e_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qw;function hD(){if(qw)return Bc;qw=1;var n=lD(),e=ip(),t=cD();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function d(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return h(m),i;if(g===c)return h(m),a;g=g.sibling}throw Error(r(188))}if(l.return!==c.return)l=m,c=g;else{for(var T=!1,w=m.child;w;){if(w===l){T=!0,l=m,c=g;break}if(w===c){T=!0,c=m,l=g;break}w=w.sibling}if(!T){for(w=g.child;w;){if(w===l){T=!0,l=g,c=m;break}if(w===c){T=!0,c=g,l=m;break}w=w.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),B=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function zt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case D:return"Profiler";case P:return"StrictMode";case ee:return"Suspense";case te:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case B:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case X:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return a=i.displayName||null,a!==null?a:zt(i.type)||"Memo";case x:a=i._payload,i=i._init;try{return zt(i(a))}catch{}}return null}var dt=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ke=[],L=-1;function oe(i){return{current:i}}function me(i){0>L||(i.current=Ke[L],Ke[L]=null,L--)}function ue(i,a){L++,Ke[L]=i.current,i.current=a}var Ee=oe(null),Oe=oe(null),xe=oe(null),Yt=oe(null);function lt(i,a){switch(ue(xe,a),ue(Oe,i),ue(Ee,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?lw(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=lw(a),i=uw(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}me(Ee),ue(Ee,i)}function Or(){me(Ee),me(Oe),me(xe)}function is(i){i.memoizedState!==null&&ue(Yt,i);var a=Ee.current,l=uw(a,i.type);a!==l&&(ue(Oe,i),ue(Ee,l))}function hi(i){Oe.current===i&&(me(Ee),me(Oe)),Yt.current===i&&(me(Yt),kc._currentValue=_e)}var ma=Object.prototype.hasOwnProperty,pa=n.unstable_scheduleCallback,ga=n.unstable_cancelCallback,Du=n.unstable_shouldYield,ff=n.unstable_requestPaint,er=n.unstable_now,Yp=n.unstable_getCurrentPriorityLevel,Ou=n.unstable_ImmediatePriority,Mo=n.unstable_UserBlockingPriority,ya=n.unstable_NormalPriority,Xp=n.unstable_LowPriority,Lo=n.unstable_IdlePriority,Pu=n.log,df=n.unstable_setDisableYieldValue,Tt=null,We=null;function jn(i){if(typeof Pu=="function"&&df(i),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Tt,i)}catch{}}var mn=Math.clz32?Math.clz32:_a,mf=Math.log,Wp=Math.LN2;function _a(i){return i>>>=0,i===0?32:31-(mf(i)/Wp|0)|0}var va=256,ba=4194304;function vr(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Uo(i,a,l){var c=i.pendingLanes;if(c===0)return 0;var m=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?m=vr(c):(T&=w,T!==0?m=vr(T):l||(l=w&~i,l!==0&&(m=vr(l))))):(w=c&~g,w!==0?m=vr(w):T!==0?m=vr(T):l||(l=c&~i,l!==0&&(m=vr(l)))),m===0?0:a!==0&&a!==m&&(a&g)===0&&(g=m&-m,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:m}function Ea(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ku(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(){var i=va;return va<<=1,(va&4194048)===0&&(va=256),i}function Mu(){var i=ba;return ba<<=1,(ba&62914560)===0&&(ba=4194304),i}function fi(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function di(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Lu(i,a,l,c,m,g){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var w=i.entanglements,O=i.expirationTimes,Q=i.hiddenUpdates;for(l=T&~l;0<l;){var re=31-mn(l),se=1<<re;w[re]=0,O[re]=-1;var Y=Q[re];if(Y!==null)for(Q[re]=null,re=0;re<Y.length;re++){var W=Y[re];W!==null&&(W.lane&=-536870913)}l&=~se}c!==0&&Pr(i,c,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~a))}function Pr(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-mn(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194090}function Uu(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-mn(l),m=1<<c;m&a|i[c]&a&&(i[c]|=a),l&=~m}}function ss(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function jo(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function as(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:Rw(i.type))}function pf(i,a){var l=fe.p;try{return fe.p=i,a()}finally{fe.p=l}}var pt=Math.random().toString(36).slice(2),qt="__reactFiber$"+pt,Pt="__reactProps$"+pt,tr="__reactContainer$"+pt,ju="__reactEvents$"+pt,Jp="__reactListeners$"+pt,os="__reactHandles$"+pt,gf="__reactResources$"+pt,Ta="__reactMarker$"+pt;function ls(i){delete i[qt],delete i[Pt],delete i[ju],delete i[Jp],delete i[os]}function mi(i){var a=i[qt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[tr]||l[qt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=dw(i);i!==null;){if(l=i[qt])return l;i=dw(i)}return a}i=l,l=i.parentNode}return null}function kr(i){if(i=i[qt]||i[tr]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Vr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Tn(i){var a=i[gf];return a||(a=i[gf]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function It(i){i[Ta]=!0}var Bu=new Set,Bo={};function br(i,a){pi(i,a),pi(i+"Capture",a)}function pi(i,a){for(Bo[i]=a,i=0;i<a.length;i++)Bu.add(a[i])}var yf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_f={},wa={};function vf(i){return ma.call(wa,i)?!0:ma.call(_f,i)?!1:yf.test(i)?wa[i]=!0:(_f[i]=!0,!1)}function us(i,a,l){if(vf(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Mr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function rn(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}var Sa,bf;function gi(i){if(Sa===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Sa=a&&a[1]||"",bf=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sa+i+bf}var zo=!1;function qo(i,a){if(!i||zo)return"";zo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var Y=W}Reflect.construct(i,[],se)}else{try{se.call()}catch(W){Y=W}i.call(se.prototype)}}else{try{throw Error()}catch(W){Y=W}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],w=g[1];if(T&&w){var O=T.split(`
`),Q=w.split(`
`);for(m=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(c===O.length||m===Q.length)for(c=O.length-1,m=Q.length-1;1<=c&&0<=m&&O[c]!==Q[m];)m--;for(;1<=c&&0<=m;c--,m--)if(O[c]!==Q[m]){if(c!==1||m!==1)do if(c--,m--,0>m||O[c]!==Q[m]){var re=`
`+O[c].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=c&&0<=m);break}}}finally{zo=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?gi(l):""}function zu(i){switch(i.tag){case 26:case 27:case 5:return gi(i.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return qo(i.type,!1);case 11:return qo(i.type.render,!1);case 1:return qo(i.type,!0);case 31:return gi("Activity");default:return""}}function Fo(i){try{var a="";do a+=zu(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qu(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zp(i){var a=qu(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ho(i){i._valueTracker||(i._valueTracker=Zp(i))}function Fu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=qu(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function Aa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var eg=/[\n"\\]/g;function kt(i){return i.replace(eg,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Bn(i,a,l,c,m,g,T,w){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+wn(a)):i.value!==""+wn(a)&&(i.value=""+wn(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?cs(i,T,wn(a)):l!=null?cs(i,T,wn(l)):c!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+wn(w):i.removeAttribute("name")}function Ia(i,a,l,c,m,g,T,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+wn(l):"",a=a!=null?""+wn(a):l,w||a===i.value||(i.value=a),i.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function cs(i,a,l){a==="number"&&Aa(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function yi(i,a,l,c){if(i=i.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=a.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&c&&(i[l].defaultSelected=!0)}else{for(l=""+wn(l),a=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function nt(i,a,l){if(a!=null&&(a=""+wn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+wn(l):""}function xa(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(dt(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=wn(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function nr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Ra=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ef(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Ra.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Hu(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&Ef(i,m,c)}else for(var g in a)a.hasOwnProperty(g)&&Ef(i,g,a[g])}function Gu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ng=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(i){return ng.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _i=null;function rr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vi=null,bi=null;function $u(i){var a=kr(i);if(a&&(i=a.stateNode)){var l=i[Pt]||null;e:switch(i=a.stateNode,a.type){case"input":if(Bn(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+kt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var m=c[Pt]||null;if(!m)throw Error(r(90));Bn(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Fu(c)}break e;case"textarea":nt(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&yi(i,!!l.multiple,a,!1)}}}var Lr=!1;function Tf(i,a,l){if(Lr)return i(a,l);Lr=!0;try{var c=i(a);return c}finally{if(Lr=!1,(vi!==null||bi!==null)&&(pd(),vi&&(a=vi,i=bi,bi=vi=null,$u(a),i)))for(a=0;a<i.length;a++)$u(i[a])}}function Ca(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Pt]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ir=!1;if(Er)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){ir=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{ir=!1}var Ur=null,hs=null,Ei=null;function Ku(){if(Ei)return Ei;var i,a=hs,l=a.length,c,m="value"in Ur?Ur.value:Ur.textContent,g=m.length;for(i=0;i<l&&a[i]===m[i];i++);var T=l-i;for(c=1;c<=T&&a[l-c]===m[g-c];c++);return Ei=m.slice(i,1<c?1-c:void 0)}function jr(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Br(){return!0}function Qu(){return!1}function Xt(i){function a(l,c,m,g,T){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(l=i[w],this[w]=l?l(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Br:Qu,this.isPropagationStopped=Qu,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Br)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Br)},persist:function(){},isPersistent:Br}),a}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=Xt(Ye),Da=y({},Ye,{view:0,detail:0}),wf=Xt(Da),Ko,Qo,zr,Oa=y({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zr&&(zr&&i.type==="mousemove"?(Ko=i.screenX-zr.screenX,Qo=i.screenY-zr.screenY):Qo=Ko=0,zr=i),Ko)},movementY:function(i){return"movementY"in i?i.movementY:Qo}}),sr=Xt(Oa),Sf=y({},Oa,{dataTransfer:0}),rg=Xt(Sf),Pa=y({},Da,{relatedTarget:0}),Yo=Xt(Pa),Yu=y({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),Xo=Xt(Yu),Af=y({},Ye,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Wo=Xt(Af),ig=y({},Ye,{data:0}),Xu=Xt(ig),ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},If={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=xf[i])?!!a[i]:!1}function Va(){return Wu}var Rf=y({},Da,{key:function(i){if(i.key){var a=ka[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=jr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?If[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(i){return i.type==="keypress"?jr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?jr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Jo=Xt(Rf),Cf=y({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=Xt(Cf),Ti=y({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),Nf=Xt(Ti),Df=y({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),Of=Xt(Df),Pf=y({},Oa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zo=Xt(Pf),Sn=y({},Ye,{newState:0,oldState:0}),kf=Xt(Sn),Vf=[9,13,27,32],qr=Er&&"CompositionEvent"in window,f=null;Er&&"documentMode"in document&&(f=document.documentMode);var _=Er&&"TextEvent"in window&&!f,b=Er&&(!qr||f&&8<f&&11>=f),I=" ",G=!1;function Z(i,a){switch(i){case"keyup":return Vf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Be=!1;function Ft(i,a){switch(i){case"compositionend":return ce(a);case"keypress":return a.which!==32?null:(G=!0,I);case"textInput":return i=a.data,i===I&&G?null:i;default:return null}}function ze(i,a){if(Be)return i==="compositionend"||!qr&&Z(i,a)?(i=Ku(),Ei=hs=Ur=null,Be=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return b&&a.locale!=="ko"?null:a.data;default:return null}}var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Wt[i.type]:a==="textarea"}function wi(i,a,l,c){vi?bi?bi.push(c):bi=[c]:vi=c,a=Ed(a,"onChange"),0<a.length&&(l=new $o("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var sn=null,Fr=null;function Zu(i){rw(i,0)}function Mf(i){var a=Vr(i);if(Fu(a))return i}function Sb(i,a){if(i==="change")return a}var Ab=!1;if(Er){var sg;if(Er){var ag="oninput"in document;if(!ag){var Ib=document.createElement("div");Ib.setAttribute("oninput","return;"),ag=typeof Ib.oninput=="function"}sg=ag}else sg=!1;Ab=sg&&(!document.documentMode||9<document.documentMode)}function xb(){sn&&(sn.detachEvent("onpropertychange",Rb),Fr=sn=null)}function Rb(i){if(i.propertyName==="value"&&Mf(Fr)){var a=[];wi(a,Fr,i,rr(i)),Tf(Zu,a)}}function kC(i,a,l){i==="focusin"?(xb(),sn=a,Fr=l,sn.attachEvent("onpropertychange",Rb)):i==="focusout"&&xb()}function VC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mf(Fr)}function MC(i,a){if(i==="click")return Mf(a)}function LC(i,a){if(i==="input"||i==="change")return Mf(a)}function UC(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var zn=typeof Object.is=="function"?Object.is:UC;function ec(i,a){if(zn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!ma.call(a,m)||!zn(i[m],a[m]))return!1}return!0}function Cb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nb(i,a){var l=Cb(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Cb(l)}}function Db(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Db(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Ob(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Aa(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Aa(i.document)}return a}function og(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var jC=Er&&"documentMode"in document&&11>=document.documentMode,el=null,lg=null,tc=null,ug=!1;function Pb(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ug||el==null||el!==Aa(c)||(c=el,"selectionStart"in c&&og(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),tc&&ec(tc,c)||(tc=c,c=Ed(lg,"onSelect"),0<c.length&&(a=new $o("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=el)))}function Ma(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var tl={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionrun:Ma("Transition","TransitionRun"),transitionstart:Ma("Transition","TransitionStart"),transitioncancel:Ma("Transition","TransitionCancel"),transitionend:Ma("Transition","TransitionEnd")},cg={},kb={};Er&&(kb=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function La(i){if(cg[i])return cg[i];if(!tl[i])return i;var a=tl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in kb)return cg[i]=a[l];return i}var Vb=La("animationend"),Mb=La("animationiteration"),Lb=La("animationstart"),BC=La("transitionrun"),zC=La("transitionstart"),qC=La("transitioncancel"),Ub=La("transitionend"),jb=new Map,hg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hg.push("scrollEnd");function Tr(i,a){jb.set(i,a),br(a,[i])}var Bb=new WeakMap;function ar(i,a){if(typeof i=="object"&&i!==null){var l=Bb.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Fo(a)},Bb.set(i,a),a)}return{value:i,source:a,stack:Fo(a)}}var or=[],nl=0,fg=0;function Lf(){for(var i=nl,a=fg=nl=0;a<i;){var l=or[a];or[a++]=null;var c=or[a];or[a++]=null;var m=or[a];or[a++]=null;var g=or[a];if(or[a++]=null,c!==null&&m!==null){var T=c.pending;T===null?m.next=m:(m.next=T.next,T.next=m),c.pending=m}g!==0&&zb(l,m,g)}}function Uf(i,a,l,c){or[nl++]=i,or[nl++]=a,or[nl++]=l,or[nl++]=c,fg|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function dg(i,a,l,c){return Uf(i,a,l,c),jf(i)}function rl(i,a){return Uf(i,null,null,a),jf(i)}function zb(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var m=!1,g=i.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&a!==null&&(m=31-mn(l),i=g.hiddenUpdates,c=i[m],c===null?i[m]=[a]:c.push(a),a.lane=l|536870912),g):null}function jf(i){if(50<Ic)throw Ic=0,vy=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var il={};function FC(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(i,a,l,c){return new FC(i,a,l,c)}function mg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Si(i,a){var l=i.alternate;return l===null?(l=qn(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function qb(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Bf(i,a,l,c,m,g){var T=0;if(c=i,typeof i=="function")mg(i)&&(T=1);else if(typeof i=="string")T=GN(i,l,Ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=qn(31,l,a,m),i.elementType=N,i.lanes=g,i;case R:return Ua(l.children,m,g,a);case P:T=8,m|=24;break;case D:return i=qn(12,l,a,m|2),i.elementType=D,i.lanes=g,i;case ee:return i=qn(13,l,a,m),i.elementType=ee,i.lanes=g,i;case te:return i=qn(19,l,a,m),i.elementType=te,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:case B:T=10;break e;case F:T=9;break e;case X:T=11;break e;case C:T=14;break e;case x:T=16,c=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=qn(T,l,a,m),a.elementType=i,a.type=c,a.lanes=g,a}function Ua(i,a,l,c){return i=qn(7,i,c,a),i.lanes=l,i}function pg(i,a,l){return i=qn(6,i,null,a),i.lanes=l,i}function gg(i,a,l){return a=qn(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var sl=[],al=0,zf=null,qf=0,lr=[],ur=0,ja=null,Ai=1,Ii="";function Ba(i,a){sl[al++]=qf,sl[al++]=zf,zf=i,qf=a}function Fb(i,a,l){lr[ur++]=Ai,lr[ur++]=Ii,lr[ur++]=ja,ja=i;var c=Ai;i=Ii;var m=32-mn(c)-1;c&=~(1<<m),l+=1;var g=32-mn(a)+m;if(30<g){var T=m-m%5;g=(c&(1<<T)-1).toString(32),c>>=T,m-=T,Ai=1<<32-mn(a)+m|l<<m|c,Ii=g+i}else Ai=1<<g|l<<m|c,Ii=i}function yg(i){i.return!==null&&(Ba(i,1),Fb(i,1,0))}function _g(i){for(;i===zf;)zf=sl[--al],sl[al]=null,qf=sl[--al],sl[al]=null;for(;i===ja;)ja=lr[--ur],lr[ur]=null,Ii=lr[--ur],lr[ur]=null,Ai=lr[--ur],lr[ur]=null}var An=null,wt=null,Qe=!1,za=null,Hr=!1,vg=Error(r(519));function qa(i){var a=Error(r(418,""));throw ic(ar(a,i)),vg}function Hb(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[qt]=i,a[Pt]=c,l){case"dialog":Ve("cancel",a),Ve("close",a);break;case"iframe":case"object":case"embed":Ve("load",a);break;case"video":case"audio":for(l=0;l<Rc.length;l++)Ve(Rc[l],a);break;case"source":Ve("error",a);break;case"img":case"image":case"link":Ve("error",a),Ve("load",a);break;case"details":Ve("toggle",a);break;case"input":Ve("invalid",a),Ia(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ho(a);break;case"select":Ve("invalid",a);break;case"textarea":Ve("invalid",a),xa(a,c.value,c.defaultValue,c.children),Ho(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||ow(a.textContent,l)?(c.popover!=null&&(Ve("beforetoggle",a),Ve("toggle",a)),c.onScroll!=null&&Ve("scroll",a),c.onScrollEnd!=null&&Ve("scrollend",a),c.onClick!=null&&(a.onclick=Td),a=!0):a=!1,a||qa(i)}function Gb(i){for(An=i.return;An;)switch(An.tag){case 5:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:An=An.return}}function nc(i){if(i!==An)return!1;if(!Qe)return Gb(i),Qe=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Vy(i.type,i.memoizedProps)),l=!l),l&&wt&&qa(i),Gb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){wt=Sr(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}wt=null}}else a===27?(a=wt,xs(i.type)?(i=jy,jy=null,wt=i):wt=a):wt=An?Sr(i.stateNode.nextSibling):null;return!0}function rc(){wt=An=null,Qe=!1}function $b(){var i=za;return i!==null&&(kn===null?kn=i:kn.push.apply(kn,i),za=null),i}function ic(i){za===null?za=[i]:za.push(i)}var bg=oe(null),Fa=null,xi=null;function fs(i,a,l){ue(bg,a._currentValue),a._currentValue=l}function Ri(i){i._currentValue=bg.current,me(bg)}function Eg(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function Tg(i,a,l,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=m;for(var O=0;O<a.length;O++)if(w.context===a[O]){g.lanes|=l,w=g.alternate,w!==null&&(w.lanes|=l),Eg(g.return,l,i),c||(T=null);break e}g=w.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),Eg(T,l,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function sc(i,a,l,c){i=null;for(var m=a,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var w=m.type;zn(m.pendingProps.value,T.value)||(i!==null?i.push(w):i=[w])}}else if(m===Yt.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(kc):i=[kc])}m=m.return}i!==null&&Tg(a,i,l,c),a.flags|=262144}function Ff(i){for(i=i.firstContext;i!==null;){if(!zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ha(i){Fa=i,xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pn(i){return Kb(Fa,i)}function Hf(i,a){return Fa===null&&Ha(i),Kb(i,a)}function Kb(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},xi===null){if(i===null)throw Error(r(308));xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else xi=xi.next=a;return l}var HC=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},GC=n.unstable_scheduleCallback,$C=n.unstable_NormalPriority,Gt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wg(){return{controller:new HC,data:new Map,refCount:0}}function ac(i){i.refCount--,i.refCount===0&&GC($C,function(){i.controller.abort()})}var oc=null,Sg=0,ol=0,ll=null;function KC(i,a){if(oc===null){var l=oc=[];Sg=0,ol=Iy(),ll={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Sg++,a.then(Qb,Qb),a}function Qb(){if(--Sg===0&&oc!==null){ll!==null&&(ll.status="fulfilled");var i=oc;oc=null,ol=0,ll=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function QC(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var Yb=ne.S;ne.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&KC(i,a),Yb!==null&&Yb(i,a)};var Ga=oe(null);function Ag(){var i=Ga.current;return i!==null?i:ut.pooledCache}function Gf(i,a){a===null?ue(Ga,Ga.current):ue(Ga,a.pool)}function Xb(){var i=Ag();return i===null?null:{parent:Gt._currentValue,pool:i}}var lc=Error(r(460)),Wb=Error(r(474)),$f=Error(r(542)),Ig={then:function(){}};function Jb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Kf(){}function Zb(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Kf,Kf),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,tE(i),i;default:if(typeof a.status=="string")a.then(Kf,Kf);else{if(i=ut,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,tE(i),i}throw uc=a,lc}}var uc=null;function eE(){if(uc===null)throw Error(r(459));var i=uc;return uc=null,i}function tE(i){if(i===lc||i===$f)throw Error(r(483))}var ds=!1;function xg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ms(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ps(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=jf(i),zb(i,null,l),a}return Uf(i,c,a,l),jf(i)}function cc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Uu(i,l)}}function Cg(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?m=g=a:g=g.next=a}else m=g=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Ng=!1;function hc(){if(Ng){var i=ll;if(i!==null)throw i}}function fc(i,a,l,c){Ng=!1;var m=i.updateQueue;ds=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var O=w,Q=O.next;O.next=null,T===null?g=Q:T.next=Q,T=O;var re=i.alternate;re!==null&&(re=re.updateQueue,w=re.lastBaseUpdate,w!==T&&(w===null?re.firstBaseUpdate=Q:w.next=Q,re.lastBaseUpdate=O))}if(g!==null){var se=m.baseState;T=0,re=Q=O=null,w=g;do{var Y=w.lane&-536870913,W=Y!==w.lane;if(W?(qe&Y)===Y:(c&Y)===Y){Y!==0&&Y===ol&&(Ng=!0),re!==null&&(re=re.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=i,Te=w;Y=a;var st=l;switch(Te.tag){case 1:if(Ae=Te.payload,typeof Ae=="function"){se=Ae.call(st,se,Y);break e}se=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Te.payload,Y=typeof Ae=="function"?Ae.call(st,se,Y):Ae,Y==null)break e;se=y({},se,Y);break e;case 2:ds=!0}}Y=w.callback,Y!==null&&(i.flags|=64,W&&(i.flags|=8192),W=m.callbacks,W===null?m.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},re===null?(Q=re=W,O=se):re=re.next=W,T|=Y;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;W=w,w=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);re===null&&(O=se),m.baseState=O,m.firstBaseUpdate=Q,m.lastBaseUpdate=re,g===null&&(m.shared.lanes=0),ws|=T,i.lanes=T,i.memoizedState=se}}function nE(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function rE(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)nE(l[i],a)}var ul=oe(null),Qf=oe(0);function iE(i,a){i=Vi,ue(Qf,i),ue(ul,a),Vi=i|a.baseLanes}function Dg(){ue(Qf,Vi),ue(ul,ul.current)}function Og(){Vi=Qf.current,me(ul),me(Qf)}var gs=0,De=null,rt=null,Vt=null,Yf=!1,cl=!1,$a=!1,Xf=0,dc=0,hl=null,YC=0;function xt(){throw Error(r(321))}function Pg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!zn(i[l],a[l]))return!1;return!0}function kg(i,a,l,c,m,g){return gs=g,De=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ne.H=i===null||i.memoizedState===null?zE:qE,$a=!1,g=l(c,m),$a=!1,cl&&(g=aE(a,l,c,m)),sE(i),g}function sE(i){ne.H=nd;var a=rt!==null&&rt.next!==null;if(gs=0,Vt=rt=De=null,Yf=!1,dc=0,hl=null,a)throw Error(r(300));i===null||Jt||(i=i.dependencies,i!==null&&Ff(i)&&(Jt=!0))}function aE(i,a,l,c){De=i;var m=0;do{if(cl&&(hl=null),dc=0,cl=!1,25<=m)throw Error(r(301));if(m+=1,Vt=rt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ne.H=nN,g=a(l,c)}while(cl);return g}function XC(){var i=ne.H,a=i.useState()[0];return a=typeof a.then=="function"?mc(a):a,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(De.flags|=1024),a}function Vg(){var i=Xf!==0;return Xf=0,i}function Mg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Lg(i){if(Yf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Yf=!1}gs=0,Vt=rt=De=null,cl=!1,dc=Xf=0,hl=null}function On(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?De.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function Mt(){if(rt===null){var i=De.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var a=Vt===null?De.memoizedState:Vt.next;if(a!==null)Vt=a,rt=i;else{if(i===null)throw De.alternate===null?Error(r(467)):Error(r(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Vt===null?De.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function Ug(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(i){var a=dc;return dc+=1,hl===null&&(hl=[]),i=Zb(hl,i,a),a=De,(Vt===null?a.memoizedState:Vt.next)===null&&(a=a.alternate,ne.H=a===null||a.memoizedState===null?zE:qE),i}function Wf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return mc(i);if(i.$$typeof===B)return pn(i)}throw Error(r(438,String(i)))}function jg(i){var a=null,l=De.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ug(),De.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=M;return a.index++,l}function Ci(i,a){return typeof a=="function"?a(i):a}function Jf(i){var a=Mt();return Bg(a,rt,i)}function Bg(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var m=i.baseQueue,g=c.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}a.baseQueue=m=g,c.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{a=m.next;var w=T=null,O=null,Q=a,re=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(qe&se)===se:(gs&se)===se){var Y=Q.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===ol&&(re=!0);else if((gs&Y)===Y){Q=Q.next,Y===ol&&(re=!0);continue}else se={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(w=O=se,T=g):O=O.next=se,De.lanes|=Y,ws|=Y;se=Q.action,$a&&l(g,se),g=Q.hasEagerState?Q.eagerState:l(g,se)}else Y={lane:se,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(w=O=Y,T=g):O=O.next=Y,De.lanes|=se,ws|=se;Q=Q.next}while(Q!==null&&Q!==a);if(O===null?T=g:O.next=w,!zn(g,i.memoizedState)&&(Jt=!0,re&&(l=ll,l!==null)))throw l;i.memoizedState=g,i.baseState=T,i.baseQueue=O,c.lastRenderedState=g}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function zg(i){var a=Mt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,m=l.pending,g=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);zn(g,a.memoizedState)||(Jt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,c]}function oE(i,a,l){var c=De,m=Mt(),g=Qe;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!zn((rt||m).memoizedState,l);T&&(m.memoizedState=l,Jt=!0),m=m.queue;var w=cE.bind(null,c,m,i);if(pc(2048,8,w,[i]),m.getSnapshot!==a||T||Vt!==null&&Vt.memoizedState.tag&1){if(c.flags|=2048,fl(9,Zf(),uE.bind(null,c,m,l,a),null),ut===null)throw Error(r(349));g||(gs&124)!==0||lE(c,a,l)}return l}function lE(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=De.updateQueue,a===null?(a=Ug(),De.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function uE(i,a,l,c){a.value=l,a.getSnapshot=c,hE(a)&&fE(i)}function cE(i,a,l){return l(function(){hE(a)&&fE(i)})}function hE(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!zn(i,l)}catch{return!0}}function fE(i){var a=rl(i,2);a!==null&&Kn(a,i,2)}function qg(i){var a=On();if(typeof i=="function"){var l=i;if(i=l(),$a){jn(!0);try{l()}finally{jn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:i},a}function dE(i,a,l,c){return i.baseState=l,Bg(i,rt,typeof c=="function"?c:Ci)}function WC(i,a,l,c,m){if(td(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};ne.T!==null?l(!0):g.isTransition=!1,c(g),l=a.pending,l===null?(g.next=a.pending=g,mE(a,g)):(g.next=l.next,a.pending=l.next=g)}}function mE(i,a){var l=a.action,c=a.payload,m=i.state;if(a.isTransition){var g=ne.T,T={};ne.T=T;try{var w=l(m,c),O=ne.S;O!==null&&O(T,w),pE(i,a,w)}catch(Q){Fg(i,a,Q)}finally{ne.T=g}}else try{g=l(m,c),pE(i,a,g)}catch(Q){Fg(i,a,Q)}}function pE(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){gE(i,a,c)},function(c){return Fg(i,a,c)}):gE(i,a,l)}function gE(i,a,l){a.status="fulfilled",a.value=l,yE(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,mE(i,l)))}function Fg(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,yE(a),a=a.next;while(a!==c)}i.action=null}function yE(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function _E(i,a){return a}function vE(i,a){if(Qe){var l=ut.formState;if(l!==null){e:{var c=De;if(Qe){if(wt){t:{for(var m=wt,g=Hr;m.nodeType!==8;){if(!g){m=null;break t}if(m=Sr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){wt=Sr(m.nextSibling),c=m.data==="F!";break e}}qa(c)}c=!1}c&&(a=l[0])}}return l=On(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_E,lastRenderedState:a},l.queue=c,l=UE.bind(null,De,c),c.dispatch=l,c=qg(!1),g=Qg.bind(null,De,!1,c.queue),c=On(),m={state:a,dispatch:null,action:i,pending:null},c.queue=m,l=WC.bind(null,De,m,g,l),m.dispatch=l,c.memoizedState=i,[a,l,!1]}function bE(i){var a=Mt();return EE(a,rt,i)}function EE(i,a,l){if(a=Bg(i,a,_E)[0],i=Jf(Ci)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=mc(a)}catch(T){throw T===lc?$f:T}else c=a;a=Mt();var m=a.queue,g=m.dispatch;return l!==a.memoizedState&&(De.flags|=2048,fl(9,Zf(),JC.bind(null,m,l),null)),[c,g,i]}function JC(i,a){i.action=a}function TE(i){var a=Mt(),l=rt;if(l!==null)return EE(a,l,i);Mt(),a=a.memoizedState,l=Mt();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function fl(i,a,l,c){return i={tag:i,create:l,deps:c,inst:a,next:null},a=De.updateQueue,a===null&&(a=Ug(),De.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function Zf(){return{destroy:void 0,resource:void 0}}function wE(){return Mt().memoizedState}function ed(i,a,l,c){var m=On();c=c===void 0?null:c,De.flags|=i,m.memoizedState=fl(1|a,Zf(),l,c)}function pc(i,a,l,c){var m=Mt();c=c===void 0?null:c;var g=m.memoizedState.inst;rt!==null&&c!==null&&Pg(c,rt.memoizedState.deps)?m.memoizedState=fl(a,g,l,c):(De.flags|=i,m.memoizedState=fl(1|a,g,l,c))}function SE(i,a){ed(8390656,8,i,a)}function AE(i,a){pc(2048,8,i,a)}function IE(i,a){return pc(4,2,i,a)}function xE(i,a){return pc(4,4,i,a)}function RE(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function CE(i,a,l){l=l!=null?l.concat([i]):null,pc(4,4,RE.bind(null,a,i),l)}function Hg(){}function NE(i,a){var l=Mt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&Pg(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function DE(i,a){var l=Mt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&Pg(a,c[1]))return c[0];if(c=i(),$a){jn(!0);try{i()}finally{jn(!1)}}return l.memoizedState=[c,a],c}function Gg(i,a,l){return l===void 0||(gs&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=kT(),De.lanes|=i,ws|=i,l)}function OE(i,a,l,c){return zn(l,a)?l:ul.current!==null?(i=Gg(i,l,c),zn(i,a)||(Jt=!0),i):(gs&42)===0?(Jt=!0,i.memoizedState=l):(i=kT(),De.lanes|=i,ws|=i,a)}function PE(i,a,l,c,m){var g=fe.p;fe.p=g!==0&&8>g?g:8;var T=ne.T,w={};ne.T=w,Qg(i,!1,a,l);try{var O=m(),Q=ne.S;if(Q!==null&&Q(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var re=QC(O,c);gc(i,a,re,$n(i))}else gc(i,a,c,$n(i))}catch(se){gc(i,a,{then:function(){},status:"rejected",reason:se},$n())}finally{fe.p=g,ne.T=T}}function ZC(){}function $g(i,a,l,c){if(i.tag!==5)throw Error(r(476));var m=kE(i).queue;PE(i,m,a,_e,l===null?ZC:function(){return VE(i),l(c)})}function kE(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:_e},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function VE(i){var a=kE(i).next.queue;gc(i,a,{},$n())}function Kg(){return pn(kc)}function ME(){return Mt().memoizedState}function LE(){return Mt().memoizedState}function eN(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=$n();i=ms(l);var c=ps(a,i,l);c!==null&&(Kn(c,a,l),cc(c,a,l)),a={cache:wg()},i.payload=a;return}a=a.return}}function tN(i,a,l){var c=$n();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},td(i)?jE(a,l):(l=dg(i,a,l,c),l!==null&&(Kn(l,i,c),BE(l,a,c)))}function UE(i,a,l){var c=$n();gc(i,a,l,c)}function gc(i,a,l,c){var m={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(td(i))jE(a,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var T=a.lastRenderedState,w=g(T,l);if(m.hasEagerState=!0,m.eagerState=w,zn(w,T))return Uf(i,a,m,0),ut===null&&Lf(),!1}catch{}finally{}if(l=dg(i,a,m,c),l!==null)return Kn(l,i,c),BE(l,a,c),!0}return!1}function Qg(i,a,l,c){if(c={lane:2,revertLane:Iy(),action:c,hasEagerState:!1,eagerState:null,next:null},td(i)){if(a)throw Error(r(479))}else a=dg(i,l,c,2),a!==null&&Kn(a,i,2)}function td(i){var a=i.alternate;return i===De||a!==null&&a===De}function jE(i,a){cl=Yf=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function BE(i,a,l){if((l&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Uu(i,l)}}var nd={readContext:pn,use:Wf,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},zE={readContext:pn,use:Wf,useCallback:function(i,a){return On().memoizedState=[i,a===void 0?null:a],i},useContext:pn,useEffect:SE,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,ed(4194308,4,RE.bind(null,a,i),l)},useLayoutEffect:function(i,a){return ed(4194308,4,i,a)},useInsertionEffect:function(i,a){ed(4,2,i,a)},useMemo:function(i,a){var l=On();a=a===void 0?null:a;var c=i();if($a){jn(!0);try{i()}finally{jn(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=On();if(l!==void 0){var m=l(a);if($a){jn(!0);try{l(a)}finally{jn(!1)}}}else m=a;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=tN.bind(null,De,i),[c.memoizedState,i]},useRef:function(i){var a=On();return i={current:i},a.memoizedState=i},useState:function(i){i=qg(i);var a=i.queue,l=UE.bind(null,De,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Hg,useDeferredValue:function(i,a){var l=On();return Gg(l,i,a)},useTransition:function(){var i=qg(!1);return i=PE.bind(null,De,i.queue,!0,!1),On().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=De,m=On();if(Qe){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),ut===null)throw Error(r(349));(qe&124)!==0||lE(c,a,l)}m.memoizedState=l;var g={value:l,getSnapshot:a};return m.queue=g,SE(cE.bind(null,c,g,i),[i]),c.flags|=2048,fl(9,Zf(),uE.bind(null,c,g,l,a),null),l},useId:function(){var i=On(),a=ut.identifierPrefix;if(Qe){var l=Ii,c=Ai;l=(c&~(1<<32-mn(c)-1)).toString(32)+l,a="«"+a+"R"+l,l=Xf++,0<l&&(a+="H"+l.toString(32)),a+="»"}else l=YC++,a="«"+a+"r"+l.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:Kg,useFormState:vE,useActionState:vE,useOptimistic:function(i){var a=On();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Qg.bind(null,De,!0,l),l.dispatch=a,[i,a]},useMemoCache:jg,useCacheRefresh:function(){return On().memoizedState=eN.bind(null,De)}},qE={readContext:pn,use:Wf,useCallback:NE,useContext:pn,useEffect:AE,useImperativeHandle:CE,useInsertionEffect:IE,useLayoutEffect:xE,useMemo:DE,useReducer:Jf,useRef:wE,useState:function(){return Jf(Ci)},useDebugValue:Hg,useDeferredValue:function(i,a){var l=Mt();return OE(l,rt.memoizedState,i,a)},useTransition:function(){var i=Jf(Ci)[0],a=Mt().memoizedState;return[typeof i=="boolean"?i:mc(i),a]},useSyncExternalStore:oE,useId:ME,useHostTransitionStatus:Kg,useFormState:bE,useActionState:bE,useOptimistic:function(i,a){var l=Mt();return dE(l,rt,i,a)},useMemoCache:jg,useCacheRefresh:LE},nN={readContext:pn,use:Wf,useCallback:NE,useContext:pn,useEffect:AE,useImperativeHandle:CE,useInsertionEffect:IE,useLayoutEffect:xE,useMemo:DE,useReducer:zg,useRef:wE,useState:function(){return zg(Ci)},useDebugValue:Hg,useDeferredValue:function(i,a){var l=Mt();return rt===null?Gg(l,i,a):OE(l,rt.memoizedState,i,a)},useTransition:function(){var i=zg(Ci)[0],a=Mt().memoizedState;return[typeof i=="boolean"?i:mc(i),a]},useSyncExternalStore:oE,useId:ME,useHostTransitionStatus:Kg,useFormState:TE,useActionState:TE,useOptimistic:function(i,a){var l=Mt();return rt!==null?dE(l,rt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:jg,useCacheRefresh:LE},dl=null,yc=0;function rd(i){var a=yc;return yc+=1,dl===null&&(dl=[]),Zb(dl,i,a)}function _c(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function id(i,a){throw a.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function FE(i){var a=i._init;return a(i._payload)}function HE(i){function a(H,j){if(i){var K=H.deletions;K===null?(H.deletions=[j],H.flags|=16):K.push(j)}}function l(H,j){if(!i)return null;for(;j!==null;)a(H,j),j=j.sibling;return null}function c(H){for(var j=new Map;H!==null;)H.key!==null?j.set(H.key,H):j.set(H.index,H),H=H.sibling;return j}function m(H,j){return H=Si(H,j),H.index=0,H.sibling=null,H}function g(H,j,K){return H.index=K,i?(K=H.alternate,K!==null?(K=K.index,K<j?(H.flags|=67108866,j):K):(H.flags|=67108866,j)):(H.flags|=1048576,j)}function T(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function w(H,j,K,ie){return j===null||j.tag!==6?(j=pg(K,H.mode,ie),j.return=H,j):(j=m(j,K),j.return=H,j)}function O(H,j,K,ie){var ge=K.type;return ge===R?re(H,j,K.props.children,ie,K.key):j!==null&&(j.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&FE(ge)===j.type)?(j=m(j,K.props),_c(j,K),j.return=H,j):(j=Bf(K.type,K.key,K.props,null,H.mode,ie),_c(j,K),j.return=H,j)}function Q(H,j,K,ie){return j===null||j.tag!==4||j.stateNode.containerInfo!==K.containerInfo||j.stateNode.implementation!==K.implementation?(j=gg(K,H.mode,ie),j.return=H,j):(j=m(j,K.children||[]),j.return=H,j)}function re(H,j,K,ie,ge){return j===null||j.tag!==7?(j=Ua(K,H.mode,ie,ge),j.return=H,j):(j=m(j,K),j.return=H,j)}function se(H,j,K){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=pg(""+j,H.mode,K),j.return=H,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case E:return K=Bf(j.type,j.key,j.props,null,H.mode,K),_c(K,j),K.return=H,K;case A:return j=gg(j,H.mode,K),j.return=H,j;case x:var ie=j._init;return j=ie(j._payload),se(H,j,K)}if(dt(j)||q(j))return j=Ua(j,H.mode,K,null),j.return=H,j;if(typeof j.then=="function")return se(H,rd(j),K);if(j.$$typeof===B)return se(H,Hf(H,j),K);id(H,j)}return null}function Y(H,j,K,ie){var ge=j!==null?j.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ge!==null?null:w(H,j,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return K.key===ge?O(H,j,K,ie):null;case A:return K.key===ge?Q(H,j,K,ie):null;case x:return ge=K._init,K=ge(K._payload),Y(H,j,K,ie)}if(dt(K)||q(K))return ge!==null?null:re(H,j,K,ie,null);if(typeof K.then=="function")return Y(H,j,rd(K),ie);if(K.$$typeof===B)return Y(H,j,Hf(H,K),ie);id(H,K)}return null}function W(H,j,K,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return H=H.get(K)||null,w(j,H,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return H=H.get(ie.key===null?K:ie.key)||null,O(j,H,ie,ge);case A:return H=H.get(ie.key===null?K:ie.key)||null,Q(j,H,ie,ge);case x:var Pe=ie._init;return ie=Pe(ie._payload),W(H,j,K,ie,ge)}if(dt(ie)||q(ie))return H=H.get(K)||null,re(j,H,ie,ge,null);if(typeof ie.then=="function")return W(H,j,K,rd(ie),ge);if(ie.$$typeof===B)return W(H,j,K,Hf(j,ie),ge);id(j,ie)}return null}function Ae(H,j,K,ie){for(var ge=null,Pe=null,be=j,we=j=0,en=null;be!==null&&we<K.length;we++){be.index>we?(en=be,be=null):en=be.sibling;var He=Y(H,be,K[we],ie);if(He===null){be===null&&(be=en);break}i&&be&&He.alternate===null&&a(H,be),j=g(He,j,we),Pe===null?ge=He:Pe.sibling=He,Pe=He,be=en}if(we===K.length)return l(H,be),Qe&&Ba(H,we),ge;if(be===null){for(;we<K.length;we++)be=se(H,K[we],ie),be!==null&&(j=g(be,j,we),Pe===null?ge=be:Pe.sibling=be,Pe=be);return Qe&&Ba(H,we),ge}for(be=c(be);we<K.length;we++)en=W(be,H,we,K[we],ie),en!==null&&(i&&en.alternate!==null&&be.delete(en.key===null?we:en.key),j=g(en,j,we),Pe===null?ge=en:Pe.sibling=en,Pe=en);return i&&be.forEach(function(Os){return a(H,Os)}),Qe&&Ba(H,we),ge}function Te(H,j,K,ie){if(K==null)throw Error(r(151));for(var ge=null,Pe=null,be=j,we=j=0,en=null,He=K.next();be!==null&&!He.done;we++,He=K.next()){be.index>we?(en=be,be=null):en=be.sibling;var Os=Y(H,be,He.value,ie);if(Os===null){be===null&&(be=en);break}i&&be&&Os.alternate===null&&a(H,be),j=g(Os,j,we),Pe===null?ge=Os:Pe.sibling=Os,Pe=Os,be=en}if(He.done)return l(H,be),Qe&&Ba(H,we),ge;if(be===null){for(;!He.done;we++,He=K.next())He=se(H,He.value,ie),He!==null&&(j=g(He,j,we),Pe===null?ge=He:Pe.sibling=He,Pe=He);return Qe&&Ba(H,we),ge}for(be=c(be);!He.done;we++,He=K.next())He=W(be,H,we,He.value,ie),He!==null&&(i&&He.alternate!==null&&be.delete(He.key===null?we:He.key),j=g(He,j,we),Pe===null?ge=He:Pe.sibling=He,Pe=He);return i&&be.forEach(function(rD){return a(H,rD)}),Qe&&Ba(H,we),ge}function st(H,j,K,ie){if(typeof K=="object"&&K!==null&&K.type===R&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case E:e:{for(var ge=K.key;j!==null;){if(j.key===ge){if(ge=K.type,ge===R){if(j.tag===7){l(H,j.sibling),ie=m(j,K.props.children),ie.return=H,H=ie;break e}}else if(j.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&FE(ge)===j.type){l(H,j.sibling),ie=m(j,K.props),_c(ie,K),ie.return=H,H=ie;break e}l(H,j);break}else a(H,j);j=j.sibling}K.type===R?(ie=Ua(K.props.children,H.mode,ie,K.key),ie.return=H,H=ie):(ie=Bf(K.type,K.key,K.props,null,H.mode,ie),_c(ie,K),ie.return=H,H=ie)}return T(H);case A:e:{for(ge=K.key;j!==null;){if(j.key===ge)if(j.tag===4&&j.stateNode.containerInfo===K.containerInfo&&j.stateNode.implementation===K.implementation){l(H,j.sibling),ie=m(j,K.children||[]),ie.return=H,H=ie;break e}else{l(H,j);break}else a(H,j);j=j.sibling}ie=gg(K,H.mode,ie),ie.return=H,H=ie}return T(H);case x:return ge=K._init,K=ge(K._payload),st(H,j,K,ie)}if(dt(K))return Ae(H,j,K,ie);if(q(K)){if(ge=q(K),typeof ge!="function")throw Error(r(150));return K=ge.call(K),Te(H,j,K,ie)}if(typeof K.then=="function")return st(H,j,rd(K),ie);if(K.$$typeof===B)return st(H,j,Hf(H,K),ie);id(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,j!==null&&j.tag===6?(l(H,j.sibling),ie=m(j,K),ie.return=H,H=ie):(l(H,j),ie=pg(K,H.mode,ie),ie.return=H,H=ie),T(H)):l(H,j)}return function(H,j,K,ie){try{yc=0;var ge=st(H,j,K,ie);return dl=null,ge}catch(be){if(be===lc||be===$f)throw be;var Pe=qn(29,be,null,H.mode);return Pe.lanes=ie,Pe.return=H,Pe}finally{}}}var ml=HE(!0),GE=HE(!1),cr=oe(null),Gr=null;function ys(i){var a=i.alternate;ue($t,$t.current&1),ue(cr,i),Gr===null&&(a===null||ul.current!==null||a.memoizedState!==null)&&(Gr=i)}function $E(i){if(i.tag===22){if(ue($t,$t.current),ue(cr,i),Gr===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Gr=i)}}else _s()}function _s(){ue($t,$t.current),ue(cr,cr.current)}function Ni(i){me(cr),Gr===i&&(Gr=null),me($t)}var $t=oe(0);function sd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Uy(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Yg(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Xg={enqueueSetState:function(i,a,l){i=i._reactInternals;var c=$n(),m=ms(c);m.payload=a,l!=null&&(m.callback=l),a=ps(i,m,c),a!==null&&(Kn(a,i,c),cc(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=$n(),m=ms(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=ps(i,m,c),a!==null&&(Kn(a,i,c),cc(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=$n(),c=ms(l);c.tag=2,a!=null&&(c.callback=a),a=ps(i,c,l),a!==null&&(Kn(a,i,l),cc(a,i,l))}};function KE(i,a,l,c,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):a.prototype&&a.prototype.isPureReactComponent?!ec(l,c)||!ec(m,g):!0}function QE(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&Xg.enqueueReplaceState(a,a.state,null)}function Ka(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var ad=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function YE(i){ad(i)}function XE(i){console.error(i)}function WE(i){ad(i)}function od(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function JE(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Wg(i,a,l){return l=ms(l),l.tag=3,l.payload={element:null},l.callback=function(){od(i,a)},l}function ZE(i){return i=ms(i),i.tag=3,i}function eT(i,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;i.payload=function(){return m(g)},i.callback=function(){JE(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){JE(a,l,c),typeof m!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function rN(i,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&sc(a,l,m,!0),l=cr.current,l!==null){switch(l.tag){case 13:return Gr===null?Ey():l.alternate===null&&St===0&&(St=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===Ig?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),wy(i,c,m)),!1;case 22:return l.flags|=65536,c===Ig?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),wy(i,c,m)),!1}throw Error(r(435,l.tag))}return wy(i,c,m),Ey(),!1}if(Qe)return a=cr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==vg&&(i=Error(r(422),{cause:c}),ic(ar(i,l)))):(c!==vg&&(a=Error(r(423),{cause:c}),ic(ar(a,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=ar(c,l),m=Wg(i.stateNode,c,m),Cg(i,m),St!==4&&(St=2)),!1;var g=Error(r(520),{cause:c});if(g=ar(g,l),Ac===null?Ac=[g]:Ac.push(g),St!==4&&(St=2),a===null)return!0;c=ar(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=Wg(l.stateNode,c,i),Cg(l,i),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ss===null||!Ss.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=ZE(m),eT(m,i,l,c),Cg(l,m),!1}l=l.return}while(l!==null);return!1}var tT=Error(r(461)),Jt=!1;function an(i,a,l,c){a.child=i===null?GE(a,null,l,c):ml(a,i.child,l,c)}function nT(i,a,l,c,m){l=l.render;var g=a.ref;if("ref"in c){var T={};for(var w in c)w!=="ref"&&(T[w]=c[w])}else T=c;return Ha(a),c=kg(i,a,l,T,g,m),w=Vg(),i!==null&&!Jt?(Mg(i,a,m),Di(i,a,m)):(Qe&&w&&yg(a),a.flags|=1,an(i,a,c,m),a.child)}function rT(i,a,l,c,m){if(i===null){var g=l.type;return typeof g=="function"&&!mg(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,iT(i,a,g,c,m)):(i=Bf(l.type,null,c,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!sy(i,m)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:ec,l(T,c)&&i.ref===a.ref)return Di(i,a,m)}return a.flags|=1,i=Si(g,c),i.ref=a.ref,i.return=a,a.child=i}function iT(i,a,l,c,m){if(i!==null){var g=i.memoizedProps;if(ec(g,c)&&i.ref===a.ref)if(Jt=!1,a.pendingProps=c=g,sy(i,m))(i.flags&131072)!==0&&(Jt=!0);else return a.lanes=i.lanes,Di(i,a,m)}return Jg(i,a,l,c,m)}function sT(i,a,l){var c=a.pendingProps,m=c.children,g=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((a.flags&128)!==0){if(c=g!==null?g.baseLanes|l:l,i!==null){for(m=a.child=i.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;a.childLanes=g&~c}else a.childLanes=0,a.child=null;return aT(i,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Gf(a,g!==null?g.cachePool:null),g!==null?iE(a,g):Dg(),$E(a);else return a.lanes=a.childLanes=536870912,aT(i,a,g!==null?g.baseLanes|l:l,l)}else g!==null?(Gf(a,g.cachePool),iE(a,g),_s(),a.memoizedState=null):(i!==null&&Gf(a,null),Dg(),_s());return an(i,a,m,l),a.child}function aT(i,a,l,c){var m=Ag();return m=m===null?null:{parent:Gt._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},i!==null&&Gf(a,null),Dg(),$E(a),i!==null&&sc(i,a,c,!0),null}function ld(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Jg(i,a,l,c,m){return Ha(a),l=kg(i,a,l,c,void 0,m),c=Vg(),i!==null&&!Jt?(Mg(i,a,m),Di(i,a,m)):(Qe&&c&&yg(a),a.flags|=1,an(i,a,l,m),a.child)}function oT(i,a,l,c,m,g){return Ha(a),a.updateQueue=null,l=aE(a,c,l,m),sE(i),c=Vg(),i!==null&&!Jt?(Mg(i,a,g),Di(i,a,g)):(Qe&&c&&yg(a),a.flags|=1,an(i,a,l,g),a.child)}function lT(i,a,l,c,m){if(Ha(a),a.stateNode===null){var g=il,T=l.contextType;typeof T=="object"&&T!==null&&(g=pn(T)),g=new l(c,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Xg,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=c,g.state=a.memoizedState,g.refs={},xg(a),T=l.contextType,g.context=typeof T=="object"&&T!==null?pn(T):il,g.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Yg(a,l,T,c),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Xg.enqueueReplaceState(g,g.state,null),fc(a,c,g,m),hc(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){g=a.stateNode;var w=a.memoizedProps,O=Ka(l,w);g.props=O;var Q=g.context,re=l.contextType;T=il,typeof re=="object"&&re!==null&&(T=pn(re));var se=l.getDerivedStateFromProps;re=typeof se=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||Q!==T)&&QE(a,g,c,T),ds=!1;var Y=a.memoizedState;g.state=Y,fc(a,c,g,m),hc(),Q=a.memoizedState,w||Y!==Q||ds?(typeof se=="function"&&(Yg(a,l,se,c),Q=a.memoizedState),(O=ds||KE(a,l,O,c,Y,Q,T))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=Q),g.props=c,g.state=Q,g.context=T,c=O):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{g=a.stateNode,Rg(i,a),T=a.memoizedProps,re=Ka(l,T),g.props=re,se=a.pendingProps,Y=g.context,Q=l.contextType,O=il,typeof Q=="object"&&Q!==null&&(O=pn(Q)),w=l.getDerivedStateFromProps,(Q=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==se||Y!==O)&&QE(a,g,c,O),ds=!1,Y=a.memoizedState,g.state=Y,fc(a,c,g,m),hc();var W=a.memoizedState;T!==se||Y!==W||ds||i!==null&&i.dependencies!==null&&Ff(i.dependencies)?(typeof w=="function"&&(Yg(a,l,w,c),W=a.memoizedState),(re=ds||KE(a,l,re,c,Y,W,O)||i!==null&&i.dependencies!==null&&Ff(i.dependencies))?(Q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,W,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,W,O)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=W),g.props=c,g.state=W,g.context=O,c=re):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),c=!1)}return g=c,ld(i,a),c=(a.flags&128)!==0,g||c?(g=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&c?(a.child=ml(a,i.child,null,m),a.child=ml(a,null,l,m)):an(i,a,l,m),a.memoizedState=g.state,i=a.child):i=Di(i,a,m),i}function uT(i,a,l,c){return rc(),a.flags|=256,an(i,a,l,c),a.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ey(i){return{baseLanes:i,cachePool:Xb()}}function ty(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=hr),i}function cT(i,a,l){var c=a.pendingProps,m=!1,g=(a.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:($t.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(Qe){if(m?ys(a):_s(),Qe){var w=wt,O;if(O=w){e:{for(O=w,w=Hr;O.nodeType!==8;){if(!w){w=null;break e}if(O=Sr(O.nextSibling),O===null){w=null;break e}}w=O}w!==null?(a.memoizedState={dehydrated:w,treeContext:ja!==null?{id:Ai,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},O=qn(18,null,null,0),O.stateNode=w,O.return=a,a.child=O,An=a,wt=null,O=!0):O=!1}O||qa(a)}if(w=a.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Uy(w)?a.lanes=32:a.lanes=536870912,null;Ni(a)}return w=c.children,c=c.fallback,m?(_s(),m=a.mode,w=ud({mode:"hidden",children:w},m),c=Ua(c,m,l,null),w.return=a,c.return=a,w.sibling=c,a.child=w,m=a.child,m.memoizedState=ey(l),m.childLanes=ty(i,T,l),a.memoizedState=Zg,c):(ys(a),ny(a,w))}if(O=i.memoizedState,O!==null&&(w=O.dehydrated,w!==null)){if(g)a.flags&256?(ys(a),a.flags&=-257,a=ry(i,a,l)):a.memoizedState!==null?(_s(),a.child=i.child,a.flags|=128,a=null):(_s(),m=c.fallback,w=a.mode,c=ud({mode:"visible",children:c.children},w),m=Ua(m,w,l,null),m.flags|=2,c.return=a,m.return=a,c.sibling=m,a.child=c,ml(a,i.child,null,l),c=a.child,c.memoizedState=ey(l),c.childLanes=ty(i,T,l),a.memoizedState=Zg,a=m);else if(ys(a),Uy(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var Q=T.dgst;T=Q,c=Error(r(419)),c.stack="",c.digest=T,ic({value:c,source:null,stack:null}),a=ry(i,a,l)}else if(Jt||sc(i,a,l,!1),T=(l&i.childLanes)!==0,Jt||T){if(T=ut,T!==null&&(c=l&-l,c=(c&42)!==0?1:ss(c),c=(c&(T.suspendedLanes|l))!==0?0:c,c!==0&&c!==O.retryLane))throw O.retryLane=c,rl(i,c),Kn(T,i,c),tT;w.data==="$?"||Ey(),a=ry(i,a,l)}else w.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=O.treeContext,wt=Sr(w.nextSibling),An=a,Qe=!0,za=null,Hr=!1,i!==null&&(lr[ur++]=Ai,lr[ur++]=Ii,lr[ur++]=ja,Ai=i.id,Ii=i.overflow,ja=a),a=ny(a,c.children),a.flags|=4096);return a}return m?(_s(),m=c.fallback,w=a.mode,O=i.child,Q=O.sibling,c=Si(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,Q!==null?m=Si(Q,m):(m=Ua(m,w,l,null),m.flags|=2),m.return=a,c.return=a,c.sibling=m,a.child=c,c=m,m=a.child,w=i.child.memoizedState,w===null?w=ey(l):(O=w.cachePool,O!==null?(Q=Gt._currentValue,O=O.parent!==Q?{parent:Q,pool:Q}:O):O=Xb(),w={baseLanes:w.baseLanes|l,cachePool:O}),m.memoizedState=w,m.childLanes=ty(i,T,l),a.memoizedState=Zg,c):(ys(a),l=i.child,i=l.sibling,l=Si(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function ny(i,a){return a=ud({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function ud(i,a){return i=qn(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ry(i,a,l){return ml(a,i.child,null,l),i=ny(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function hT(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),Eg(i.return,a,l)}function iy(i,a,l,c,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=m)}function fT(i,a,l){var c=a.pendingProps,m=c.revealOrder,g=c.tail;if(an(i,a,c.children,l),c=$t.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&hT(i,l,a);else if(i.tag===19)hT(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(ue($t,c),m){case"forwards":for(l=a.child,m=null;l!==null;)i=l.alternate,i!==null&&sd(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),iy(a,!1,m,l,g);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&sd(i)===null){a.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}iy(a,!0,l,null,g);break;case"together":iy(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Di(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ws|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(sc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Si(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Si(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function sy(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Ff(i)))}function iN(i,a,l){switch(a.tag){case 3:lt(a,a.stateNode.containerInfo),fs(a,Gt,i.memoizedState.cache),rc();break;case 27:case 5:is(a);break;case 4:lt(a,a.stateNode.containerInfo);break;case 10:fs(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(ys(a),a.flags|=128,null):(l&a.child.childLanes)!==0?cT(i,a,l):(ys(a),i=Di(i,a,l),i!==null?i.sibling:null);ys(a);break;case 19:var m=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(sc(i,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return fT(i,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue($t,$t.current),c)break;return null;case 22:case 23:return a.lanes=0,sT(i,a,l);case 24:fs(a,Gt,i.memoizedState.cache)}return Di(i,a,l)}function dT(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Jt=!0;else{if(!sy(i,l)&&(a.flags&128)===0)return Jt=!1,iN(i,a,l);Jt=(i.flags&131072)!==0}else Jt=!1,Qe&&(a.flags&1048576)!==0&&Fb(a,qf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,m=c._init;if(c=m(c._payload),a.type=c,typeof c=="function")mg(c)?(i=Ka(c,i),a.tag=1,a=lT(null,a,c,i,l)):(a.tag=0,a=Jg(null,a,c,i,l));else{if(c!=null){if(m=c.$$typeof,m===X){a.tag=11,a=nT(null,a,c,i,l);break e}else if(m===C){a.tag=14,a=rT(null,a,c,i,l);break e}}throw a=zt(c)||c,Error(r(306,a,""))}}return a;case 0:return Jg(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=Ka(c,a.pendingProps),lT(i,a,c,m,l);case 3:e:{if(lt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));c=a.pendingProps;var g=a.memoizedState;m=g.element,Rg(i,a),fc(a,c,null,l);var T=a.memoizedState;if(c=T.cache,fs(a,Gt,c),c!==g.cache&&Tg(a,[Gt],l,!0),hc(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=uT(i,a,c,l);break e}else if(c!==m){m=ar(Error(r(424)),a),ic(m),a=uT(i,a,c,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(wt=Sr(i.firstChild),An=a,Qe=!0,za=null,Hr=!0,l=GE(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(rc(),c===m){a=Di(i,a,l);break e}an(i,a,c,l)}a=a.child}return a;case 26:return ld(i,a),i===null?(l=yw(a.type,null,a.pendingProps,null))?a.memoizedState=l:Qe||(l=a.type,i=a.pendingProps,c=wd(xe.current).createElement(l),c[qt]=a,c[Pt]=i,ln(c,l,i),It(c),a.stateNode=c):a.memoizedState=yw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return is(a),i===null&&Qe&&(c=a.stateNode=mw(a.type,a.pendingProps,xe.current),An=a,Hr=!0,m=wt,xs(a.type)?(jy=m,wt=Sr(c.firstChild)):wt=m),an(i,a,a.pendingProps.children,l),ld(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Qe&&((m=c=wt)&&(c=ON(c,a.type,a.pendingProps,Hr),c!==null?(a.stateNode=c,An=a,wt=Sr(c.firstChild),Hr=!1,m=!0):m=!1),m||qa(a)),is(a),m=a.type,g=a.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,Vy(m,g)?c=null:T!==null&&Vy(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=kg(i,a,XC,null,null,l),kc._currentValue=m),ld(i,a),an(i,a,c,l),a.child;case 6:return i===null&&Qe&&((i=l=wt)&&(l=PN(l,a.pendingProps,Hr),l!==null?(a.stateNode=l,An=a,wt=null,i=!0):i=!1),i||qa(a)),null;case 13:return cT(i,a,l);case 4:return lt(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=ml(a,null,c,l):an(i,a,c,l),a.child;case 11:return nT(i,a,a.type,a.pendingProps,l);case 7:return an(i,a,a.pendingProps,l),a.child;case 8:return an(i,a,a.pendingProps.children,l),a.child;case 12:return an(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,fs(a,a.type,c.value),an(i,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,Ha(a),m=pn(m),c=c(m),a.flags|=1,an(i,a,c,l),a.child;case 14:return rT(i,a,a.type,a.pendingProps,l);case 15:return iT(i,a,a.type,a.pendingProps,l);case 19:return fT(i,a,l);case 31:return c=a.pendingProps,l=a.mode,c={mode:c.mode,children:c.children},i===null?(l=ud(c,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Si(i.child,c),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return sT(i,a,l);case 24:return Ha(a),c=pn(Gt),i===null?(m=Ag(),m===null&&(m=ut,g=wg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),a.memoizedState={parent:c,cache:m},xg(a),fs(a,Gt,m)):((i.lanes&l)!==0&&(Rg(i,a),fc(a,null,null,l),hc()),m=i.memoizedState,g=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),fs(a,Gt,c)):(c=g.cache,fs(a,Gt,c),c!==m.cache&&Tg(a,[Gt],l,!0))),an(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Oi(i){i.flags|=4}function mT(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Tw(a)){if(a=cr.current,a!==null&&((qe&4194048)===qe?Gr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||a!==Gr))throw uc=Ig,Wb;i.flags|=8192}}function cd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Mu():536870912,i.lanes|=a,_l|=a)}function vc(i,a){if(!Qe)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function bt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function sN(i,a,l){var c=a.pendingProps;switch(_g(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(a),null;case 1:return bt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ri(Gt),Or(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(nc(a)?Oi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$b())),bt(a),null;case 26:return l=a.memoizedState,i===null?(Oi(a),l!==null?(bt(a),mT(a,l)):(bt(a),a.flags&=-16777217)):l?l!==i.memoizedState?(Oi(a),bt(a),mT(a,l)):(bt(a),a.flags&=-16777217):(i.memoizedProps!==c&&Oi(a),bt(a),a.flags&=-16777217),null;case 27:hi(a),l=xe.current;var m=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&Oi(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return bt(a),null}i=Ee.current,nc(a)?Hb(a):(i=mw(m,c,l),a.stateNode=i,Oi(a))}return bt(a),null;case 5:if(hi(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&Oi(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return bt(a),null}if(i=Ee.current,nc(a))Hb(a);else{switch(m=wd(xe.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(l,{is:c.is}):m.createElement(l)}}i[qt]=a,i[Pt]=c;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=i;e:switch(ln(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Oi(a)}}return bt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&Oi(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=xe.current,nc(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,m=An,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[qt]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||ow(i.nodeValue,l)),i||qa(a)}else i=wd(i).createTextNode(c),i[qt]=a,a.stateNode=i}return bt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=nc(a),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[qt]=a}else rc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),m=!1}else m=$b(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Ni(a),a):(Ni(a),null)}if(Ni(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),cd(a,a.updateQueue),bt(a),null;case 4:return Or(),i===null&&Ny(a.stateNode.containerInfo),bt(a),null;case 10:return Ri(a.type),bt(a),null;case 19:if(me($t),m=a.memoizedState,m===null)return bt(a),null;if(c=(a.flags&128)!==0,g=m.rendering,g===null)if(c)vc(m,!1);else{if(St!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=sd(i),g!==null){for(a.flags|=128,vc(m,!1),i=g.updateQueue,a.updateQueue=i,cd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)qb(l,i),l=l.sibling;return ue($t,$t.current&1|2),a.child}i=i.sibling}m.tail!==null&&er()>dd&&(a.flags|=128,c=!0,vc(m,!1),a.lanes=4194304)}else{if(!c)if(i=sd(g),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,cd(a,i),vc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!Qe)return bt(a),null}else 2*er()-m.renderingStartTime>dd&&l!==536870912&&(a.flags|=128,c=!0,vc(m,!1),a.lanes=4194304);m.isBackwards?(g.sibling=a.child,a.child=g):(i=m.last,i!==null?i.sibling=g:a.child=g,m.last=g)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=er(),a.sibling=null,i=$t.current,ue($t,c?i&1|2:i&1),a):(bt(a),null);case 22:case 23:return Ni(a),Og(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(bt(a),a.subtreeFlags&6&&(a.flags|=8192)):bt(a),l=a.updateQueue,l!==null&&cd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&me(Ga),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ri(Gt),bt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function aN(i,a){switch(_g(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ri(Gt),Or(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return hi(a),null;case 13:if(Ni(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));rc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return me($t),null;case 4:return Or(),null;case 10:return Ri(a.type),null;case 22:case 23:return Ni(a),Og(),i!==null&&me(Ga),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ri(Gt),null;case 25:return null;default:return null}}function pT(i,a){switch(_g(a),a.tag){case 3:Ri(Gt),Or();break;case 26:case 27:case 5:hi(a);break;case 4:Or();break;case 13:Ni(a);break;case 19:me($t);break;case 10:Ri(a.type);break;case 22:case 23:Ni(a),Og(),i!==null&&me(Ga);break;case 24:Ri(Gt)}}function bc(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&i)===i){c=void 0;var g=l.create,T=l.inst;c=g(),T.destroy=c}l=l.next}while(l!==m)}}catch(w){at(a,a.return,w)}}function vs(i,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&i)===i){var T=c.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,m=a;var O=l,Q=w;try{Q()}catch(re){at(m,O,re)}}}c=c.next}while(c!==g)}}catch(re){at(a,a.return,re)}}function gT(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{rE(a,l)}catch(c){at(i,i.return,c)}}}function yT(i,a,l){l.props=Ka(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){at(i,a,c)}}function Ec(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(m){at(i,a,m)}}function $r(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){at(i,a,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){at(i,a,m)}else l.current=null}function _T(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){at(i,i.return,m)}}function ay(i,a,l){try{var c=i.stateNode;xN(c,i.type,l,a),c[Pt]=a}catch(m){at(i,i.return,m)}}function vT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&xs(i.type)||i.tag===4}function oy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&xs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ly(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Td));else if(c!==4&&(c===27&&xs(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(ly(i,a,l),i=i.sibling;i!==null;)ly(i,a,l),i=i.sibling}function hd(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&(c===27&&xs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(hd(i,a,l),i=i.sibling;i!==null;)hd(i,a,l),i=i.sibling}function bT(i){var a=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);ln(a,c,l),a[qt]=i,a[Pt]=l}catch(g){at(i,i.return,g)}}var Pi=!1,Rt=!1,uy=!1,ET=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function oN(i,a){if(i=i.containerInfo,Py=Cd,i=Ob(i),og(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,w=-1,O=-1,Q=0,re=0,se=i,Y=null;t:for(;;){for(var W;se!==l||m!==0&&se.nodeType!==3||(w=T+m),se!==g||c!==0&&se.nodeType!==3||(O=T+c),se.nodeType===3&&(T+=se.nodeValue.length),(W=se.firstChild)!==null;)Y=se,se=W;for(;;){if(se===i)break t;if(Y===l&&++Q===m&&(w=T),Y===g&&++re===c&&(O=T),(W=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=W}l=w===-1||O===-1?null:{start:w,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(ky={focusedElem:i,selectionRange:l},Cd=!1,Zt=a;Zt!==null;)if(a=Zt,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Zt=i;else for(;Zt!==null;){switch(a=Zt,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=a,m=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var Ae=Ka(l.type,m,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(Ae,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Te){at(l,l.return,Te)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Ly(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ly(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Zt=i;break}Zt=a.return}}function TT(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:bs(i,l),c&4&&bc(5,l);break;case 1:if(bs(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(T){at(l,l.return,T)}else{var m=Ka(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(m,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){at(l,l.return,T)}}c&64&&gT(l),c&512&&Ec(l,l.return);break;case 3:if(bs(i,l),c&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{rE(i,a)}catch(T){at(l,l.return,T)}}break;case 27:a===null&&c&4&&bT(l);case 26:case 5:bs(i,l),a===null&&c&4&&_T(l),c&512&&Ec(l,l.return);break;case 12:bs(i,l);break;case 13:bs(i,l),c&4&&AT(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=gN.bind(null,l),kN(i,l))));break;case 22:if(c=l.memoizedState!==null||Pi,!c){a=a!==null&&a.memoizedState!==null||Rt,m=Pi;var g=Rt;Pi=c,(Rt=a)&&!g?Es(i,l,(l.subtreeFlags&8772)!==0):bs(i,l),Pi=m,Rt=g}break;case 30:break;default:bs(i,l)}}function wT(i){var a=i.alternate;a!==null&&(i.alternate=null,wT(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&ls(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var gt=null,Pn=!1;function ki(i,a,l){for(l=l.child;l!==null;)ST(i,a,l),l=l.sibling}function ST(i,a,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Tt,l)}catch{}switch(l.tag){case 26:Rt||$r(l,a),ki(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Rt||$r(l,a);var c=gt,m=Pn;xs(l.type)&&(gt=l.stateNode,Pn=!1),ki(i,a,l),Nc(l.stateNode),gt=c,Pn=m;break;case 5:Rt||$r(l,a);case 6:if(c=gt,m=Pn,gt=null,ki(i,a,l),gt=c,Pn=m,gt!==null)if(Pn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(l.stateNode)}catch(g){at(l,a,g)}else try{gt.removeChild(l.stateNode)}catch(g){at(l,a,g)}break;case 18:gt!==null&&(Pn?(i=gt,fw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Uc(i)):fw(gt,l.stateNode));break;case 4:c=gt,m=Pn,gt=l.stateNode.containerInfo,Pn=!0,ki(i,a,l),gt=c,Pn=m;break;case 0:case 11:case 14:case 15:Rt||vs(2,l,a),Rt||vs(4,l,a),ki(i,a,l);break;case 1:Rt||($r(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&yT(l,a,c)),ki(i,a,l);break;case 21:ki(i,a,l);break;case 22:Rt=(c=Rt)||l.memoizedState!==null,ki(i,a,l),Rt=c;break;default:ki(i,a,l)}}function AT(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Uc(i)}catch(l){at(a,a.return,l)}}function lN(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new ET),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new ET),a;default:throw Error(r(435,i.tag))}}function cy(i,a){var l=lN(i);a.forEach(function(c){var m=yN.bind(null,i,c);l.has(c)||(l.add(c),c.then(m,m))})}function Fn(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],g=i,T=a,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(xs(w.type)){gt=w.stateNode,Pn=!1;break e}break;case 5:gt=w.stateNode,Pn=!1;break e;case 3:case 4:gt=w.stateNode.containerInfo,Pn=!0;break e}w=w.return}if(gt===null)throw Error(r(160));ST(g,T,m),gt=null,Pn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)IT(a,i),a=a.sibling}var wr=null;function IT(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Fn(a,i),Hn(i),c&4&&(vs(3,i,i.return),bc(3,i),vs(5,i,i.return));break;case 1:Fn(a,i),Hn(i),c&512&&(Rt||l===null||$r(l,l.return)),c&64&&Pi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=wr;if(Fn(a,i),Hn(i),c&512&&(Rt||l===null||$r(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ta]||g[qt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),ln(g,c,l),g[qt]=i,It(g),c=g;break e;case"link":var T=bw("link","href",m).get(c+(l.href||""));if(T){for(var w=0;w<T.length;w++)if(g=T[w],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(w,1);break t}}g=m.createElement(c),ln(g,c,l),m.head.appendChild(g);break;case"meta":if(T=bw("meta","content",m).get(c+(l.content||""))){for(w=0;w<T.length;w++)if(g=T[w],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(w,1);break t}}g=m.createElement(c),ln(g,c,l),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[qt]=i,It(g),c=g}i.stateNode=c}else Ew(m,i.type,i.stateNode);else i.stateNode=vw(m,c,i.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?Ew(m,i.type,i.stateNode):vw(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ay(i,i.memoizedProps,l.memoizedProps)}break;case 27:Fn(a,i),Hn(i),c&512&&(Rt||l===null||$r(l,l.return)),l!==null&&c&4&&ay(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Fn(a,i),Hn(i),c&512&&(Rt||l===null||$r(l,l.return)),i.flags&32){m=i.stateNode;try{nr(m,"")}catch(W){at(i,i.return,W)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,ay(i,m,l!==null?l.memoizedProps:m)),c&1024&&(uy=!0);break;case 6:if(Fn(a,i),Hn(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(W){at(i,i.return,W)}}break;case 3:if(Id=null,m=wr,wr=Sd(a.containerInfo),Fn(a,i),wr=m,Hn(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Uc(a.containerInfo)}catch(W){at(i,i.return,W)}uy&&(uy=!1,xT(i));break;case 4:c=wr,wr=Sd(i.stateNode.containerInfo),Fn(a,i),Hn(i),wr=c;break;case 12:Fn(a,i),Hn(i);break;case 13:Fn(a,i),Hn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(gy=er()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,cy(i,c)));break;case 22:m=i.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,Q=Pi,re=Rt;if(Pi=Q||m,Rt=re||O,Fn(a,i),Rt=re,Pi=Q,Hn(i),c&8192)e:for(a=i.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||O||Pi||Rt||Qa(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){O=l=a;try{if(g=O.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=O.stateNode;var se=O.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(W){at(O,O.return,W)}}}else if(a.tag===6){if(l===null){O=a;try{O.stateNode.nodeValue=m?"":O.memoizedProps}catch(W){at(O,O.return,W)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,cy(i,l))));break;case 19:Fn(a,i),Hn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,cy(i,c)));break;case 30:break;case 21:break;default:Fn(a,i),Hn(i)}}function Hn(i){var a=i.flags;if(a&2){try{for(var l,c=i.return;c!==null;){if(vT(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var m=l.stateNode,g=oy(i);hd(i,g,m);break;case 5:var T=l.stateNode;l.flags&32&&(nr(T,""),l.flags&=-33);var w=oy(i);hd(i,w,T);break;case 3:case 4:var O=l.stateNode.containerInfo,Q=oy(i);ly(i,Q,O);break;default:throw Error(r(161))}}catch(re){at(i,i.return,re)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function xT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;xT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function bs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)TT(i,a.alternate,a),a=a.sibling}function Qa(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:vs(4,a,a.return),Qa(a);break;case 1:$r(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&yT(a,a.return,l),Qa(a);break;case 27:Nc(a.stateNode);case 26:case 5:$r(a,a.return),Qa(a);break;case 22:a.memoizedState===null&&Qa(a);break;case 30:Qa(a);break;default:Qa(a)}i=i.sibling}}function Es(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=i,g=a,T=g.flags;switch(g.tag){case 0:case 11:case 15:Es(m,g,l),bc(4,g);break;case 1:if(Es(m,g,l),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){at(c,c.return,Q)}if(c=g,m=c.updateQueue,m!==null){var w=c.stateNode;try{var O=m.shared.hiddenCallbacks;if(O!==null)for(m.shared.hiddenCallbacks=null,m=0;m<O.length;m++)nE(O[m],w)}catch(Q){at(c,c.return,Q)}}l&&T&64&&gT(g),Ec(g,g.return);break;case 27:bT(g);case 26:case 5:Es(m,g,l),l&&c===null&&T&4&&_T(g),Ec(g,g.return);break;case 12:Es(m,g,l);break;case 13:Es(m,g,l),l&&T&4&&AT(m,g);break;case 22:g.memoizedState===null&&Es(m,g,l),Ec(g,g.return);break;case 30:break;default:Es(m,g,l)}a=a.sibling}}function hy(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&ac(l))}function fy(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ac(i))}function Kr(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)RT(i,a,l,c),a=a.sibling}function RT(i,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Kr(i,a,l,c),m&2048&&bc(9,a);break;case 1:Kr(i,a,l,c);break;case 3:Kr(i,a,l,c),m&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ac(i)));break;case 12:if(m&2048){Kr(i,a,l,c),i=a.stateNode;try{var g=a.memoizedProps,T=g.id,w=g.onPostCommit;typeof w=="function"&&w(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){at(a,a.return,O)}}else Kr(i,a,l,c);break;case 13:Kr(i,a,l,c);break;case 23:break;case 22:g=a.stateNode,T=a.alternate,a.memoizedState!==null?g._visibility&2?Kr(i,a,l,c):Tc(i,a):g._visibility&2?Kr(i,a,l,c):(g._visibility|=2,pl(i,a,l,c,(a.subtreeFlags&10256)!==0)),m&2048&&hy(T,a);break;case 24:Kr(i,a,l,c),m&2048&&fy(a.alternate,a);break;default:Kr(i,a,l,c)}}function pl(i,a,l,c,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,T=a,w=l,O=c,Q=T.flags;switch(T.tag){case 0:case 11:case 15:pl(g,T,w,O,m),bc(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?pl(g,T,w,O,m):Tc(g,T):(re._visibility|=2,pl(g,T,w,O,m)),m&&Q&2048&&hy(T.alternate,T);break;case 24:pl(g,T,w,O,m),m&&Q&2048&&fy(T.alternate,T);break;default:pl(g,T,w,O,m)}a=a.sibling}}function Tc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,m=c.flags;switch(c.tag){case 22:Tc(l,c),m&2048&&hy(c.alternate,c);break;case 24:Tc(l,c),m&2048&&fy(c.alternate,c);break;default:Tc(l,c)}a=a.sibling}}var wc=8192;function gl(i){if(i.subtreeFlags&wc)for(i=i.child;i!==null;)CT(i),i=i.sibling}function CT(i){switch(i.tag){case 26:gl(i),i.flags&wc&&i.memoizedState!==null&&KN(wr,i.memoizedState,i.memoizedProps);break;case 5:gl(i);break;case 3:case 4:var a=wr;wr=Sd(i.stateNode.containerInfo),gl(i),wr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=wc,wc=16777216,gl(i),wc=a):gl(i));break;default:gl(i)}}function NT(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Sc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Zt=c,OT(c,i)}NT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)DT(i),i=i.sibling}function DT(i){switch(i.tag){case 0:case 11:case 15:Sc(i),i.flags&2048&&vs(9,i,i.return);break;case 3:Sc(i);break;case 12:Sc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,fd(i)):Sc(i);break;default:Sc(i)}}function fd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Zt=c,OT(c,i)}NT(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:vs(8,a,a.return),fd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,fd(a));break;default:fd(a)}i=i.sibling}}function OT(i,a){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:vs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ac(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Zt=c;else e:for(l=i;Zt!==null;){c=Zt;var m=c.sibling,g=c.return;if(wT(c),c===l){Zt=null;break e}if(m!==null){m.return=g,Zt=m;break e}Zt=g}}}var uN={getCacheForType:function(i){var a=pn(Gt),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},cN=typeof WeakMap=="function"?WeakMap:Map,Je=0,ut=null,ke=null,qe=0,Ze=0,Gn=null,Ts=!1,yl=!1,dy=!1,Vi=0,St=0,ws=0,Ya=0,my=0,hr=0,_l=0,Ac=null,kn=null,py=!1,gy=0,dd=1/0,md=null,Ss=null,on=0,As=null,vl=null,bl=0,yy=0,_y=null,PT=null,Ic=0,vy=null;function $n(){if((Je&2)!==0&&qe!==0)return qe&-qe;if(ne.T!==null){var i=ol;return i!==0?i:Iy()}return as()}function kT(){hr===0&&(hr=(qe&536870912)===0||Qe?Vu():536870912);var i=cr.current;return i!==null&&(i.flags|=32),hr}function Kn(i,a,l){(i===ut&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(El(i,0),Is(i,qe,hr,!1)),di(i,l),((Je&2)===0||i!==ut)&&(i===ut&&((Je&2)===0&&(Ya|=l),St===4&&Is(i,qe,hr,!1)),Qr(i))}function VT(i,a,l){if((Je&6)!==0)throw Error(r(327));var c=!l&&(a&124)===0&&(a&i.expiredLanes)===0||Ea(i,a),m=c?dN(i,a):Ty(i,a,!0),g=c;do{if(m===0){yl&&!c&&Is(i,a,0,!1);break}else{if(l=i.current.alternate,g&&!hN(l)){m=Ty(i,a,!1),g=!1;continue}if(m===2){if(g=a,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var w=i;m=Ac;var O=w.current.memoizedState.isDehydrated;if(O&&(El(w,T).flags|=256),T=Ty(w,T,!1),T!==2){if(dy&&!O){w.errorRecoveryDisabledLanes|=g,Ya|=g,m=4;break e}g=kn,kn=m,g!==null&&(kn===null?kn=g:kn.push.apply(kn,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){El(i,0),Is(i,a,0,!0);break}e:{switch(c=i,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Is(c,a,hr,!Ts);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(m=gy+300-er(),10<m)){if(Is(c,a,hr,!Ts),Uo(c,0,!0)!==0)break e;c.timeoutHandle=cw(MT.bind(null,c,l,kn,md,py,a,hr,Ya,_l,Ts,g,2,-0,0),m);break e}MT(c,l,kn,md,py,a,hr,Ya,_l,Ts,g,0,-0,0)}}break}while(!0);Qr(i)}function MT(i,a,l,c,m,g,T,w,O,Q,re,se,Y,W){if(i.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Pc={stylesheets:null,count:0,unsuspend:$N},CT(a),se=QN(),se!==null)){i.cancelPendingCommit=se(FT.bind(null,i,a,g,l,c,m,T,w,O,re,1,Y,W)),Is(i,g,T,!Q);return}FT(i,a,g,l,c,m,T,w,O)}function hN(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],g=m.getSnapshot;m=m.value;try{if(!zn(g(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Is(i,a,l,c){a&=~my,a&=~Ya,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var m=a;0<m;){var g=31-mn(m),T=1<<g;c[g]=-1,m&=~T}l!==0&&Pr(i,l,a)}function pd(){return(Je&6)===0?(xc(0),!1):!0}function by(){if(ke!==null){if(Ze===0)var i=ke.return;else i=ke,xi=Fa=null,Lg(i),dl=null,yc=0,i=ke;for(;i!==null;)pT(i.alternate,i),i=i.return;ke=null}}function El(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,CN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),by(),ut=i,ke=l=Si(i.current,null),qe=a,Ze=0,Gn=null,Ts=!1,yl=Ea(i,a),dy=!1,_l=hr=my=Ya=ws=St=0,kn=Ac=null,py=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var m=31-mn(c),g=1<<m;a|=i[m],c&=~g}return Vi=a,Lf(),l}function LT(i,a){De=null,ne.H=nd,a===lc||a===$f?(a=eE(),Ze=3):a===Wb?(a=eE(),Ze=4):Ze=a===tT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Gn=a,ke===null&&(St=1,od(i,ar(a,i.current)))}function UT(){var i=ne.H;return ne.H=nd,i===null?nd:i}function jT(){var i=ne.A;return ne.A=uN,i}function Ey(){St=4,Ts||(qe&4194048)!==qe&&cr.current!==null||(yl=!0),(ws&134217727)===0&&(Ya&134217727)===0||ut===null||Is(ut,qe,hr,!1)}function Ty(i,a,l){var c=Je;Je|=2;var m=UT(),g=jT();(ut!==i||qe!==a)&&(md=null,El(i,a)),a=!1;var T=St;e:do try{if(Ze!==0&&ke!==null){var w=ke,O=Gn;switch(Ze){case 8:by(),T=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(a=!0);var Q=Ze;if(Ze=0,Gn=null,Tl(i,w,O,Q),l&&yl){T=0;break e}break;default:Q=Ze,Ze=0,Gn=null,Tl(i,w,O,Q)}}fN(),T=St;break}catch(re){LT(i,re)}while(!0);return a&&i.shellSuspendCounter++,xi=Fa=null,Je=c,ne.H=m,ne.A=g,ke===null&&(ut=null,qe=0,Lf()),T}function fN(){for(;ke!==null;)BT(ke)}function dN(i,a){var l=Je;Je|=2;var c=UT(),m=jT();ut!==i||qe!==a?(md=null,dd=er()+500,El(i,a)):yl=Ea(i,a);e:do try{if(Ze!==0&&ke!==null){a=ke;var g=Gn;t:switch(Ze){case 1:Ze=0,Gn=null,Tl(i,a,g,1);break;case 2:case 9:if(Jb(g)){Ze=0,Gn=null,zT(a);break}a=function(){Ze!==2&&Ze!==9||ut!==i||(Ze=7),Qr(i)},g.then(a,a);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Jb(g)?(Ze=0,Gn=null,zT(a)):(Ze=0,Gn=null,Tl(i,a,g,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var w=ke;if(!T||Tw(T)){Ze=0,Gn=null;var O=w.sibling;if(O!==null)ke=O;else{var Q=w.return;Q!==null?(ke=Q,gd(Q)):ke=null}break t}}Ze=0,Gn=null,Tl(i,a,g,5);break;case 6:Ze=0,Gn=null,Tl(i,a,g,6);break;case 8:by(),St=6;break e;default:throw Error(r(462))}}mN();break}catch(re){LT(i,re)}while(!0);return xi=Fa=null,ne.H=c,ne.A=m,Je=l,ke!==null?0:(ut=null,qe=0,Lf(),St)}function mN(){for(;ke!==null&&!Du();)BT(ke)}function BT(i){var a=dT(i.alternate,i,Vi);i.memoizedProps=i.pendingProps,a===null?gd(i):ke=a}function zT(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=oT(l,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=oT(l,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:Lg(a);default:pT(l,a),a=ke=qb(a,Vi),a=dT(l,a,Vi)}i.memoizedProps=i.pendingProps,a===null?gd(i):ke=a}function Tl(i,a,l,c){xi=Fa=null,Lg(a),dl=null,yc=0;var m=a.return;try{if(rN(i,m,a,l,qe)){St=1,od(i,ar(l,i.current)),ke=null;return}}catch(g){if(m!==null)throw ke=m,g;St=1,od(i,ar(l,i.current)),ke=null;return}a.flags&32768?(Qe||c===1?i=!0:yl||(qe&536870912)!==0?i=!1:(Ts=i=!0,(c===2||c===9||c===3||c===6)&&(c=cr.current,c!==null&&c.tag===13&&(c.flags|=16384))),qT(a,i)):gd(a)}function gd(i){var a=i;do{if((a.flags&32768)!==0){qT(a,Ts);return}i=a.return;var l=sN(a.alternate,a,Vi);if(l!==null){ke=l;return}if(a=a.sibling,a!==null){ke=a;return}ke=a=i}while(a!==null);St===0&&(St=5)}function qT(i,a){do{var l=aN(i.alternate,i);if(l!==null){l.flags&=32767,ke=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){ke=i;return}ke=i=l}while(i!==null);St=6,ke=null}function FT(i,a,l,c,m,g,T,w,O){i.cancelPendingCommit=null;do yd();while(on!==0);if((Je&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(g=a.lanes|a.childLanes,g|=fg,Lu(i,l,g,T,w,O),i===ut&&(ke=ut=null,qe=0),vl=a,As=i,bl=l,yy=g,_y=m,PT=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_N(ya,function(){return QT(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null,m=fe.p,fe.p=2,T=Je,Je|=4;try{oN(i,a,l)}finally{Je=T,fe.p=m,ne.T=c}}on=1,HT(),GT(),$T()}}function HT(){if(on===1){on=0;var i=As,a=vl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var c=fe.p;fe.p=2;var m=Je;Je|=4;try{IT(a,i);var g=ky,T=Ob(i.containerInfo),w=g.focusedElem,O=g.selectionRange;if(T!==w&&w&&w.ownerDocument&&Db(w.ownerDocument.documentElement,w)){if(O!==null&&og(w)){var Q=O.start,re=O.end;if(re===void 0&&(re=Q),"selectionStart"in w)w.selectionStart=Q,w.selectionEnd=Math.min(re,w.value.length);else{var se=w.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Ae=w.textContent.length,Te=Math.min(O.start,Ae),st=O.end===void 0?Te:Math.min(O.end,Ae);!W.extend&&Te>st&&(T=st,st=Te,Te=T);var H=Nb(w,Te),j=Nb(w,st);if(H&&j&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var K=se.createRange();K.setStart(H.node,H.offset),W.removeAllRanges(),Te>st?(W.addRange(K),W.extend(j.node,j.offset)):(K.setEnd(j.node,j.offset),W.addRange(K))}}}}for(se=[],W=w;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var ie=se[w];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Cd=!!Py,ky=Py=null}finally{Je=m,fe.p=c,ne.T=l}}i.current=a,on=2}}function GT(){if(on===2){on=0;var i=As,a=vl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var c=fe.p;fe.p=2;var m=Je;Je|=4;try{TT(i,a.alternate,a)}finally{Je=m,fe.p=c,ne.T=l}}on=3}}function $T(){if(on===4||on===3){on=0,ff();var i=As,a=vl,l=bl,c=PT;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?on=5:(on=0,vl=As=null,KT(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ss=null),jo(l),a=a.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Tt,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=ne.T,m=fe.p,fe.p=2,ne.T=null;try{for(var g=i.onRecoverableError,T=0;T<c.length;T++){var w=c[T];g(w.value,{componentStack:w.stack})}}finally{ne.T=a,fe.p=m}}(bl&3)!==0&&yd(),Qr(i),m=i.pendingLanes,(l&4194090)!==0&&(m&42)!==0?i===vy?Ic++:(Ic=0,vy=i):Ic=0,xc(0)}}function KT(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,ac(a)))}function yd(i){return HT(),GT(),$T(),QT()}function QT(){if(on!==5)return!1;var i=As,a=yy;yy=0;var l=jo(bl),c=ne.T,m=fe.p;try{fe.p=32>l?32:l,ne.T=null,l=_y,_y=null;var g=As,T=bl;if(on=0,vl=As=null,bl=0,(Je&6)!==0)throw Error(r(331));var w=Je;if(Je|=4,DT(g.current),RT(g,g.current,T,l),Je=w,xc(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Tt,g)}catch{}return!0}finally{fe.p=m,ne.T=c,KT(i,a)}}function YT(i,a,l){a=ar(l,a),a=Wg(i.stateNode,a,2),i=ps(i,a,2),i!==null&&(di(i,2),Qr(i))}function at(i,a,l){if(i.tag===3)YT(i,i,l);else for(;a!==null;){if(a.tag===3){YT(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ss===null||!Ss.has(c))){i=ar(l,i),l=ZE(2),c=ps(a,l,2),c!==null&&(eT(l,c,a,i),di(c,2),Qr(c));break}}a=a.return}}function wy(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new cN;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(dy=!0,m.add(l),i=pN.bind(null,i,a,l),a.then(i,i))}function pN(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,ut===i&&(qe&l)===l&&(St===4||St===3&&(qe&62914560)===qe&&300>er()-gy?(Je&2)===0&&El(i,0):my|=l,_l===qe&&(_l=0)),Qr(i)}function XT(i,a){a===0&&(a=Mu()),i=rl(i,a),i!==null&&(di(i,a),Qr(i))}function gN(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),XT(i,l)}function yN(i,a){var l=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),XT(i,l)}function _N(i,a){return pa(i,a)}var _d=null,wl=null,Sy=!1,vd=!1,Ay=!1,Xa=0;function Qr(i){i!==wl&&i.next===null&&(wl===null?_d=wl=i:wl=wl.next=i),vd=!0,Sy||(Sy=!0,bN())}function xc(i,a){if(!Ay&&vd){Ay=!0;do for(var l=!1,c=_d;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var T=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-mn(42|i)+1)-1,g&=m&~(T&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,ew(c,g))}else g=qe,g=Uo(c,c===ut?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ea(c,g)||(l=!0,ew(c,g));c=c.next}while(l);Ay=!1}}function vN(){WT()}function WT(){vd=Sy=!1;var i=0;Xa!==0&&(RN()&&(i=Xa),Xa=0);for(var a=er(),l=null,c=_d;c!==null;){var m=c.next,g=JT(c,a);g===0?(c.next=null,l===null?_d=m:l.next=m,m===null&&(wl=l)):(l=c,(i!==0||(g&3)!==0)&&(vd=!0)),c=m}xc(i)}function JT(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-mn(g),w=1<<T,O=m[T];O===-1?((w&l)===0||(w&c)!==0)&&(m[T]=ku(w,a)):O<=a&&(i.expiredLanes|=w),g&=~w}if(a=ut,l=qe,l=Uo(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===a&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&ga(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ea(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&ga(c),jo(l)){case 2:case 8:l=Mo;break;case 32:l=ya;break;case 268435456:l=Lo;break;default:l=ya}return c=ZT.bind(null,i),l=pa(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&ga(c),i.callbackPriority=2,i.callbackNode=null,2}function ZT(i,a){if(on!==0&&on!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(yd()&&i.callbackNode!==l)return null;var c=qe;return c=Uo(i,i===ut?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(VT(i,c,a),JT(i,er()),i.callbackNode!=null&&i.callbackNode===l?ZT.bind(null,i):null)}function ew(i,a){if(yd())return null;VT(i,a,!0)}function bN(){NN(function(){(Je&6)!==0?pa(Ou,vN):WT()})}function Iy(){return Xa===0&&(Xa=Vu()),Xa}function tw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Go(""+i)}function nw(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function EN(i,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var g=tw((m[Pt]||null).action),T=c.submitter;T&&(a=(a=T[Pt]||null)?tw(a.formAction):T.getAttribute("formAction"),a!==null&&(g=a,T=null));var w=new $o("action","action",null,c,m);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Xa!==0){var O=T?nw(m,T):new FormData(m);$g(l,{pending:!0,data:O,method:m.method,action:g},null,O)}}else typeof g=="function"&&(w.preventDefault(),O=T?nw(m,T):new FormData(m),$g(l,{pending:!0,data:O,method:m.method,action:g},g,O))},currentTarget:m}]})}}for(var xy=0;xy<hg.length;xy++){var Ry=hg[xy],TN=Ry.toLowerCase(),wN=Ry[0].toUpperCase()+Ry.slice(1);Tr(TN,"on"+wN)}Tr(Vb,"onAnimationEnd"),Tr(Mb,"onAnimationIteration"),Tr(Lb,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(BC,"onTransitionRun"),Tr(zC,"onTransitionStart"),Tr(qC,"onTransitionCancel"),Tr(Ub,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),br("onBeforeInput",["compositionend","keypress","textInput","paste"]),br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function rw(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],m=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var T=c.length-1;0<=T;T--){var w=c[T],O=w.instance,Q=w.currentTarget;if(w=w.listener,O!==g&&m.isPropagationStopped())break e;g=w,m.currentTarget=Q;try{g(m)}catch(re){ad(re)}m.currentTarget=null,g=O}else for(T=0;T<c.length;T++){if(w=c[T],O=w.instance,Q=w.currentTarget,w=w.listener,O!==g&&m.isPropagationStopped())break e;g=w,m.currentTarget=Q;try{g(m)}catch(re){ad(re)}m.currentTarget=null,g=O}}}}function Ve(i,a){var l=a[ju];l===void 0&&(l=a[ju]=new Set);var c=i+"__bubble";l.has(c)||(iw(a,i,2,!1),l.add(c))}function Cy(i,a,l){var c=0;a&&(c|=4),iw(l,i,c,a)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Ny(i){if(!i[bd]){i[bd]=!0,Bu.forEach(function(l){l!=="selectionchange"&&(SN.has(l)||Cy(l,!1,i),Cy(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[bd]||(a[bd]=!0,Cy("selectionchange",!1,a))}}function iw(i,a,l,c){switch(Rw(a)){case 2:var m=WN;break;case 8:m=JN;break;default:m=Hy}l=m.bind(null,a,l,i),m=void 0,!ir||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(a,l,{capture:!0,passive:m}):i.addEventListener(a,l,!0):m!==void 0?i.addEventListener(a,l,{passive:m}):i.addEventListener(a,l,!1)}function Dy(i,a,l,c,m){var g=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var w=c.stateNode.containerInfo;if(w===m)break;if(T===4)for(T=c.return;T!==null;){var O=T.tag;if((O===3||O===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;w!==null;){if(T=mi(w),T===null)return;if(O=T.tag,O===5||O===6||O===26||O===27){c=g=T;continue e}w=w.parentNode}}c=c.return}Tf(function(){var Q=g,re=rr(l),se=[];e:{var Y=jb.get(i);if(Y!==void 0){var W=$o,Ae=i;switch(i){case"keypress":if(jr(l)===0)break e;case"keydown":case"keyup":W=Jo;break;case"focusin":Ae="focus",W=Yo;break;case"focusout":Ae="blur",W=Yo;break;case"beforeblur":case"afterblur":W=Yo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=sr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Nf;break;case Vb:case Mb:case Lb:W=Xo;break;case Ub:W=Of;break;case"scroll":case"scrollend":W=wf;break;case"wheel":W=Zo;break;case"copy":case"cut":case"paste":W=Wo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Ju;break;case"toggle":case"beforetoggle":W=kf}var Te=(a&4)!==0,st=!Te&&(i==="scroll"||i==="scrollend"),H=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var j=Q,K;j!==null;){var ie=j;if(K=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||K===null||H===null||(ie=Ca(j,H),ie!=null&&Te.push(Cc(j,ie,K))),st)break;j=j.return}0<Te.length&&(Y=new W(Y,Ae,null,l,re),se.push({event:Y,listeners:Te}))}}if((a&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",Y&&l!==_i&&(Ae=l.relatedTarget||l.fromElement)&&(mi(Ae)||Ae[tr]))break e;if((W||Y)&&(Y=re.window===re?re:(Y=re.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Ae=l.relatedTarget||l.toElement,W=Q,Ae=Ae?mi(Ae):null,Ae!==null&&(st=o(Ae),Te=Ae.tag,Ae!==st||Te!==5&&Te!==27&&Te!==6)&&(Ae=null)):(W=null,Ae=Q),W!==Ae)){if(Te=sr,ie="onMouseLeave",H="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Ju,ie="onPointerLeave",H="onPointerEnter",j="pointer"),st=W==null?Y:Vr(W),K=Ae==null?Y:Vr(Ae),Y=new Te(ie,j+"leave",W,l,re),Y.target=st,Y.relatedTarget=K,ie=null,mi(re)===Q&&(Te=new Te(H,j+"enter",Ae,l,re),Te.target=K,Te.relatedTarget=st,ie=Te),st=ie,W&&Ae)t:{for(Te=W,H=Ae,j=0,K=Te;K;K=Sl(K))j++;for(K=0,ie=H;ie;ie=Sl(ie))K++;for(;0<j-K;)Te=Sl(Te),j--;for(;0<K-j;)H=Sl(H),K--;for(;j--;){if(Te===H||H!==null&&Te===H.alternate)break t;Te=Sl(Te),H=Sl(H)}Te=null}else Te=null;W!==null&&sw(se,Y,W,Te,!1),Ae!==null&&st!==null&&sw(se,st,Ae,Te,!0)}}e:{if(Y=Q?Vr(Q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var ge=Sb;else if(Ht(Y))if(Ab)ge=LC;else{ge=VC;var Pe=kC}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Q&&Gu(Q.elementType)&&(ge=Sb):ge=MC;if(ge&&(ge=ge(i,Q))){wi(se,ge,l,re);break e}Pe&&Pe(i,Y,Q),i==="focusout"&&Q&&Y.type==="number"&&Q.memoizedProps.value!=null&&cs(Y,"number",Y.value)}switch(Pe=Q?Vr(Q):window,i){case"focusin":(Ht(Pe)||Pe.contentEditable==="true")&&(el=Pe,lg=Q,tc=null);break;case"focusout":tc=lg=el=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,Pb(se,l,re);break;case"selectionchange":if(jC)break;case"keydown":case"keyup":Pb(se,l,re)}var be;if(qr)e:{switch(i){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Be?Z(i,l)&&(we="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(b&&l.locale!=="ko"&&(Be||we!=="onCompositionStart"?we==="onCompositionEnd"&&Be&&(be=Ku()):(Ur=re,hs="value"in Ur?Ur.value:Ur.textContent,Be=!0)),Pe=Ed(Q,we),0<Pe.length&&(we=new Xu(we,i,null,l,re),se.push({event:we,listeners:Pe}),be?we.data=be:(be=ce(l),be!==null&&(we.data=be)))),(be=_?Ft(i,l):ze(i,l))&&(we=Ed(Q,"onBeforeInput"),0<we.length&&(Pe=new Xu("onBeforeInput","beforeinput",null,l,re),se.push({event:Pe,listeners:we}),Pe.data=be)),EN(se,i,Q,l,re)}rw(se,a)})}function Cc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Ed(i,a){for(var l=a+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Ca(i,l),m!=null&&c.unshift(Cc(i,m,g)),m=Ca(i,a),m!=null&&c.push(Cc(i,m,g))),i.tag===3)return c;i=i.return}return[]}function Sl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function sw(i,a,l,c,m){for(var g=a._reactName,T=[];l!==null&&l!==c;){var w=l,O=w.alternate,Q=w.stateNode;if(w=w.tag,O!==null&&O===c)break;w!==5&&w!==26&&w!==27||Q===null||(O=Q,m?(Q=Ca(l,g),Q!=null&&T.unshift(Cc(l,Q,O))):m||(Q=Ca(l,g),Q!=null&&T.push(Cc(l,Q,O)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var AN=/\r\n?/g,IN=/\u0000|\uFFFD/g;function aw(i){return(typeof i=="string"?i:""+i).replace(AN,`
`).replace(IN,"")}function ow(i,a){return a=aw(a),aw(i)===a}function Td(){}function it(i,a,l,c,m,g){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||nr(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&nr(i,""+c);break;case"className":Mr(i,"class",c);break;case"tabIndex":Mr(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(i,l,c);break;case"style":Hu(i,c,g);break;case"data":if(a!=="object"){Mr(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Go(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&it(i,a,"name",m.name,m,null),it(i,a,"formEncType",m.formEncType,m,null),it(i,a,"formMethod",m.formMethod,m,null),it(i,a,"formTarget",m.formTarget,m,null)):(it(i,a,"encType",m.encType,m,null),it(i,a,"method",m.method,m,null),it(i,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Go(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Td);break;case"onScroll":c!=null&&Ve("scroll",i);break;case"onScrollEnd":c!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Go(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),us(i,"popover",c);break;case"xlinkActuate":rn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":rn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":rn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":rn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":rn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":rn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":rn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":rn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":rn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":us(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=tg.get(l)||l,us(i,l,c))}}function Oy(i,a,l,c,m,g){switch(l){case"style":Hu(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?nr(i,c):(typeof c=="number"||typeof c=="bigint")&&nr(i,""+c);break;case"onScroll":c!=null&&Ve("scroll",i);break;case"onScrollEnd":c!=null&&Ve("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),g=i[Pt]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(a,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,m);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):us(i,l,c)}}}function ln(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var c=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:it(i,a,g,T,l,null)}}m&&it(i,a,"srcSet",l.srcSet,l,null),c&&it(i,a,"src",l.src,l,null);return;case"input":Ve("invalid",i);var w=g=T=m=null,O=null,Q=null;for(c in l)if(l.hasOwnProperty(c)){var re=l[c];if(re!=null)switch(c){case"name":m=re;break;case"type":T=re;break;case"checked":O=re;break;case"defaultChecked":Q=re;break;case"value":g=re;break;case"defaultValue":w=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,a));break;default:it(i,a,c,re,l,null)}}Ia(i,g,w,O,Q,T,m,!1),Ho(i);return;case"select":Ve("invalid",i),c=T=g=null;for(m in l)if(l.hasOwnProperty(m)&&(w=l[m],w!=null))switch(m){case"value":g=w;break;case"defaultValue":T=w;break;case"multiple":c=w;default:it(i,a,m,w,l,null)}a=g,l=T,i.multiple=!!c,a!=null?yi(i,!!c,a,!1):l!=null&&yi(i,!!c,l,!0);return;case"textarea":Ve("invalid",i),g=m=c=null;for(T in l)if(l.hasOwnProperty(T)&&(w=l[T],w!=null))switch(T){case"value":c=w;break;case"defaultValue":m=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:it(i,a,T,w,l,null)}xa(i,c,m,g),Ho(i);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(c=l[O],c!=null))switch(O){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(i,a,O,c,l,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(c=0;c<Rc.length;c++)Ve(Rc[c],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(c=l[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:it(i,a,Q,c,l,null)}return;default:if(Gu(a)){for(re in l)l.hasOwnProperty(re)&&(c=l[re],c!==void 0&&Oy(i,a,re,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&it(i,a,w,c,l,null))}function xN(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,w=null,O=null,Q=null,re=null;for(W in l){var se=l[W];if(l.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=se;default:c.hasOwnProperty(W)||it(i,a,W,null,c,se)}}for(var Y in c){var W=c[Y];if(se=l[Y],c.hasOwnProperty(Y)&&(W!=null||se!=null))switch(Y){case"type":g=W;break;case"name":m=W;break;case"checked":Q=W;break;case"defaultChecked":re=W;break;case"value":T=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:W!==se&&it(i,a,Y,W,c,se)}}Bn(i,T,w,O,Q,re,g,m);return;case"select":W=T=w=Y=null;for(g in l)if(O=l[g],l.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":W=O;default:c.hasOwnProperty(g)||it(i,a,g,null,c,O)}for(m in c)if(g=c[m],O=l[m],c.hasOwnProperty(m)&&(g!=null||O!=null))switch(m){case"value":Y=g;break;case"defaultValue":w=g;break;case"multiple":T=g;default:g!==O&&it(i,a,m,g,c,O)}a=w,l=T,c=W,Y!=null?yi(i,!!l,Y,!1):!!c!=!!l&&(a!=null?yi(i,!!l,a,!0):yi(i,!!l,l?[]:"",!1));return;case"textarea":W=Y=null;for(w in l)if(m=l[w],l.hasOwnProperty(w)&&m!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:it(i,a,w,null,c,m)}for(T in c)if(m=c[T],g=l[T],c.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":Y=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&it(i,a,T,m,c,g)}nt(i,Y,W);return;case"option":for(var Ae in l)if(Y=l[Ae],l.hasOwnProperty(Ae)&&Y!=null&&!c.hasOwnProperty(Ae))switch(Ae){case"selected":i.selected=!1;break;default:it(i,a,Ae,null,c,Y)}for(O in c)if(Y=c[O],W=l[O],c.hasOwnProperty(O)&&Y!==W&&(Y!=null||W!=null))switch(O){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:it(i,a,O,Y,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in l)Y=l[Te],l.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&it(i,a,Te,null,c,Y);for(Q in c)if(Y=c[Q],W=l[Q],c.hasOwnProperty(Q)&&Y!==W&&(Y!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,a));break;default:it(i,a,Q,Y,c,W)}return;default:if(Gu(a)){for(var st in l)Y=l[st],l.hasOwnProperty(st)&&Y!==void 0&&!c.hasOwnProperty(st)&&Oy(i,a,st,void 0,c,Y);for(re in c)Y=c[re],W=l[re],!c.hasOwnProperty(re)||Y===W||Y===void 0&&W===void 0||Oy(i,a,re,Y,c,W);return}}for(var H in l)Y=l[H],l.hasOwnProperty(H)&&Y!=null&&!c.hasOwnProperty(H)&&it(i,a,H,null,c,Y);for(se in c)Y=c[se],W=l[se],!c.hasOwnProperty(se)||Y===W||Y==null&&W==null||it(i,a,se,Y,c,W)}var Py=null,ky=null;function wd(i){return i.nodeType===9?i:i.ownerDocument}function lw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uw(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Vy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var My=null;function RN(){var i=window.event;return i&&i.type==="popstate"?i===My?!1:(My=i,!0):(My=null,!1)}var cw=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,NN=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(i){return hw.resolve(null).then(i).catch(DN)}:cw;function DN(i){setTimeout(function(){throw i})}function xs(i){return i==="head"}function fw(i,a){var l=a,c=0,m=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<c&&8>c){l=c;var T=i.ownerDocument;if(l&1&&Nc(T.documentElement),l&2&&Nc(T.body),l&4)for(l=T.head,Nc(l),T=l.firstChild;T;){var w=T.nextSibling,O=T.nodeName;T[Ta]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=w}}if(m===0){i.removeChild(g),Uc(a);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:c=l.charCodeAt(0)-48;else c=0;l=g}while(l);Uc(a)}function Ly(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ly(l),ls(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function ON(i,a,l,c){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ta])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Sr(i.nextSibling),i===null)break}return null}function PN(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Sr(i.nextSibling),i===null))return null;return i}function Uy(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function kN(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Sr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var jy=null;function dw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function mw(i,a,l){switch(a=wd(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Nc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);ls(i)}var fr=new Map,pw=new Set;function Sd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Mi=fe.d;fe.d={f:VN,r:MN,D:LN,C:UN,L:jN,m:BN,X:qN,S:zN,M:FN};function VN(){var i=Mi.f(),a=pd();return i||a}function MN(i){var a=kr(i);a!==null&&a.tag===5&&a.type==="form"?VE(a):Mi.r(i)}var Al=typeof document>"u"?null:document;function gw(i,a,l){var c=Al;if(c&&typeof a=="string"&&a){var m=kt(a);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),pw.has(m)||(pw.add(m),i={rel:i,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),ln(a,"link",i),It(a),c.head.appendChild(a)))}}function LN(i){Mi.D(i),gw("dns-prefetch",i,null)}function UN(i,a){Mi.C(i,a),gw("preconnect",i,a)}function jN(i,a,l){Mi.L(i,a,l);var c=Al;if(c&&i&&a){var m='link[rel="preload"][as="'+kt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+kt(l.imageSizes)+'"]')):m+='[href="'+kt(i)+'"]';var g=m;switch(a){case"style":g=Il(i);break;case"script":g=xl(i)}fr.has(g)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),fr.set(g,i),c.querySelector(m)!==null||a==="style"&&c.querySelector(Dc(g))||a==="script"&&c.querySelector(Oc(g))||(a=c.createElement("link"),ln(a,"link",i),It(a),c.head.appendChild(a)))}}function BN(i,a){Mi.m(i,a);var l=Al;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+kt(c)+'"][href="'+kt(i)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xl(i)}if(!fr.has(g)&&(i=y({rel:"modulepreload",href:i},a),fr.set(g,i),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Oc(g)))return}c=l.createElement("link"),ln(c,"link",i),It(c),l.head.appendChild(c)}}}function zN(i,a,l){Mi.S(i,a,l);var c=Al;if(c&&i){var m=Tn(c).hoistableStyles,g=Il(i);a=a||"default";var T=m.get(g);if(!T){var w={loading:0,preload:null};if(T=c.querySelector(Dc(g)))w.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=fr.get(g))&&By(i,l);var O=T=c.createElement("link");It(O),ln(O,"link",i),O._p=new Promise(function(Q,re){O.onload=Q,O.onerror=re}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ad(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:w},m.set(g,T)}}}function qN(i,a){Mi.X(i,a);var l=Al;if(l&&i){var c=Tn(l).hoistableScripts,m=xl(i),g=c.get(m);g||(g=l.querySelector(Oc(m)),g||(i=y({src:i,async:!0},a),(a=fr.get(m))&&zy(i,a),g=l.createElement("script"),It(g),ln(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function FN(i,a){Mi.M(i,a);var l=Al;if(l&&i){var c=Tn(l).hoistableScripts,m=xl(i),g=c.get(m);g||(g=l.querySelector(Oc(m)),g||(i=y({src:i,async:!0,type:"module"},a),(a=fr.get(m))&&zy(i,a),g=l.createElement("script"),It(g),ln(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function yw(i,a,l,c){var m=(m=xe.current)?Sd(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Il(l.href),l=Tn(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Il(l.href);var g=Tn(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(Dc(i)))&&!g._p&&(T.instance=g,T.state.loading=5),fr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fr.set(i,l),g||HN(m,i,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=xl(l),l=Tn(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Il(i){return'href="'+kt(i)+'"'}function Dc(i){return'link[rel="stylesheet"]['+i+"]"}function _w(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function HN(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),ln(a,"link",l),It(a),i.head.appendChild(a))}function xl(i){return'[src="'+kt(i)+'"]'}function Oc(i){return"script[async]"+i}function vw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+kt(l.href)+'"]');if(c)return a.instance=c,It(c),c;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),It(c),ln(c,"style",m),Ad(c,l.precedence,i),a.instance=c;case"stylesheet":m=Il(l.href);var g=i.querySelector(Dc(m));if(g)return a.state.loading|=4,a.instance=g,It(g),g;c=_w(l),(m=fr.get(m))&&By(c,m),g=(i.ownerDocument||i).createElement("link"),It(g);var T=g;return T._p=new Promise(function(w,O){T.onload=w,T.onerror=O}),ln(g,"link",c),a.state.loading|=4,Ad(g,l.precedence,i),a.instance=g;case"script":return g=xl(l.src),(m=i.querySelector(Oc(g)))?(a.instance=m,It(m),m):(c=l,(m=fr.get(g))&&(c=y({},l),zy(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),It(m),ln(m,"link",c),i.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Ad(c,l.precedence,i));return a.instance}function Ad(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,T=0;T<c.length;T++){var w=c[T];if(w.dataset.precedence===a)g=w;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function By(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function zy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Id=null;function bw(i,a,l){if(Id===null){var c=new Map,m=Id=new Map;m.set(l,c)}else m=Id,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var g=l[m];if(!(g[Ta]||g[qt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(a)||"";T=i+T;var w=c.get(T);w?w.push(g):c.set(T,[g])}}return c}function Ew(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function GN(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Tw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Pc=null;function $N(){}function KN(i,a,l){if(Pc===null)throw Error(r(475));var c=Pc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Il(l.href),g=i.querySelector(Dc(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=xd.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=g,It(g);return}g=i.ownerDocument||i,l=_w(l),(m=fr.get(m))&&By(l,m),g=g.createElement("link"),It(g);var T=g;T._p=new Promise(function(w,O){T.onload=w,T.onerror=O}),ln(g,"link",l),a.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=xd.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function QN(){if(Pc===null)throw Error(r(475));var i=Pc;return i.stylesheets&&i.count===0&&qy(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&qy(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function xd(){if(this.count--,this.count===0){if(this.stylesheets)qy(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rd=null;function qy(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rd=new Map,a.forEach(YN,i),Rd=null,xd.call(i))}function YN(i,a){if(!(a.state.loading&4)){var l=Rd.get(i);if(l)var c=l.get(null);else{l=new Map,Rd.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}m=a.instance,T=m.getAttribute("data-precedence"),g=l.get(T)||c,g===c&&l.set(null,m),l.set(T,m),this.count++,c=xd.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),a.state.loading|=4}}var kc={$$typeof:B,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function XN(i,a,l,c,m,g,T,w){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function ww(i,a,l,c,m,g,T,w,O,Q,re,se){return i=new XN(i,a,l,T,w,O,Q,se),a=1,g===!0&&(a|=24),g=qn(3,null,null,a),i.current=g,g.stateNode=i,a=wg(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:a},xg(g),i}function Sw(i){return i?(i=il,i):il}function Aw(i,a,l,c,m,g){m=Sw(m),c.context===null?c.context=m:c.pendingContext=m,c=ms(a),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=ps(i,c,a),l!==null&&(Kn(l,i,a),cc(l,i,a))}function Iw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Fy(i,a){Iw(i,a),(i=i.alternate)&&Iw(i,a)}function xw(i){if(i.tag===13){var a=rl(i,67108864);a!==null&&Kn(a,i,67108864),Fy(i,67108864)}}var Cd=!0;function WN(i,a,l,c){var m=ne.T;ne.T=null;var g=fe.p;try{fe.p=2,Hy(i,a,l,c)}finally{fe.p=g,ne.T=m}}function JN(i,a,l,c){var m=ne.T;ne.T=null;var g=fe.p;try{fe.p=8,Hy(i,a,l,c)}finally{fe.p=g,ne.T=m}}function Hy(i,a,l,c){if(Cd){var m=Gy(c);if(m===null)Dy(i,a,c,Nd,l),Cw(i,c);else if(eD(m,i,a,l,c))c.stopPropagation();else if(Cw(i,c),a&4&&-1<ZN.indexOf(i)){for(;m!==null;){var g=kr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=vr(g.pendingLanes);if(T!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var O=1<<31-mn(T);w.entanglements[1]|=O,T&=~O}Qr(g),(Je&6)===0&&(dd=er()+500,xc(0))}}break;case 13:w=rl(g,2),w!==null&&Kn(w,g,2),pd(),Fy(g,2)}if(g=Gy(c),g===null&&Dy(i,a,c,Nd,l),g===m)break;m=g}m!==null&&c.stopPropagation()}else Dy(i,a,c,null,l)}}function Gy(i){return i=rr(i),$y(i)}var Nd=null;function $y(i){if(Nd=null,i=mi(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Nd=i,null}function Rw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yp()){case Ou:return 2;case Mo:return 8;case ya:case Xp:return 32;case Lo:return 268435456;default:return 32}default:return 32}}var Ky=!1,Rs=null,Cs=null,Ns=null,Vc=new Map,Mc=new Map,Ds=[],ZN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cw(i,a){switch(i){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Vc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(a.pointerId)}}function Lc(i,a,l,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},a!==null&&(a=kr(a),a!==null&&xw(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function eD(i,a,l,c,m){switch(a){case"focusin":return Rs=Lc(Rs,i,a,l,c,m),!0;case"dragenter":return Cs=Lc(Cs,i,a,l,c,m),!0;case"mouseover":return Ns=Lc(Ns,i,a,l,c,m),!0;case"pointerover":var g=m.pointerId;return Vc.set(g,Lc(Vc.get(g)||null,i,a,l,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Mc.set(g,Lc(Mc.get(g)||null,i,a,l,c,m)),!0}return!1}function Nw(i){var a=mi(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,pf(i.priority,function(){if(l.tag===13){var c=$n();c=ss(c);var m=rl(l,c);m!==null&&Kn(m,l,c),Fy(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Dd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Gy(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);_i=c,l.target.dispatchEvent(c),_i=null}else return a=kr(l),a!==null&&xw(a),i.blockedOn=l,!1;a.shift()}return!0}function Dw(i,a,l){Dd(i)&&l.delete(a)}function tD(){Ky=!1,Rs!==null&&Dd(Rs)&&(Rs=null),Cs!==null&&Dd(Cs)&&(Cs=null),Ns!==null&&Dd(Ns)&&(Ns=null),Vc.forEach(Dw),Mc.forEach(Dw)}function Od(i,a){i.blockedOn===a&&(i.blockedOn=null,Ky||(Ky=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tD)))}var Pd=null;function Ow(i){Pd!==i&&(Pd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pd===i&&(Pd=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],m=i[a+2];if(typeof c!="function"){if($y(c||l)===null)continue;break}var g=kr(l);g!==null&&(i.splice(a,3),a-=3,$g(g,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function Uc(i){function a(O){return Od(O,i)}Rs!==null&&Od(Rs,i),Cs!==null&&Od(Cs,i),Ns!==null&&Od(Ns,i),Vc.forEach(a),Mc.forEach(a);for(var l=0;l<Ds.length;l++){var c=Ds[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Ds.length&&(l=Ds[0],l.blockedOn===null);)Nw(l),l.blockedOn===null&&Ds.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],g=l[c+1],T=m[Pt]||null;if(typeof g=="function")T||Ow(l);else if(T){var w=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Pt]||null)w=T.formAction;else if($y(m)!==null)continue}else w=T.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),Ow(l)}}}function Qy(i){this._internalRoot=i}kd.prototype.render=Qy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=$n();Aw(l,c,i,a,null,null)},kd.prototype.unmount=Qy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Aw(i.current,2,null,i,null,null),pd(),a[tr]=null}};function kd(i){this._internalRoot=i}kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=as();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Ds.length&&a!==0&&a<Ds[l].priority;l++);Ds.splice(l,0,i),l===0&&Nw(i)}};var Pw=e.version;if(Pw!=="19.1.0")throw Error(r(527,Pw,"19.1.0"));fe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var nD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{Tt=Vd.inject(nD),We=Vd}catch{}}return Bc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",m=YE,g=XE,T=WE,w=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks)),a=ww(i,1,!1,null,null,l,c,m,g,T,w,null),i[tr]=a.current,Ny(i),new Qy(a)},Bc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,m="",g=YE,T=XE,w=WE,O=null,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks),l.formState!==void 0&&(Q=l.formState)),a=ww(i,1,!0,a,l??null,c,m,g,T,w,O,Q),a.context=Sw(null),l=a.current,c=$n(),c=ss(c),m=ms(c),m.callback=null,ps(l,m,c),l=c,a.current.lanes=l,di(a,l),Qr(a),i[tr]=a.current,Ny(i),new kd(a)},Bc.version="19.1.0",Bc}var Fw;function fD(){if(Fw)return Wy.exports;Fw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wy.exports=hD(),Wy.exports}var dD=fD();function OA(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=OA(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function fo(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=OA(n))&&(r&&(r+=" "),r+=e);return r}function mD(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}mD(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Lh=n=>typeof n=="number"&&!isNaN(n),go=n=>typeof n=="string",Hi=n=>typeof n=="function",pD=n=>go(n)||Lh(n),x_=n=>go(n)||Hi(n)?n:null,gD=(n,e)=>n===!1||Lh(n)&&n>0?n:e,R_=n=>z.isValidElement(n)||go(n)||Hi(n)||Lh(n);function yD(n,e,t=300){let{scrollHeight:r,style:s}=n;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function _D({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:o,position:u,preventExitTransition:h,done:d,nodeRef:p,isIn:y,playToast:v}){let E=t?`${n}--${u}`:n,A=t?`${e}--${u}`:e,R=z.useRef(0);return z.useLayoutEffect(()=>{let P=p.current,D=E.split(" "),V=F=>{F.target===p.current&&(v(),P.removeEventListener("animationend",V),P.removeEventListener("animationcancel",V),R.current===0&&F.type!=="animationcancel"&&P.classList.remove(...D))};P.classList.add(...D),P.addEventListener("animationend",V),P.addEventListener("animationcancel",V)},[]),z.useEffect(()=>{let P=p.current,D=()=>{P.removeEventListener("animationend",D),r?yD(P,d,s):d()};y||(h?D():(R.current=1,P.className+=` ${A}`,P.addEventListener("animationend",D)))},[y]),Ge.createElement(Ge.Fragment,null,o)}}function Hw(n,e){return{content:PA(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function PA(n,e,t=!1){return z.isValidElement(n)&&!go(n.type)?z.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):Hi(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function vD({closeToast:n,theme:e,ariaLabel:t="close"}){return Ge.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},Ge.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ge.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function bD({delay:n,isRunning:e,closeToast:t,type:r="default",hide:s,className:o,controlledProgress:u,progress:h,rtl:d,isIn:p,theme:y}){let v=s||u&&h===0,E={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};u&&(E.transform=`scaleX(${h})`);let A=fo("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":d}),R=Hi(o)?o({rtl:d,type:r,defaultClassName:A}):fo(A,o),P={[u&&h>=1?"onTransitionEnd":"onAnimationEnd"]:u&&h<1?null:()=>{p&&t()}};return Ge.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":v},Ge.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${y} Toastify__progress-bar--${r}`}),Ge.createElement("div",{role:"progressbar","aria-hidden":v?"true":"false","aria-label":"notification timer",className:R,style:E,...P}))}var ED=1,kA=()=>`${ED++}`;function TD(n,e,t){let r=1,s=0,o=[],u=[],h=e,d=new Map,p=new Set,y=F=>(p.add(F),()=>p.delete(F)),v=()=>{u=Array.from(d.values()),p.forEach(F=>F())},E=({containerId:F,toastId:B,updateId:X})=>{let ee=F?F!==n:n!==1,te=d.has(B)&&X==null;return ee||te},A=(F,B)=>{d.forEach(X=>{var ee;(B==null||B===X.props.toastId)&&((ee=X.toggle)==null||ee.call(X,F))})},R=F=>{var B,X;(X=(B=F.props)==null?void 0:B.onClose)==null||X.call(B,F.removalReason),F.isActive=!1},P=F=>{if(F==null)d.forEach(R);else{let B=d.get(F);B&&R(B)}v()},D=()=>{s-=o.length,o=[]},V=F=>{var B,X;let{toastId:ee,updateId:te}=F.props,C=te==null;F.staleId&&d.delete(F.staleId),F.isActive=!0,d.set(ee,F),v(),t(Hw(F,C?"added":"updated")),C&&((X=(B=F.props).onOpen)==null||X.call(B))};return{id:n,props:h,observe:y,toggle:A,removeToast:P,toasts:d,clearQueue:D,buildToast:(F,B)=>{if(E(B))return;let{toastId:X,updateId:ee,data:te,staleId:C,delay:x}=B,N=ee==null;N&&s++;let M={...h,style:h.toastStyle,key:r++,...Object.fromEntries(Object.entries(B).filter(([q,k])=>k!=null)),toastId:X,updateId:ee,data:te,isIn:!1,className:x_(B.className||h.toastClassName),progressClassName:x_(B.progressClassName||h.progressClassName),autoClose:B.isLoading?!1:gD(B.autoClose,h.autoClose),closeToast(q){d.get(X).removalReason=q,P(X)},deleteToast(){let q=d.get(X);if(q!=null){if(t(Hw(q,"removed")),d.delete(X),s--,s<0&&(s=0),o.length>0){V(o.shift());return}v()}}};M.closeButton=h.closeButton,B.closeButton===!1||R_(B.closeButton)?M.closeButton=B.closeButton:B.closeButton===!0&&(M.closeButton=R_(h.closeButton)?h.closeButton:!0);let U={content:F,props:M,staleId:C};h.limit&&h.limit>0&&s>h.limit&&N?o.push(U):Lh(x)?setTimeout(()=>{V(U)},x):V(U)},setProps(F){h=F},setToggle:(F,B)=>{let X=d.get(F);X&&(X.toggle=B)},isToastActive:F=>{var B;return(B=d.get(F))==null?void 0:B.isActive},getSnapshot:()=>u}}var Cn=new Map,mh=[],C_=new Set,wD=n=>C_.forEach(e=>e(n)),VA=()=>Cn.size>0;function SD(){mh.forEach(n=>LA(n.content,n.options)),mh=[]}var AD=(n,{containerId:e})=>{var t;return(t=Cn.get(e||1))==null?void 0:t.toasts.get(n)};function MA(n,e){var t;if(e)return!!((t=Cn.get(e))!=null&&t.isToastActive(n));let r=!1;return Cn.forEach(s=>{s.isToastActive(n)&&(r=!0)}),r}function ID(n){if(!VA()){mh=mh.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||pD(n))Cn.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Cn.get(n.containerId);e?e.removeToast(n.id):Cn.forEach(t=>{t.removeToast(n.id)})}}var xD=(n={})=>{Cn.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function LA(n,e){R_(n)&&(VA()||mh.push({content:n,options:e}),Cn.forEach(t=>{t.buildToast(n,e)}))}function RD(n){var e;(e=Cn.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function UA(n,e){Cn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function CD(n){let e=n.containerId||1;return{subscribe(t){let r=TD(e,n,wD);Cn.set(e,r);let s=r.observe(t);return SD(),()=>{s(),Cn.delete(e)}},setProps(t){var r;(r=Cn.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Cn.get(e))==null?void 0:t.getSnapshot()}}}function ND(n){return C_.add(n),()=>{C_.delete(n)}}function DD(n){return n&&(go(n.toastId)||Lh(n.toastId))?n.toastId:kA()}function Uh(n,e){return LA(n,e),e.toastId}function sp(n,e){return{...e,type:e&&e.type||n,toastId:DD(e)}}function ap(n){return(e,t)=>Uh(e,sp(n,t))}function Ne(n,e){return Uh(n,sp("default",e))}Ne.loading=(n,e)=>Uh(n,sp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function OD(n,{pending:e,error:t,success:r},s){let o;e&&(o=go(e)?Ne.loading(e,s):Ne.loading(e.render,{...s,...e}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(p,y,v)=>{if(y==null){Ne.dismiss(o);return}let E={type:p,...u,...s,data:v},A=go(y)?{render:y}:y;return o?Ne.update(o,{...E,...A}):Ne(A.render,{...E,...A}),v},d=Hi(n)?n():n;return d.then(p=>h("success",r,p)).catch(p=>h("error",t,p)),d}Ne.promise=OD;Ne.success=ap("success");Ne.info=ap("info");Ne.error=ap("error");Ne.warning=ap("warning");Ne.warn=Ne.warning;Ne.dark=(n,e)=>Uh(n,sp("default",{theme:"dark",...e}));function PD(n){ID(n)}Ne.dismiss=PD;Ne.clearWaitingQueue=xD;Ne.isActive=MA;Ne.update=(n,e={})=>{let t=AD(n,e);if(t){let{props:r,content:s}=t,o={delay:100,...r,...e,toastId:e.toastId||n,updateId:kA()};o.toastId!==n&&(o.staleId=n);let u=o.render||s;delete o.render,Uh(u,o)}};Ne.done=n=>{Ne.update(n,{progress:1})};Ne.onChange=ND;Ne.play=n=>UA(!0,n);Ne.pause=n=>UA(!1,n);function kD(n){var e;let{subscribe:t,getSnapshot:r,setProps:s}=z.useRef(CD(n)).current;s(n);let o=(e=z.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function u(h){if(!o)return[];let d=new Map;return n.newestOnTop&&o.reverse(),o.forEach(p=>{let{position:y}=p.props;d.has(y)||d.set(y,[]),d.get(y).push(p)}),Array.from(d,p=>h(p[0],p[1]))}return{getToastToRender:u,isToastActive:MA,count:o?.length}}function VD(n){let[e,t]=z.useState(!1),[r,s]=z.useState(!1),o=z.useRef(null),u=z.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:d,closeToast:p,onClick:y,closeOnClick:v}=n;RD({id:n.toastId,containerId:n.containerId,fn:t}),z.useEffect(()=>{if(n.pauseOnFocusLoss)return E(),()=>{A()}},[n.pauseOnFocusLoss]);function E(){document.hasFocus()||V(),window.addEventListener("focus",D),window.addEventListener("blur",V)}function A(){window.removeEventListener("focus",D),window.removeEventListener("blur",V)}function R(C){if(n.draggable===!0||n.draggable===C.pointerType){F();let x=o.current;u.canCloseOnClick=!0,u.canDrag=!0,x.style.transition="none",n.draggableDirection==="x"?(u.start=C.clientX,u.removalDistance=x.offsetWidth*(n.draggablePercent/100)):(u.start=C.clientY,u.removalDistance=x.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function P(C){let{top:x,bottom:N,left:M,right:U}=o.current.getBoundingClientRect();C.nativeEvent.type!=="touchend"&&n.pauseOnHover&&C.clientX>=M&&C.clientX<=U&&C.clientY>=x&&C.clientY<=N?V():D()}function D(){t(!0)}function V(){t(!1)}function F(){u.didMove=!1,document.addEventListener("pointermove",X),document.addEventListener("pointerup",ee)}function B(){document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",ee)}function X(C){let x=o.current;if(u.canDrag&&x){u.didMove=!0,e&&V(),n.draggableDirection==="x"?u.delta=C.clientX-u.start:u.delta=C.clientY-u.start,u.start!==C.clientX&&(u.canCloseOnClick=!1);let N=n.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`;x.style.transform=`translate3d(${N},0)`,x.style.opacity=`${1-Math.abs(u.delta/u.removalDistance)}`}}function ee(){B();let C=o.current;if(u.canDrag&&u.didMove&&C){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance){s(!0),n.closeToast(!0),n.collapseAll();return}C.style.transition="transform 0.2s, opacity 0.2s",C.style.removeProperty("transform"),C.style.removeProperty("opacity")}}let te={onPointerDown:R,onPointerUp:P};return h&&d&&(te.onMouseEnter=V,n.stacked||(te.onMouseLeave=D)),v&&(te.onClick=C=>{y&&y(C),u.canCloseOnClick&&p(!0)}),{playToast:D,pauseToast:V,isRunning:e,preventExitTransition:r,toastRef:o,eventHandlers:te}}var MD=typeof window<"u"?z.useLayoutEffect:z.useEffect,op=({theme:n,type:e,isLoading:t,...r})=>Ge.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function LD(n){return Ge.createElement(op,{...n},Ge.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function UD(n){return Ge.createElement(op,{...n},Ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function jD(n){return Ge.createElement(op,{...n},Ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function BD(n){return Ge.createElement(op,{...n},Ge.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function zD(){return Ge.createElement("div",{className:"Toastify__spinner"})}var N_={info:UD,warning:LD,success:jD,error:BD,spinner:zD},qD=n=>n in N_;function FD({theme:n,type:e,isLoading:t,icon:r}){let s=null,o={theme:n,type:e};return r===!1||(Hi(r)?s=r({...o,isLoading:t}):z.isValidElement(r)?s=z.cloneElement(r,o):t?s=N_.spinner():qD(e)&&(s=N_[e](o))),s}var HD=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:s,playToast:o}=VD(n),{closeButton:u,children:h,autoClose:d,onClick:p,type:y,hideProgressBar:v,closeToast:E,transition:A,position:R,className:P,style:D,progressClassName:V,updateId:F,role:B,progress:X,rtl:ee,toastId:te,deleteToast:C,isIn:x,isLoading:N,closeOnClick:M,theme:U,ariaLabel:q}=n,k=fo("Toastify__toast",`Toastify__toast-theme--${U}`,`Toastify__toast--${y}`,{"Toastify__toast--rtl":ee},{"Toastify__toast--close-on-click":M}),zt=Hi(P)?P({rtl:ee,position:R,type:y,defaultClassName:k}):fo(k,P),dt=FD(n),ne=!!X||!d,fe={closeToast:E,type:y,theme:U},_e=null;return u===!1||(Hi(u)?_e=u(fe):z.isValidElement(u)?_e=z.cloneElement(u,fe):_e=vD(fe)),Ge.createElement(A,{isIn:x,done:C,position:R,preventExitTransition:t,nodeRef:r,playToast:o},Ge.createElement("div",{id:te,tabIndex:0,onClick:p,"data-in":x,className:zt,...s,style:D,ref:r,...x&&{role:B,"aria-label":q}},dt!=null&&Ge.createElement("div",{className:fo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},dt),PA(h,n,!e),_e,!n.customProgressBar&&Ge.createElement(bD,{...F&&!ne?{key:`p-${F}`}:{},rtl:ee,theme:U,delay:d,isRunning:e,isIn:x,closeToast:E,hide:v,type:y,className:V,controlledProgress:ne,progress:X||0})))},GD=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),$D=_D(GD("bounce",!0)),KD={position:"top-right",transition:$D,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function QD(n){let e={...KD,...n},t=n.stacked,[r,s]=z.useState(!0),o=z.useRef(null),{getToastToRender:u,isToastActive:h,count:d}=kD(e),{className:p,style:y,rtl:v,containerId:E,hotKeys:A}=e;function R(D){let V=fo("Toastify__toast-container",`Toastify__toast-container--${D}`,{"Toastify__toast-container--rtl":v});return Hi(p)?p({position:D,rtl:v,defaultClassName:V}):fo(V,x_(p))}function P(){t&&(s(!0),Ne.play())}return MD(()=>{var D;if(t){let V=o.current.querySelectorAll('[data-in="true"]'),F=12,B=(D=e.position)==null?void 0:D.includes("top"),X=0,ee=0;Array.from(V).reverse().forEach((te,C)=>{let x=te;x.classList.add("Toastify__toast--stacked"),C>0&&(x.dataset.collapsed=`${r}`),x.dataset.pos||(x.dataset.pos=B?"top":"bot");let N=X*(r?.2:1)+(r?0:F*C);x.style.setProperty("--y",`${B?N:N*-1}px`),x.style.setProperty("--g",`${F}`),x.style.setProperty("--s",`${1-(r?ee:0)}`),X+=x.offsetHeight,ee+=.025})}},[r,d,t]),z.useEffect(()=>{function D(V){var F;let B=o.current;A(V)&&((F=B.querySelector('[tabIndex="0"]'))==null||F.focus(),s(!1),Ne.pause()),V.key==="Escape"&&(document.activeElement===B||B!=null&&B.contains(document.activeElement))&&(s(!0),Ne.play())}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[A]),Ge.createElement("section",{ref:o,className:"Toastify",id:E,onMouseEnter:()=>{t&&(s(!1),Ne.pause())},onMouseLeave:P,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},u((D,V)=>{let F=V.length?{...y}:{...y,pointerEvents:"none"};return Ge.createElement("div",{tabIndex:-1,className:R(D),"data-stacked":t,style:F,key:`c-${D}`},V.map(({content:B,props:X})=>Ge.createElement(HD,{...X,stacked:t,collapseAll:P,isIn:h(X.toastId,X.containerId),key:`t-${X.key}`},B)))}))}var t_={exports:{}},n_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function YD(){if(Gw)return n_;Gw=1;var n=ip();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,s=n.useRef,o=n.useEffect,u=n.useMemo,h=n.useDebugValue;return n_.useSyncExternalStoreWithSelector=function(d,p,y,v,E){var A=s(null);if(A.current===null){var R={hasValue:!1,value:null};A.current=R}else R=A.current;A=u(function(){function D(ee){if(!V){if(V=!0,F=ee,ee=v(ee),E!==void 0&&R.hasValue){var te=R.value;if(E(te,ee))return B=te}return B=ee}if(te=B,t(F,ee))return te;var C=v(ee);return E!==void 0&&E(te,C)?(F=ee,te):(F=ee,B=C)}var V=!1,F,B,X=y===void 0?null:y;return[function(){return D(p())},X===null?void 0:function(){return D(X())}]},[p,y,v,E]);var P=r(d,A[0],A[1]);return o(function(){R.hasValue=!0,R.value=P},[P]),h(P),P},n_}var $w;function XD(){return $w||($w=1,t_.exports=YD()),t_.exports}var WD=XD();function JD(n){n()}function ZD(){let n=null,e=null;return{clear(){n=null,e=null},notify(){JD(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!r||n===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var Kw={notify(){},get:()=>[]};function eO(n,e){let t,r=Kw,s=0,o=!1;function u(P){y();const D=r.subscribe(P);let V=!1;return()=>{V||(V=!0,D(),v())}}function h(){r.notify()}function d(){R.onStateChange&&R.onStateChange()}function p(){return o}function y(){s++,t||(t=n.subscribe(d),r=ZD())}function v(){s--,t&&s===0&&(t(),t=void 0,r.clear(),r=Kw)}function E(){o||(o=!0,y())}function A(){o&&(o=!1,v())}const R={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:d,isSubscribed:p,trySubscribe:E,tryUnsubscribe:A,getListeners:()=>r};return R}var tO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nO=tO(),rO=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iO=rO(),sO=()=>nO||iO?z.useLayoutEffect:z.useEffect,aO=sO(),oO=Symbol.for("react-redux-context"),lO=typeof globalThis<"u"?globalThis:{};function uO(){if(!z.createContext)return{};const n=lO[oO]??=new Map;let e=n.get(z.createContext);return e||(e=z.createContext(null),n.set(z.createContext,e)),e}var Ys=uO();function cO(n){const{children:e,context:t,serverState:r,store:s}=n,o=z.useMemo(()=>{const d=eO(s);return{store:s,subscription:d,getServerState:r?()=>r:void 0}},[s,r]),u=z.useMemo(()=>s.getState(),[s]);aO(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),u!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,u]);const h=t||Ys;return z.createElement(h.Provider,{value:o},e)}var hO=cO;function Pv(n=Ys){return function(){return z.useContext(n)}}var jA=Pv();function BA(n=Ys){const e=n===Ys?jA:Pv(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var fO=BA();function dO(n=Ys){const e=n===Ys?fO:BA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var jh=dO(),mO=(n,e)=>n===e;function pO(n=Ys){const e=n===Ys?jA:Pv(n),t=(r,s={})=>{const{equalityFn:o=mO}=typeof s=="function"?{equalityFn:s}:s,u=e(),{store:h,subscription:d,getServerState:p}=u;z.useRef(!0);const y=z.useCallback({[r.name](E){return r(E)}}[r.name],[r]),v=WD.useSyncExternalStoreWithSelector(d.addNestedSub,h.getState,p||h.getState,y,o);return z.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var yo=pO();function un(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var gO=typeof Symbol=="function"&&Symbol.observable||"@@observable",Qw=gO,r_=()=>Math.random().toString(36).substring(7).split("").join("."),yO={INIT:`@@redux/INIT${r_()}`,REPLACE:`@@redux/REPLACE${r_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${r_()}`},wm=yO;function kv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Vv(n,e,t){if(typeof n!="function")throw new Error(un(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(un(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(un(1));return t(Vv)(n,e)}let r=n,s=e,o=new Map,u=o,h=0,d=!1;function p(){u===o&&(u=new Map,o.forEach((D,V)=>{u.set(V,D)}))}function y(){if(d)throw new Error(un(3));return s}function v(D){if(typeof D!="function")throw new Error(un(4));if(d)throw new Error(un(5));let V=!0;p();const F=h++;return u.set(F,D),function(){if(V){if(d)throw new Error(un(6));V=!1,p(),u.delete(F),o=null}}}function E(D){if(!kv(D))throw new Error(un(7));if(typeof D.type>"u")throw new Error(un(8));if(typeof D.type!="string")throw new Error(un(17));if(d)throw new Error(un(9));try{d=!0,s=r(s,D)}finally{d=!1}return(o=u).forEach(F=>{F()}),D}function A(D){if(typeof D!="function")throw new Error(un(10));r=D,E({type:wm.REPLACE})}function R(){const D=v;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(un(11));function F(){const X=V;X.next&&X.next(y())}return F(),{unsubscribe:D(F)}},[Qw](){return this}}}return E({type:wm.INIT}),{dispatch:E,subscribe:v,getState:y,replaceReducer:A,[Qw]:R}}function _O(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:wm.INIT})>"u")throw new Error(un(12));if(typeof t(void 0,{type:wm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(un(13))})}function vO(n){const e=Object.keys(n),t={};for(let o=0;o<e.length;o++){const u=e[o];typeof n[u]=="function"&&(t[u]=n[u])}const r=Object.keys(t);let s;try{_O(t)}catch(o){s=o}return function(u={},h){if(s)throw s;let d=!1;const p={};for(let y=0;y<r.length;y++){const v=r[y],E=t[v],A=u[v],R=E(A,h);if(typeof R>"u")throw h&&h.type,new Error(un(14));p[v]=R,d=d||R!==A}return d=d||r.length!==Object.keys(u).length,d?p:u}}function Sm(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function bO(...n){return e=>(t,r)=>{const s=e(t,r);let o=()=>{throw new Error(un(15))};const u={getState:s.getState,dispatch:(d,...p)=>o(d,...p)},h=n.map(d=>d(u));return o=Sm(...h)(s.dispatch),{...s,dispatch:o}}}function EO(n){return kv(n)&&"type"in n&&typeof n.type=="string"}var zA=Symbol.for("immer-nothing"),Yw=Symbol.for("immer-draftable"),Xn=Symbol.for("immer-state");function xr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Gl=Object.getPrototypeOf;function _o(n){return!!n&&!!n[Xn]}function Gi(n){return n?qA(n)||Array.isArray(n)||!!n[Yw]||!!n.constructor?.[Yw]||up(n)||cp(n):!1}var TO=Object.prototype.constructor.toString();function qA(n){if(!n||typeof n!="object")return!1;const e=Gl(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===TO}function Am(n,e){lp(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function lp(n){const e=n[Xn];return e?e.type_:Array.isArray(n)?1:up(n)?2:cp(n)?3:0}function D_(n,e){return lp(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function FA(n,e,t){const r=lp(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function wO(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function up(n){return n instanceof Map}function cp(n){return n instanceof Set}function Za(n){return n.copy_||n.base_}function O_(n,e){if(up(n))return new Map(n);if(cp(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=qA(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Xn];let s=Reflect.ownKeys(r);for(let o=0;o<s.length;o++){const u=s[o],h=r[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(r[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[u]})}return Object.create(Gl(n),r)}else{const r=Gl(n);if(r!==null&&t)return{...n};const s=Object.create(r);return Object.assign(s,n)}}function Mv(n,e=!1){return hp(n)||_o(n)||!Gi(n)||(lp(n)>1&&(n.set=n.add=n.clear=n.delete=SO),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>Mv(r,!0))),n}function SO(){xr(2)}function hp(n){return Object.isFrozen(n)}var AO={};function vo(n){const e=AO[n];return e||xr(0,n),e}var ph;function HA(){return ph}function IO(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xw(n,e){e&&(vo("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function P_(n){k_(n),n.drafts_.forEach(xO),n.drafts_=null}function k_(n){n===ph&&(ph=n.parent_)}function Ww(n){return ph=IO(ph,n)}function xO(n){const e=n[Xn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Jw(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Xn].modified_&&(P_(e),xr(4)),Gi(n)&&(n=Im(e,n),e.parent_||xm(e,n)),e.patches_&&vo("Patches").generateReplacementPatches_(t[Xn].base_,n,e.patches_,e.inversePatches_)):n=Im(e,t,[]),P_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==zA?n:void 0}function Im(n,e,t){if(hp(e))return e;const r=e[Xn];if(!r)return Am(e,(s,o)=>Zw(n,r,e,s,o,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return xm(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let o=s,u=!1;r.type_===3&&(o=new Set(s),s.clear(),u=!0),Am(o,(h,d)=>Zw(n,r,s,h,d,t,u)),xm(n,s,!1),t&&n.patches_&&vo("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function Zw(n,e,t,r,s,o,u){if(_o(s)){const h=o&&e&&e.type_!==3&&!D_(e.assigned_,r)?o.concat(r):void 0,d=Im(n,s,h);if(FA(t,r,d),_o(d))n.canAutoFreeze_=!1;else return}else u&&t.add(s);if(Gi(s)&&!hp(s)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Im(n,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&xm(n,s)}}function xm(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Mv(e,t)}function RO(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:HA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=Lv;t&&(s=[r],o=gh);const{revoke:u,proxy:h}=Proxy.revocable(s,o);return r.draft_=h,r.revoke_=u,h}var Lv={get(n,e){if(e===Xn)return n;const t=Za(n);if(!D_(t,e))return CO(n,t,e);const r=t[e];return n.finalized_||!Gi(r)?r:r===i_(n.base_,e)?(s_(n),n.copy_[e]=M_(r,n)):r},has(n,e){return e in Za(n)},ownKeys(n){return Reflect.ownKeys(Za(n))},set(n,e,t){const r=GA(Za(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const s=i_(Za(n),e),o=s?.[Xn];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(wO(t,s)&&(t!==void 0||D_(n.base_,e)))return!0;s_(n),V_(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return i_(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,s_(n),V_(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Za(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){xr(11)},getPrototypeOf(n){return Gl(n.base_)},setPrototypeOf(){xr(12)}},gh={};Am(Lv,(n,e)=>{gh[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gh.deleteProperty=function(n,e){return gh.set.call(this,n,e,void 0)};gh.set=function(n,e,t){return Lv.set.call(this,n[0],e,t,n[0])};function i_(n,e){const t=n[Xn];return(t?Za(t):n)[e]}function CO(n,e,t){const r=GA(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function GA(n,e){if(!(e in n))return;let t=Gl(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Gl(t)}}function V_(n){n.modified_||(n.modified_=!0,n.parent_&&V_(n.parent_))}function s_(n){n.copy_||(n.copy_=O_(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var NO=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const u=this;return function(d=o,...p){return u.produce(d,y=>t.call(this,y,...p))}}typeof t!="function"&&xr(6),r!==void 0&&typeof r!="function"&&xr(7);let s;if(Gi(e)){const o=Ww(this),u=M_(e,void 0);let h=!0;try{s=t(u),h=!1}finally{h?P_(o):k_(o)}return Xw(o,r),Jw(s,o)}else if(!e||typeof e!="object"){if(s=t(e),s===void 0&&(s=e),s===zA&&(s=void 0),this.autoFreeze_&&Mv(s,!0),r){const o=[],u=[];vo("Patches").generateReplacementPatches_(e,s,o,u),r(o,u)}return s}else xr(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,d=>e(d,...h));let r,s;return[this.produce(e,t,(u,h)=>{r=u,s=h}),r,s]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Gi(n)||xr(8),_o(n)&&(n=DO(n));const e=Ww(this),t=M_(n,void 0);return t[Xn].isManual_=!0,k_(e),t}finishDraft(n,e){const t=n&&n[Xn];(!t||!t.isManual_)&&xr(9);const{scope_:r}=t;return Xw(r,e),Jw(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const r=vo("Patches").applyPatches_;return _o(n)?r(n,e):this.produce(n,s=>r(s,e))}};function M_(n,e){const t=up(n)?vo("MapSet").proxyMap_(n,e):cp(n)?vo("MapSet").proxySet_(n,e):RO(n,e);return(e?e.scope_:HA()).drafts_.push(t),t}function DO(n){return _o(n)||xr(10,n),$A(n)}function $A(n){if(!Gi(n)||hp(n))return n;const e=n[Xn];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=O_(n,e.scope_.immer_.useStrictShallowCopy_)}else t=O_(n,!0);return Am(t,(r,s)=>{FA(t,r,$A(s))}),e&&(e.finalized_=!1),t}var Wn=new NO,KA=Wn.produce;Wn.produceWithPatches.bind(Wn);Wn.setAutoFreeze.bind(Wn);Wn.setUseStrictShallowCopy.bind(Wn);Wn.applyPatches.bind(Wn);Wn.createDraft.bind(Wn);Wn.finishDraft.bind(Wn);function QA(n){return({dispatch:t,getState:r})=>s=>o=>typeof o=="function"?o(t,r,n):s(o)}var OO=QA(),PO=QA,kO=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sm:Sm.apply(null,arguments)};function e1(n,e){function t(...r){if(e){let s=e(...r);if(!s)throw new Error(qi(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>EO(r)&&r.type===n,t}var YA=class Xc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Xc.prototype)}static get[Symbol.species](){return Xc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Xc(...e[0].concat(this)):new Xc(...e.concat(this))}};function t1(n){return Gi(n)?KA(n,()=>{}):n}function Md(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function VO(n){return typeof n=="boolean"}var MO=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=e??{};let u=new YA;return t&&(VO(t)?u.push(OO):u.push(PO(t.extraArgument))),u},LO="RTK_autoBatch",n1=n=>e=>{setTimeout(e,n)},UO=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let s=!0,o=!1,u=!1;const h=new Set,d=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:n1(10):n.type==="callback"?n.queueNotification:n1(n.timeout),p=()=>{u=!1,o&&(o=!1,h.forEach(y=>y()))};return Object.assign({},r,{subscribe(y){const v=()=>s&&y(),E=r.subscribe(v);return h.add(y),()=>{E(),h.delete(y)}},dispatch(y){try{return s=!y?.meta?.[LO],o=!s,o&&(u||(u=!0,d(p))),r.dispatch(y)}finally{s=!0}}})},jO=n=>function(t){const{autoBatch:r=!0}=t??{};let s=new YA(n);return r&&s.push(UO(typeof r=="object"?r:void 0)),s};function BO(n){const e=MO(),{reducer:t=void 0,middleware:r,devTools:s=!0,preloadedState:o=void 0,enhancers:u=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(kv(t))h=vO(t);else throw new Error(qi(1));let d;typeof r=="function"?d=r(e):d=e();let p=Sm;s&&(p=kO({trace:!1,...typeof s=="object"&&s}));const y=bO(...d),v=jO(y);let E=typeof u=="function"?u(v):v();const A=p(...E);return Vv(h,o,A)}function XA(n){const e={},t=[];let r;const s={addCase(o,u){const h=typeof o=="string"?o:o.type;if(!h)throw new Error(qi(28));if(h in e)throw new Error(qi(29));return e[h]=u,s},addMatcher(o,u){return t.push({matcher:o,reducer:u}),s},addDefaultCase(o){return r=o,s}};return n(s),[e,t,r]}function zO(n){return typeof n=="function"}function qO(n,e){let[t,r,s]=XA(e),o;if(zO(n))o=()=>t1(n());else{const h=t1(n);o=()=>h}function u(h=o(),d){let p=[t[d.type],...r.filter(({matcher:y})=>y(d)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[s]),p.reduce((y,v)=>{if(v)if(_o(y)){const A=v(y,d);return A===void 0?y:A}else{if(Gi(y))return KA(y,E=>v(E,d));{const E=v(y,d);if(E===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return E}}return y},h)}return u.getInitialState=o,u}var FO=Symbol.for("rtk-slice-createasyncthunk");function HO(n,e){return`${n}/${e}`}function GO({creators:n}={}){const e=n?.asyncThunk?.[FO];return function(r){const{name:s,reducerPath:o=s}=r;if(!s)throw new Error(qi(11));const u=(typeof r.reducers=="function"?r.reducers(QO()):r.reducers)||{},h=Object.keys(u),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(B,X){const ee=typeof B=="string"?B:B.type;if(!ee)throw new Error(qi(12));if(ee in d.sliceCaseReducersByType)throw new Error(qi(13));return d.sliceCaseReducersByType[ee]=X,p},addMatcher(B,X){return d.sliceMatchers.push({matcher:B,reducer:X}),p},exposeAction(B,X){return d.actionCreators[B]=X,p},exposeCaseReducer(B,X){return d.sliceCaseReducersByName[B]=X,p}};h.forEach(B=>{const X=u[B],ee={reducerName:B,type:HO(s,B),createNotation:typeof r.reducers=="function"};XO(X)?JO(ee,X,p,e):YO(ee,X,p)});function y(){const[B={},X=[],ee=void 0]=typeof r.extraReducers=="function"?XA(r.extraReducers):[r.extraReducers],te={...B,...d.sliceCaseReducersByType};return qO(r.initialState,C=>{for(let x in te)C.addCase(x,te[x]);for(let x of d.sliceMatchers)C.addMatcher(x.matcher,x.reducer);for(let x of X)C.addMatcher(x.matcher,x.reducer);ee&&C.addDefaultCase(ee)})}const v=B=>B,E=new Map,A=new WeakMap;let R;function P(B,X){return R||(R=y()),R(B,X)}function D(){return R||(R=y()),R.getInitialState()}function V(B,X=!1){function ee(C){let x=C[B];return typeof x>"u"&&X&&(x=Md(A,ee,D)),x}function te(C=v){const x=Md(E,X,()=>new WeakMap);return Md(x,C,()=>{const N={};for(const[M,U]of Object.entries(r.selectors??{}))N[M]=$O(U,C,()=>Md(A,C,D),X);return N})}return{reducerPath:B,getSelectors:te,get selectors(){return te(ee)},selectSlice:ee}}const F={name:s,reducer:P,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:D,...V(o),injectInto(B,{reducerPath:X,...ee}={}){const te=X??o;return B.inject({reducerPath:te,reducer:P},ee),{...F,...V(te,!0)}}};return F}}function $O(n,e,t,r){function s(o,...u){let h=e(o);return typeof h>"u"&&r&&(h=t()),n(h,...u)}return s.unwrapped=n,s}var KO=GO();function QO(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function YO({type:n,reducerName:e,createNotation:t},r,s){let o,u;if("reducer"in r){if(t&&!WO(r))throw new Error(qi(17));o=r.reducer,u=r.prepare}else o=r;s.addCase(n,o).exposeCaseReducer(e,o).exposeAction(e,u?e1(n,u):e1(n))}function XO(n){return n._reducerDefinitionType==="asyncThunk"}function WO(n){return n._reducerDefinitionType==="reducerWithPrepare"}function JO({type:n,reducerName:e},t,r,s){if(!s)throw new Error(qi(18));const{payloadCreator:o,fulfilled:u,pending:h,rejected:d,settled:p,options:y}=t,v=s(n,o,y);r.exposeAction(e,v),u&&r.addCase(v.fulfilled,u),h&&r.addCase(v.pending,h),d&&r.addCase(v.rejected,d),p&&r.addMatcher(v.settled,p),r.exposeCaseReducer(e,{fulfilled:u||Ld,pending:h||Ld,rejected:d||Ld,settled:p||Ld})}function Ld(){}function qi(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Uv="persist:",WA="persist/FLUSH",jv="persist/REHYDRATE",JA="persist/PAUSE",ZA="persist/PERSIST",eI="persist/PURGE",tI="persist/REGISTER",ZO=-1;function Wd(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wd=function(t){return typeof t}:Wd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(n)}function r1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function e4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r1(t,!0).forEach(function(r){t4(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r1(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function t4(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n4(n,e,t,r){r.debug;var s=e4({},t);return n&&Wd(n)==="object"&&Object.keys(n).forEach(function(o){o!=="_persist"&&e[o]===t[o]&&(s[o]=n[o])}),s}function r4(n){var e=n.blacklist||null,t=n.whitelist||null,r=n.transforms||[],s=n.throttle||0,o="".concat(n.keyPrefix!==void 0?n.keyPrefix:Uv).concat(n.key),u=n.storage,h;n.serialize===!1?h=function(ee){return ee}:typeof n.serialize=="function"?h=n.serialize:h=i4;var d=n.writeFailHandler||null,p={},y={},v=[],E=null,A=null,R=function(ee){Object.keys(ee).forEach(function(te){V(te)&&p[te]!==ee[te]&&v.indexOf(te)===-1&&v.push(te)}),Object.keys(p).forEach(function(te){ee[te]===void 0&&V(te)&&v.indexOf(te)===-1&&p[te]!==void 0&&v.push(te)}),E===null&&(E=setInterval(P,s)),p=ee};function P(){if(v.length===0){E&&clearInterval(E),E=null;return}var X=v.shift(),ee=r.reduce(function(te,C){return C.in(te,X,p)},p[X]);if(ee!==void 0)try{y[X]=h(ee)}catch(te){console.error("redux-persist/createPersistoid: error serializing state",te)}else delete y[X];v.length===0&&D()}function D(){Object.keys(y).forEach(function(X){p[X]===void 0&&delete y[X]}),A=u.setItem(o,h(y)).catch(F)}function V(X){return!(t&&t.indexOf(X)===-1&&X!=="_persist"||e&&e.indexOf(X)!==-1)}function F(X){d&&d(X)}var B=function(){for(;v.length!==0;)P();return A||Promise.resolve()};return{update:R,flush:B}}function i4(n){return JSON.stringify(n)}function s4(n){var e=n.transforms||[],t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Uv).concat(n.key),r=n.storage;n.debug;var s;return n.deserialize===!1?s=function(u){return u}:typeof n.deserialize=="function"?s=n.deserialize:s=a4,r.getItem(t).then(function(o){if(o)try{var u={},h=s(o);return Object.keys(h).forEach(function(d){u[d]=e.reduceRight(function(p,y){return y.out(p,d,h)},s(h[d]))}),u}catch(d){throw d}else return})}function a4(n){return JSON.parse(n)}function o4(n){var e=n.storage,t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Uv).concat(n.key);return e.removeItem(t,l4)}function l4(n){}function i1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Li(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i1(t,!0).forEach(function(r){u4(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i1(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function u4(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c4(n,e){if(n==null)return{};var t=h4(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function h4(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var f4=5e3;function d4(n,e){var t=n.version!==void 0?n.version:ZO;n.debug;var r=n.stateReconciler===void 0?n4:n.stateReconciler,s=n.getStoredState||s4,o=n.timeout!==void 0?n.timeout:f4,u=null,h=!1,d=!0,p=function(v){return v._persist.rehydrated&&u&&!d&&u.update(v),v};return function(y,v){var E=y||{},A=E._persist,R=c4(E,["_persist"]),P=R;if(v.type===ZA){var D=!1,V=function(x,N){D||(v.rehydrate(n.key,x,N),D=!0)};if(o&&setTimeout(function(){!D&&V(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},o),d=!1,u||(u=r4(n)),A)return Li({},e(P,v),{_persist:A});if(typeof v.rehydrate!="function"||typeof v.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return v.register(n.key),s(n).then(function(C){var x=n.migrate||function(N,M){return Promise.resolve(N)};x(C,t).then(function(N){V(N)},function(N){V(void 0,N)})},function(C){V(void 0,C)}),Li({},e(P,v),{_persist:{version:t,rehydrated:!1}})}else{if(v.type===eI)return h=!0,v.result(o4(n)),Li({},e(P,v),{_persist:A});if(v.type===WA)return v.result(u&&u.flush()),Li({},e(P,v),{_persist:A});if(v.type===JA)d=!0;else if(v.type===jv){if(h)return Li({},P,{_persist:Li({},A,{rehydrated:!0})});if(v.key===n.key){var F=e(P,v),B=v.payload,X=r!==!1&&B!==void 0?r(B,y,F,n):F,ee=Li({},X,{_persist:Li({},A,{rehydrated:!0})});return p(ee)}}}if(!A)return e(y,v);var te=e(P,v);return te===P?y:p(Li({},te,{_persist:A}))}}function s1(n){return g4(n)||p4(n)||m4()}function m4(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p4(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function g4(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}function a1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function L_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a1(t,!0).forEach(function(r){y4(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a1(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y4(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var nI={registry:[],bootstrapped:!1},_4=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nI,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tI:return L_({},e,{registry:[].concat(s1(e.registry),[t.key])});case jv:var r=e.registry.indexOf(t.key),s=s1(e.registry);return s.splice(r,1),L_({},e,{registry:s,bootstrapped:s.length===0});default:return e}};function v4(n,e,t){var r=Vv(_4,nI,void 0),s=function(d){r.dispatch({type:tI,key:d})},o=function(d,p,y){var v={type:jv,payload:p,err:y,key:d};n.dispatch(v),r.dispatch(v)},u=L_({},r,{purge:function(){var d=[];return n.dispatch({type:eI,result:function(y){d.push(y)}}),Promise.all(d)},flush:function(){var d=[];return n.dispatch({type:WA,result:function(y){d.push(y)}}),Promise.all(d)},pause:function(){n.dispatch({type:JA})},persist:function(){n.dispatch({type:ZA,register:s,rehydrate:o})}});return u.persist(),u}var zc={},Ud={},jd={},o1;function b4(){if(o1)return jd;o1=1,jd.__esModule=!0,jd.default=s;function n(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(h){return typeof h}:n=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(o)}function e(){}var t={getItem:e,setItem:e,removeItem:e};function r(o){if((typeof self>"u"?"undefined":n(self))!=="object"||!(o in self))return!1;try{var u=self[o],h="redux-persist ".concat(o," test");u.setItem(h,"test"),u.getItem(h),u.removeItem(h)}catch{return!1}return!0}function s(o){var u="".concat(o,"Storage");return r(u)?self[u]:t}return jd}var l1;function E4(){if(l1)return Ud;l1=1,Ud.__esModule=!0,Ud.default=t;var n=e(b4());function e(r){return r&&r.__esModule?r:{default:r}}function t(r){var s=(0,n.default)(r);return{getItem:function(u){return new Promise(function(h,d){h(s.getItem(u))})},setItem:function(u,h){return new Promise(function(d,p){d(s.setItem(u,h))})},removeItem:function(u){return new Promise(function(h,d){h(s.removeItem(u))})}}}return Ud}var u1;function T4(){if(u1)return zc;u1=1,zc.__esModule=!0,zc.default=void 0;var n=e(E4());function e(r){return r&&r.__esModule?r:{default:r}}var t=(0,n.default)("local");return zc.default=t,zc}var w4=T4();const S4=DA(w4);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=()=>{};var c1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},I4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},iI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,A=p&63;d||(A=64,u||(E=64)),r.push(t[y],t[v],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):I4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new x4;const E=o<<2|h>>4;if(r.push(E),p!==64){const A=h<<4&240|p>>2;if(r.push(A),v!==64){const R=p<<6&192|v;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class x4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R4=function(n){const e=rI(n);return iI.encodeByteArray(e,!0)},Rm=function(n){return R4(n).replace(/\./g,"")},Bv=function(n){try{return iI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!C4(t)||(n[t]=Cm(n[t],e[t]));return n}function C4(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=()=>zv().__FIREBASE_DEFAULTS__,D4=()=>{if(typeof process>"u"||typeof c1>"u")return;const n=c1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},O4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Bv(n[1]);return e&&JSON.parse(e)},fp=()=>{try{return A4()||N4()||D4()||O4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sI=n=>{var e,t;return(t=(e=fp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},P4=n=>{const e=sI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aI=()=>{var n;return(n=fp())===null||n===void 0?void 0:n.config},oI=n=>{var e;return(e=fp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Rm(JSON.stringify(t)),Rm(JSON.stringify(u)),""].join(".")}const rh={};function M4(){const n={prod:[],emulator:[]};for(const e of Object.keys(rh))rh[e]?n.emulator.push(e):n.prod.push(e);return n}function L4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let h1=!1;function uI(n,e){if(typeof window>"u"||typeof document>"u"||!pu(window.location.host)||rh[n]===e||rh[n]||h1)return;rh[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=M4().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{h1=!0,u()},E}function y(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=L4(r),A=t("text"),R=document.getElementById(A)||document.createElement("span"),P=t("learnmore"),D=document.getElementById(P)||document.createElement("a"),V=t("preprendIcon"),F=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const B=E.element;h(B),y(D,P);const X=p();d(F,V),B.append(F,R,D,X),document.body.appendChild(B)}o?(R.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function cI(){var n;const e=(n=fp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j4(){return typeof window<"u"||hI()}function hI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function B4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function q4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F4(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fI(){return!cI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dI(){return!cI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function mI(){try{return typeof indexedDB=="object"}catch{return!1}}function H4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="FirebaseError";class li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=G4,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Do.prototype.create)}}class Do{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?$4(o,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new li(s,h,r)}}function $4(n,e){return n.replace(K4,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const K4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Q4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $i(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],u=e[s];if(d1(o)&&d1(u)){if(!$i(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function d1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pI(n,e){const t=new Y4(n,e);return t.subscribe.bind(t)}class Y4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");X4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=a_),s.error===void 0&&(s.error=a_),s.complete===void 0&&(s.complete=a_);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function a_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(n){return n&&n._delegate?n._delegate:n}class Ki{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new k4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z4(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J4(n){return n===eo?void 0:n}function Z4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new W4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const yI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},eP=Me.INFO,tP={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},nP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=tP[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dp{constructor(e){this.name=e,this._logLevel=eP,this._logHandler=nP,this._userLogHandler=null,qv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}function rP(n){qv.forEach(e=>{e.setLogLevel(n)})}function iP(n,e){for(const t of qv){let r=null;e&&e.level&&(r=yI[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,o,...u)=>{const h=u.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");o>=(r??s.logLevel)&&n({level:Me[o].toLowerCase(),message:h,args:u,type:s.name})}}}const sP=(n,e)=>e.some(t=>n instanceof t);let m1,p1;function aP(){return m1||(m1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return p1||(p1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _I=new WeakMap,U_=new WeakMap,vI=new WeakMap,o_=new WeakMap,Fv=new WeakMap;function lP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Hs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&_I.set(t,n)}).catch(()=>{}),Fv.set(e,n),e}function uP(n){if(U_.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});U_.set(n,e)}let j_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return U_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cP(n){j_=n(j_)}function hP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(l_(this),e,...t);return vI.set(r,e.sort?e.sort():[e]),Hs(r)}:oP().includes(n)?function(...e){return n.apply(l_(this),e),Hs(_I.get(this))}:function(...e){return Hs(n.apply(l_(this),e))}}function fP(n){return typeof n=="function"?hP(n):(n instanceof IDBTransaction&&uP(n),sP(n,aP())?new Proxy(n,j_):n)}function Hs(n){if(n instanceof IDBRequest)return lP(n);if(o_.has(n))return o_.get(n);const e=fP(n);return e!==n&&(o_.set(n,e),Fv.set(e,n)),e}const l_=n=>Fv.get(n);function dP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=Hs(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Hs(u.result),d.oldVersion,d.newVersion,Hs(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const mP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],u_=new Map;function g1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(u_.get(e))return u_.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=pP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mP.includes(t)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&d.done]))[0]};return u_.set(e,o),o}cP(n=>({...n,get:(e,t,r)=>g1(e,t)||n.get(e,t,r),has:(e,t)=>!!g1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function yP(n){const e=n.getComponent();return e?.type==="VERSION"}const Nm="@firebase/app",B_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new dp("@firebase/app"),_P="@firebase/app-compat",vP="@firebase/analytics-compat",bP="@firebase/analytics",EP="@firebase/app-check-compat",TP="@firebase/app-check",wP="@firebase/auth",SP="@firebase/auth-compat",AP="@firebase/database",IP="@firebase/data-connect",xP="@firebase/database-compat",RP="@firebase/functions",CP="@firebase/functions-compat",NP="@firebase/installations",DP="@firebase/installations-compat",OP="@firebase/messaging",PP="@firebase/messaging-compat",kP="@firebase/performance",VP="@firebase/performance-compat",MP="@firebase/remote-config",LP="@firebase/remote-config-compat",UP="@firebase/storage",jP="@firebase/storage-compat",BP="@firebase/firestore",zP="@firebase/ai",qP="@firebase/firestore-compat",FP="firebase",HP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]",GP={[Nm]:"fire-core",[_P]:"fire-core-compat",[bP]:"fire-analytics",[vP]:"fire-analytics-compat",[TP]:"fire-app-check",[EP]:"fire-app-check-compat",[wP]:"fire-auth",[SP]:"fire-auth-compat",[AP]:"fire-rtdb",[IP]:"fire-data-connect",[xP]:"fire-rtdb-compat",[RP]:"fire-fn",[CP]:"fire-fn-compat",[NP]:"fire-iid",[DP]:"fire-iid-compat",[OP]:"fire-fcm",[PP]:"fire-fcm-compat",[kP]:"fire-perf",[VP]:"fire-perf-compat",[MP]:"fire-rc",[LP]:"fire-rc-compat",[UP]:"fire-gcs",[jP]:"fire-gcs-compat",[BP]:"fire-fst",[qP]:"fire-fst-compat",[zP]:"fire-vertex","fire-js":"fire-js",[FP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Map,$l=new Map,Kl=new Map;function yh(n,e){try{n.container.addComponent(e)}catch(t){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bI(n,e){n.container.addOrOverwriteComponent(e)}function Js(n){const e=n.name;if(Kl.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;Kl.set(e,n);for(const t of Ws.values())yh(t,n);for(const t of $l.values())yh(t,n);return!0}function zh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $P(n,e,t=Xs){zh(n,e).clearInstance(t)}function EI(n){return n.options!==void 0}function mr(n){return n==null?!1:n.settings!==void 0}function KP(){Kl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Do("app","Firebase",QP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n,e){const t=Bv(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class YP extends TI{constructor(e,t,r,s){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,u,s);else{const h=e;super(h.options,u,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},t),this._serverConfig.authIdToken&&y1(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&y1(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,yr(Nm,B_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Gv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw gr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=HP;function mp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xs,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw gr.create("bad-app-name",{appName:String(s)});if(t||(t=aI()),!t)throw gr.create("no-options");const o=Ws.get(s);if(o){if($i(t,o.options)&&$i(r,o.config))return o;throw gr.create("duplicate-app",{appName:s})}const u=new gI(s);for(const d of Kl.values())u.addComponent(d);const h=new TI(t,r,u);return Ws.set(s,h),h}function XP(n,e){if(j4()&&!hI())throw gr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let t;EI(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=p=>[...p].reduce((y,v)=>Math.imul(31,y)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw gr.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(r)),u=$l.get(o);if(u)return u.incRefCount(e.releaseOnDeref),u;const h=new gI(o);for(const p of Kl.values())h.addComponent(p);const d=new YP(t,e,o,h);return $l.set(o,d),d}function Hv(n=Xs){const e=Ws.get(n);if(!e&&n===Xs&&aI())return mp();if(!e)throw gr.create("no-app",{appName:n});return e}function WP(){return Array.from(Ws.values())}async function Gv(n){let e=!1;const t=n.name;Ws.has(t)?(e=!0,Ws.delete(t)):$l.has(t)&&n.decRefCount()<=0&&($l.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function yr(n,e,t){var r;let s=(r=GP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(h.join(" "));return}Js(new Ki(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function wI(n,e){if(n!==null&&typeof n!="function")throw gr.create("invalid-log-argument");iP(n,e)}function SI(n){rP(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="firebase-heartbeat-database",ZP=1,_h="firebase-heartbeat-store";let c_=null;function AI(){return c_||(c_=dP(JP,ZP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_h)}catch(t){console.warn(t)}}}}).catch(n=>{throw gr.create("idb-open",{originalErrorMessage:n.message})})),c_}async function ek(n){try{const t=(await AI()).transaction(_h),r=await t.objectStore(_h).get(II(n));return await t.done,r}catch(e){if(e instanceof li)Qi.warn(e.message);else{const t=gr.create("idb-get",{originalErrorMessage:e?.message});Qi.warn(t.message)}}}async function _1(n,e){try{const r=(await AI()).transaction(_h,"readwrite");await r.objectStore(_h).put(e,II(n)),await r.done}catch(t){if(t instanceof li)Qi.warn(t.message);else{const r=gr.create("idb-set",{originalErrorMessage:t?.message});Qi.warn(r.message)}}}function II(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1024,nk=30;class rk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=v1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>nk){const u=ak(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v1(),{heartbeatsToSend:r,unsentEntries:s}=ik(this._heartbeatsCache.heartbeats),o=Rm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Qi.warn(t),""}}}function v1(){return new Date().toISOString().substring(0,10)}function ik(n,e=tk){const t=[];let r=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),b1(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),b1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mI()?H4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ek(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return _1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return _1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function b1(n){return Rm(JSON.stringify({version:2,heartbeats:n})).length}function ak(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){Js(new Ki("platform-logger",e=>new gP(e),"PRIVATE")),Js(new Ki("heartbeat",e=>new rk(e),"PRIVATE")),yr(Nm,B_,n),yr(Nm,B_,"esm2017"),yr("fire-js","")}ok("");const lk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:li,SDK_VERSION:oa,_DEFAULT_ENTRY_NAME:Xs,_addComponent:yh,_addOrOverwriteComponent:bI,_apps:Ws,_clearComponents:KP,_components:Kl,_getProvider:zh,_isFirebaseApp:EI,_isFirebaseServerApp:mr,_registerComponent:Js,_removeServiceInstance:$P,_serverApps:$l,deleteApp:Gv,getApp:Hv,getApps:WP,initializeApp:mp,initializeServerApp:XP,onLog:wI,registerVersion:yr,setLogLevel:SI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t){this._delegate=e,this.firebase=t,yh(e,new Ki("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Gv(this._delegate)))}_getService(e,t=Xs){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Xs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){yh(this._delegate,e)}_addOrOverwriteComponent(e){bI(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},E1=new Do("app-compat","Firebase",ck);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n){const e={},t={__esModule:!0,initializeApp:o,app:s,registerVersion:yr,setLogLevel:SI,onLog:wI,apps:null,SDK_VERSION:oa,INTERNAL:{registerComponent:h,removeApp:r,useAsService:d,modularAPIs:lk}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(p){delete e[p]}function s(p){if(p=p||Xs,!f1(e,p))throw E1.create("no-app",{appName:p});return e[p]}s.App=n;function o(p,y={}){const v=mp(p,y);if(f1(e,v.name))return e[v.name];const E=new n(v,t);return e[v.name]=E,E}function u(){return Object.keys(e).map(p=>e[p])}function h(p){const y=p.name,v=y.replace("-compat","");if(Js(p)&&p.type==="PUBLIC"){const E=(A=s())=>{if(typeof A[v]!="function")throw E1.create("invalid-app-argument",{appName:y});return A[v]()};p.serviceProps!==void 0&&Cm(E,p.serviceProps),t[v]=E,n.prototype[v]=function(...A){return this._getService.bind(this,y).apply(this,p.multipleInstances?A:[])}}return p.type==="PUBLIC"?t[v]:null}function d(p,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){const n=hk(uk);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:xI,extendNamespace:e,createSubscribe:pI,ErrorFactory:Do,deepExtend:Cm});function e(t){Cm(n,t)}return n}const fk=xI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new dp("@firebase/app-compat"),dk="@firebase/app-compat",mk="0.4.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n){yr(dk,mk,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=zv();if(n.firebase!==void 0){T1.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&T1.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const gk=fk;pk();var w1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gs,RI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function N(){}N.prototype=x.prototype,C.D=x.prototype,C.prototype=new N,C.prototype.constructor=C,C.C=function(M,U,q){for(var k=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)k[zt-2]=arguments[zt];return x.prototype[U].apply(M,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,x,N){N||(N=0);var M=Array(16);if(typeof x=="string")for(var U=0;16>U;++U)M[U]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(U=0;16>U;++U)M[U]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=C.g[0],N=C.g[1],U=C.g[2];var q=C.g[3],k=x+(q^N&(U^q))+M[0]+3614090360&4294967295;x=N+(k<<7&4294967295|k>>>25),k=q+(U^x&(N^U))+M[1]+3905402710&4294967295,q=x+(k<<12&4294967295|k>>>20),k=U+(N^q&(x^N))+M[2]+606105819&4294967295,U=q+(k<<17&4294967295|k>>>15),k=N+(x^U&(q^x))+M[3]+3250441966&4294967295,N=U+(k<<22&4294967295|k>>>10),k=x+(q^N&(U^q))+M[4]+4118548399&4294967295,x=N+(k<<7&4294967295|k>>>25),k=q+(U^x&(N^U))+M[5]+1200080426&4294967295,q=x+(k<<12&4294967295|k>>>20),k=U+(N^q&(x^N))+M[6]+2821735955&4294967295,U=q+(k<<17&4294967295|k>>>15),k=N+(x^U&(q^x))+M[7]+4249261313&4294967295,N=U+(k<<22&4294967295|k>>>10),k=x+(q^N&(U^q))+M[8]+1770035416&4294967295,x=N+(k<<7&4294967295|k>>>25),k=q+(U^x&(N^U))+M[9]+2336552879&4294967295,q=x+(k<<12&4294967295|k>>>20),k=U+(N^q&(x^N))+M[10]+4294925233&4294967295,U=q+(k<<17&4294967295|k>>>15),k=N+(x^U&(q^x))+M[11]+2304563134&4294967295,N=U+(k<<22&4294967295|k>>>10),k=x+(q^N&(U^q))+M[12]+1804603682&4294967295,x=N+(k<<7&4294967295|k>>>25),k=q+(U^x&(N^U))+M[13]+4254626195&4294967295,q=x+(k<<12&4294967295|k>>>20),k=U+(N^q&(x^N))+M[14]+2792965006&4294967295,U=q+(k<<17&4294967295|k>>>15),k=N+(x^U&(q^x))+M[15]+1236535329&4294967295,N=U+(k<<22&4294967295|k>>>10),k=x+(U^q&(N^U))+M[1]+4129170786&4294967295,x=N+(k<<5&4294967295|k>>>27),k=q+(N^U&(x^N))+M[6]+3225465664&4294967295,q=x+(k<<9&4294967295|k>>>23),k=U+(x^N&(q^x))+M[11]+643717713&4294967295,U=q+(k<<14&4294967295|k>>>18),k=N+(q^x&(U^q))+M[0]+3921069994&4294967295,N=U+(k<<20&4294967295|k>>>12),k=x+(U^q&(N^U))+M[5]+3593408605&4294967295,x=N+(k<<5&4294967295|k>>>27),k=q+(N^U&(x^N))+M[10]+38016083&4294967295,q=x+(k<<9&4294967295|k>>>23),k=U+(x^N&(q^x))+M[15]+3634488961&4294967295,U=q+(k<<14&4294967295|k>>>18),k=N+(q^x&(U^q))+M[4]+3889429448&4294967295,N=U+(k<<20&4294967295|k>>>12),k=x+(U^q&(N^U))+M[9]+568446438&4294967295,x=N+(k<<5&4294967295|k>>>27),k=q+(N^U&(x^N))+M[14]+3275163606&4294967295,q=x+(k<<9&4294967295|k>>>23),k=U+(x^N&(q^x))+M[3]+4107603335&4294967295,U=q+(k<<14&4294967295|k>>>18),k=N+(q^x&(U^q))+M[8]+1163531501&4294967295,N=U+(k<<20&4294967295|k>>>12),k=x+(U^q&(N^U))+M[13]+2850285829&4294967295,x=N+(k<<5&4294967295|k>>>27),k=q+(N^U&(x^N))+M[2]+4243563512&4294967295,q=x+(k<<9&4294967295|k>>>23),k=U+(x^N&(q^x))+M[7]+1735328473&4294967295,U=q+(k<<14&4294967295|k>>>18),k=N+(q^x&(U^q))+M[12]+2368359562&4294967295,N=U+(k<<20&4294967295|k>>>12),k=x+(N^U^q)+M[5]+4294588738&4294967295,x=N+(k<<4&4294967295|k>>>28),k=q+(x^N^U)+M[8]+2272392833&4294967295,q=x+(k<<11&4294967295|k>>>21),k=U+(q^x^N)+M[11]+1839030562&4294967295,U=q+(k<<16&4294967295|k>>>16),k=N+(U^q^x)+M[14]+4259657740&4294967295,N=U+(k<<23&4294967295|k>>>9),k=x+(N^U^q)+M[1]+2763975236&4294967295,x=N+(k<<4&4294967295|k>>>28),k=q+(x^N^U)+M[4]+1272893353&4294967295,q=x+(k<<11&4294967295|k>>>21),k=U+(q^x^N)+M[7]+4139469664&4294967295,U=q+(k<<16&4294967295|k>>>16),k=N+(U^q^x)+M[10]+3200236656&4294967295,N=U+(k<<23&4294967295|k>>>9),k=x+(N^U^q)+M[13]+681279174&4294967295,x=N+(k<<4&4294967295|k>>>28),k=q+(x^N^U)+M[0]+3936430074&4294967295,q=x+(k<<11&4294967295|k>>>21),k=U+(q^x^N)+M[3]+3572445317&4294967295,U=q+(k<<16&4294967295|k>>>16),k=N+(U^q^x)+M[6]+76029189&4294967295,N=U+(k<<23&4294967295|k>>>9),k=x+(N^U^q)+M[9]+3654602809&4294967295,x=N+(k<<4&4294967295|k>>>28),k=q+(x^N^U)+M[12]+3873151461&4294967295,q=x+(k<<11&4294967295|k>>>21),k=U+(q^x^N)+M[15]+530742520&4294967295,U=q+(k<<16&4294967295|k>>>16),k=N+(U^q^x)+M[2]+3299628645&4294967295,N=U+(k<<23&4294967295|k>>>9),k=x+(U^(N|~q))+M[0]+4096336452&4294967295,x=N+(k<<6&4294967295|k>>>26),k=q+(N^(x|~U))+M[7]+1126891415&4294967295,q=x+(k<<10&4294967295|k>>>22),k=U+(x^(q|~N))+M[14]+2878612391&4294967295,U=q+(k<<15&4294967295|k>>>17),k=N+(q^(U|~x))+M[5]+4237533241&4294967295,N=U+(k<<21&4294967295|k>>>11),k=x+(U^(N|~q))+M[12]+1700485571&4294967295,x=N+(k<<6&4294967295|k>>>26),k=q+(N^(x|~U))+M[3]+2399980690&4294967295,q=x+(k<<10&4294967295|k>>>22),k=U+(x^(q|~N))+M[10]+4293915773&4294967295,U=q+(k<<15&4294967295|k>>>17),k=N+(q^(U|~x))+M[1]+2240044497&4294967295,N=U+(k<<21&4294967295|k>>>11),k=x+(U^(N|~q))+M[8]+1873313359&4294967295,x=N+(k<<6&4294967295|k>>>26),k=q+(N^(x|~U))+M[15]+4264355552&4294967295,q=x+(k<<10&4294967295|k>>>22),k=U+(x^(q|~N))+M[6]+2734768916&4294967295,U=q+(k<<15&4294967295|k>>>17),k=N+(q^(U|~x))+M[13]+1309151649&4294967295,N=U+(k<<21&4294967295|k>>>11),k=x+(U^(N|~q))+M[4]+4149444226&4294967295,x=N+(k<<6&4294967295|k>>>26),k=q+(N^(x|~U))+M[11]+3174756917&4294967295,q=x+(k<<10&4294967295|k>>>22),k=U+(x^(q|~N))+M[2]+718787259&4294967295,U=q+(k<<15&4294967295|k>>>17),k=N+(q^(U|~x))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+U&4294967295,C.g[3]=C.g[3]+q&4294967295}r.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var N=x-this.blockSize,M=this.B,U=this.h,q=0;q<x;){if(U==0)for(;q<=N;)s(this,C,q),q+=this.blockSize;if(typeof C=="string"){for(;q<x;)if(M[U++]=C.charCodeAt(q++),U==this.blockSize){s(this,M),U=0;break}}else for(;q<x;)if(M[U++]=C[q++],U==this.blockSize){s(this,M),U=0;break}}this.h=U,this.o+=x},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var N=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=N&255,N/=256;for(this.u(C),C=Array(16),x=N=0;4>x;++x)for(var M=0;32>M;M+=8)C[N++]=this.g[x]>>>M&255;return C};function o(C,x){var N=h;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=x(C)}function u(C,x){this.h=x;for(var N=[],M=!0,U=C.length-1;0<=U;U--){var q=C[U]|0;M&&q==x||(N[U]=q,M=!1)}this.g=N}var h={};function d(C){return-128<=C&&128>C?o(C,function(x){return new u([x|0],0>x?-1:0)}):new u([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return D(p(-C));for(var x=[],N=1,M=0;C>=N;M++)x[M]=C/N|0,N*=4294967296;return new u(x,0)}function y(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return D(y(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(x,8)),M=v,U=0;U<C.length;U+=8){var q=Math.min(8,C.length-U),k=parseInt(C.substring(U,U+q),x);8>q?(q=p(Math.pow(x,q)),M=M.j(q).add(p(k))):(M=M.j(N),M=M.add(p(k)))}return M}var v=d(0),E=d(1),A=d(16777216);n=u.prototype,n.m=function(){if(P(this))return-D(this).m();for(var C=0,x=1,N=0;N<this.g.length;N++){var M=this.i(N);C+=(0<=M?M:4294967296+M)*x,x*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R(this))return"0";if(P(this))return"-"+D(this).toString(C);for(var x=p(Math.pow(C,6)),N=this,M="";;){var U=X(N,x).g;N=V(N,U.j(x));var q=((0<N.g.length?N.g[0]:N.h)>>>0).toString(C);if(N=U,R(N))return q+M;for(;6>q.length;)q="0"+q;M=q+M}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function R(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=V(this,C),P(C)?-1:R(C)?0:1};function D(C){for(var x=C.g.length,N=[],M=0;M<x;M++)N[M]=~C.g[M];return new u(N,~C.h).add(E)}n.abs=function(){return P(this)?D(this):this},n.add=function(C){for(var x=Math.max(this.g.length,C.g.length),N=[],M=0,U=0;U<=x;U++){var q=M+(this.i(U)&65535)+(C.i(U)&65535),k=(q>>>16)+(this.i(U)>>>16)+(C.i(U)>>>16);M=k>>>16,q&=65535,k&=65535,N[U]=k<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function V(C,x){return C.add(D(x))}n.j=function(C){if(R(this)||R(C))return v;if(P(this))return P(C)?D(this).j(D(C)):D(D(this).j(C));if(P(C))return D(this.j(D(C)));if(0>this.l(A)&&0>C.l(A))return p(this.m()*C.m());for(var x=this.g.length+C.g.length,N=[],M=0;M<2*x;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var U=0;U<C.g.length;U++){var q=this.i(M)>>>16,k=this.i(M)&65535,zt=C.i(U)>>>16,dt=C.i(U)&65535;N[2*M+2*U]+=k*dt,F(N,2*M+2*U),N[2*M+2*U+1]+=q*dt,F(N,2*M+2*U+1),N[2*M+2*U+1]+=k*zt,F(N,2*M+2*U+1),N[2*M+2*U+2]+=q*zt,F(N,2*M+2*U+2)}for(M=0;M<x;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=x;M<2*x;M++)N[M]=0;return new u(N,0)};function F(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function B(C,x){this.g=C,this.h=x}function X(C,x){if(R(x))throw Error("division by zero");if(R(C))return new B(v,v);if(P(C))return x=X(D(C),x),new B(D(x.g),D(x.h));if(P(x))return x=X(C,D(x)),new B(D(x.g),x.h);if(30<C.g.length){if(P(C)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var N=E,M=x;0>=M.l(C);)N=ee(N),M=ee(M);var U=te(N,1),q=te(M,1);for(M=te(M,2),N=te(N,2);!R(M);){var k=q.add(M);0>=k.l(C)&&(U=U.add(N),q=k),M=te(M,1),N=te(N,1)}return x=V(C,U.j(x)),new B(U,x)}for(U=v;0<=C.l(x);){for(N=Math.max(1,Math.floor(C.m()/x.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),q=p(N),k=q.j(x);P(k)||0<k.l(C);)N-=M,q=p(N),k=q.j(x);R(q)&&(q=E),U=U.add(q),C=V(C,k)}return new B(U,C)}n.A=function(C){return X(this,C).h},n.and=function(C){for(var x=Math.max(this.g.length,C.g.length),N=[],M=0;M<x;M++)N[M]=this.i(M)&C.i(M);return new u(N,this.h&C.h)},n.or=function(C){for(var x=Math.max(this.g.length,C.g.length),N=[],M=0;M<x;M++)N[M]=this.i(M)|C.i(M);return new u(N,this.h|C.h)},n.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),N=[],M=0;M<x;M++)N[M]=this.i(M)^C.i(M);return new u(N,this.h^C.h)};function ee(C){for(var x=C.g.length+1,N=[],M=0;M<x;M++)N[M]=C.i(M)<<1|C.i(M-1)>>>31;return new u(N,C.h)}function te(C,x){var N=x>>5;x%=32;for(var M=C.g.length-N,U=[],q=0;q<M;q++)U[q]=0<x?C.i(q+N)>>>x|C.i(q+N+1)<<32-x:C.i(q+N);return new u(U,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Gs=u}).apply(typeof w1<"u"?w1:typeof self<"u"?self:typeof window<"u"?window:{});var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CI,Wc,NI,Jd,z_,DI,OI,PI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,b){return f==Array.prototype||f==Object.prototype||(f[_]=b.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bd=="object"&&Bd];for(var _=0;_<f.length;++_){var b=f[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(f,_){if(_)e:{var b=r;f=f.split(".");for(var I=0;I<f.length-1;I++){var G=f[I];if(!(G in b))break e;b=b[G]}f=f[f.length-1],I=b[f],_=_(I),_!=I&&_!=null&&e(b,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var b=0,I=!1,G={next:function(){if(!I&&b<f.length){var Z=b++;return{value:_(Z,f[Z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(f){return f||function(){return o(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,b){return f.call.apply(f.bind,arguments)}function v(f,_,b){if(!f)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,I),f.apply(_,G)}}return function(){return f.apply(_,arguments)}}function E(f,_,b){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function A(f,_){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function R(f,_){function b(){}b.prototype=_.prototype,f.aa=_.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(I,G,Z){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return _.prototype[G].apply(I,ce)}}function P(f){const _=f.length;if(0<_){const b=Array(_);for(let I=0;I<_;I++)b[I]=f[I];return b}return[]}function D(f,_){for(let b=1;b<arguments.length;b++){const I=arguments[b];if(d(I)){const G=f.length||0,Z=I.length||0;f.length=G+Z;for(let ce=0;ce<Z;ce++)f[G+ce]=I[ce]}else f.push(I)}}class V{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function F(f){return/^[\s\xa0]*$/.test(f)}function B(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function X(f){return X[" "](f),f}X[" "]=function(){};var ee=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function te(f,_,b){for(const I in f)_.call(b,f[I],I,f)}function C(f,_){for(const b in f)_.call(void 0,f[b],b,f)}function x(f){const _={};for(const b in f)_[b]=f[b];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,_){let b,I;for(let G=1;G<arguments.length;G++){I=arguments[G];for(b in I)f[b]=I[b];for(let Z=0;Z<N.length;Z++)b=N[Z],Object.prototype.hasOwnProperty.call(I,b)&&(f[b]=I[b])}}function U(f){var _=1;f=f.split(":");const b=[];for(;0<_&&f.length;)b.push(f.shift()),_--;return f.length&&b.push(f.join(":")),b}function q(f){h.setTimeout(()=>{throw f},0)}function k(){var f=Ke;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class zt{constructor(){this.h=this.g=null}add(_,b){const I=dt.get();I.set(_,b),this.h?this.h.next=I:this.g=I,this.h=I}}var dt=new V(()=>new ne,f=>f.reset());class ne{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,_e=!1,Ke=new zt,L=()=>{const f=h.Promise.resolve(void 0);fe=()=>{f.then(oe)}};var oe=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(b){q(b)}var _=dt;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}_e=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,_),h.removeEventListener("test",b,_)}catch{}return f}();function Oe(f,_){if(ue.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(ee){e:{try{X(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else b=="mouseover"?_=f.fromElement:b=="mouseout"&&(_=f.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:xe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Oe.aa.h.call(this)}}R(Oe,ue);var xe={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),lt=0;function Or(f,_,b,I,G){this.listener=f,this.proxy=null,this.src=_,this.type=b,this.capture=!!I,this.ha=G,this.key=++lt,this.da=this.fa=!1}function is(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function hi(f){this.src=f,this.g={},this.h=0}hi.prototype.add=function(f,_,b,I,G){var Z=f.toString();f=this.g[Z],f||(f=this.g[Z]=[],this.h++);var ce=pa(f,_,I,G);return-1<ce?(_=f[ce],b||(_.fa=!1)):(_=new Or(_,this.src,Z,!!I,G),_.fa=b,f.push(_)),_};function ma(f,_){var b=_.type;if(b in f.g){var I=f.g[b],G=Array.prototype.indexOf.call(I,_,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(I,G,1),Z&&(is(_),f.g[b].length==0&&(delete f.g[b],f.h--))}}function pa(f,_,b,I){for(var G=0;G<f.length;++G){var Z=f[G];if(!Z.da&&Z.listener==_&&Z.capture==!!b&&Z.ha==I)return G}return-1}var ga="closure_lm_"+(1e6*Math.random()|0),Du={};function ff(f,_,b,I,G){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)ff(f,_[Z],b,I,G);return null}return b=df(b),f&&f[Yt]?f.K(_,b,p(I)?!!I.capture:!1,G):er(f,_,b,!1,I,G)}function er(f,_,b,I,G,Z){if(!_)throw Error("Invalid event type");var ce=p(G)?!!G.capture:!!G,Be=Lo(f);if(Be||(f[ga]=Be=new hi(f)),b=Be.add(_,b,I,ce,Z),b.proxy)return b;if(I=Yp(),b.proxy=I,I.src=f,I.listener=b,f.addEventListener)Ee||(G=ce),G===void 0&&(G=!1),f.addEventListener(_.toString(),I,G);else if(f.attachEvent)f.attachEvent(ya(_.toString()),I);else if(f.addListener&&f.removeListener)f.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Yp(){function f(b){return _.call(f.src,f.listener,b)}const _=Xp;return f}function Ou(f,_,b,I,G){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Ou(f,_[Z],b,I,G);else I=p(I)?!!I.capture:!!I,b=df(b),f&&f[Yt]?(f=f.i,_=String(_).toString(),_ in f.g&&(Z=f.g[_],b=pa(Z,b,I,G),-1<b&&(is(Z[b]),Array.prototype.splice.call(Z,b,1),Z.length==0&&(delete f.g[_],f.h--)))):f&&(f=Lo(f))&&(_=f.g[_.toString()],f=-1,_&&(f=pa(_,b,I,G)),(b=-1<f?_[f]:null)&&Mo(b))}function Mo(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Yt])ma(_.i,f);else{var b=f.type,I=f.proxy;_.removeEventListener?_.removeEventListener(b,I,f.capture):_.detachEvent?_.detachEvent(ya(b),I):_.addListener&&_.removeListener&&_.removeListener(I),(b=Lo(_))?(ma(b,f),b.h==0&&(b.src=null,_[ga]=null)):is(f)}}}function ya(f){return f in Du?Du[f]:Du[f]="on"+f}function Xp(f,_){if(f.da)f=!0;else{_=new Oe(_,this);var b=f.listener,I=f.ha||f.src;f.fa&&Mo(f),f=b.call(I,_)}return f}function Lo(f){return f=f[ga],f instanceof hi?f:null}var Pu="__closure_events_fn_"+(1e9*Math.random()>>>0);function df(f){return typeof f=="function"?f:(f[Pu]||(f[Pu]=function(_){return f.handleEvent(_)}),f[Pu])}function Tt(){me.call(this),this.i=new hi(this),this.M=this,this.F=null}R(Tt,me),Tt.prototype[Yt]=!0,Tt.prototype.removeEventListener=function(f,_,b,I){Ou(this,f,_,b,I)};function We(f,_){var b,I=f.F;if(I)for(b=[];I;I=I.F)b.push(I);if(f=f.M,I=_.type||_,typeof _=="string")_=new ue(_,f);else if(_ instanceof ue)_.target=_.target||f;else{var G=_;_=new ue(I,f),M(_,G)}if(G=!0,b)for(var Z=b.length-1;0<=Z;Z--){var ce=_.g=b[Z];G=jn(ce,I,!0,_)&&G}if(ce=_.g=f,G=jn(ce,I,!0,_)&&G,G=jn(ce,I,!1,_)&&G,b)for(Z=0;Z<b.length;Z++)ce=_.g=b[Z],G=jn(ce,I,!1,_)&&G}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var b=f.g[_],I=0;I<b.length;I++)is(b[I]);delete f.g[_],f.h--}}this.F=null},Tt.prototype.K=function(f,_,b,I){return this.i.add(String(f),_,!1,b,I)},Tt.prototype.L=function(f,_,b,I){return this.i.add(String(f),_,!0,b,I)};function jn(f,_,b,I){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var G=!0,Z=0;Z<_.length;++Z){var ce=_[Z];if(ce&&!ce.da&&ce.capture==b){var Be=ce.listener,Ft=ce.ha||ce.src;ce.fa&&ma(f.i,ce),G=Be.call(Ft,I)!==!1&&G}}return G&&!I.defaultPrevented}function mn(f,_,b){if(typeof f=="function")b&&(f=E(f,b));else if(f&&typeof f.handleEvent=="function")f=E(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function mf(f){f.g=mn(()=>{f.g=null,f.i&&(f.i=!1,mf(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Wp extends me{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:mf(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _a(f){me.call(this),this.h=f,this.g={}}R(_a,me);var va=[];function ba(f){te(f.g,function(_,b){this.g.hasOwnProperty(b)&&Mo(_)},f),f.g={}}_a.prototype.N=function(){_a.aa.N.call(this),ba(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=h.JSON.stringify,Uo=h.JSON.parse,Ea=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function ku(){}ku.prototype.h=null;function Vu(f){return f.h||(f.h=f.i())}function Mu(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function di(){ue.call(this,"d")}R(di,ue);function Lu(){ue.call(this,"c")}R(Lu,ue);var Pr={},Uu=null;function ss(){return Uu=Uu||new Tt}Pr.La="serverreachability";function jo(f){ue.call(this,Pr.La,f)}R(jo,ue);function as(f){const _=ss();We(_,new jo(_))}Pr.STAT_EVENT="statevent";function pf(f,_){ue.call(this,Pr.STAT_EVENT,f),this.stat=_}R(pf,ue);function pt(f){const _=ss();We(_,new pf(_,f))}Pr.Ma="timingevent";function qt(f,_){ue.call(this,Pr.Ma,f),this.size=_}R(qt,ue);function Pt(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function tr(){this.g=!0}tr.prototype.xa=function(){this.g=!1};function ju(f,_,b,I,G,Z){f.info(function(){if(f.g)if(Z)for(var ce="",Be=Z.split("&"),Ft=0;Ft<Be.length;Ft++){var ze=Be[Ft].split("=");if(1<ze.length){var Wt=ze[0];ze=ze[1];var Ht=Wt.split("_");ce=2<=Ht.length&&Ht[1]=="type"?ce+(Wt+"="+ze+"&"):ce+(Wt+"=redacted&")}}else ce=null;else ce=Z;return"XMLHTTP REQ ("+I+") [attempt "+G+"]: "+_+`
`+b+`
`+ce})}function Jp(f,_,b,I,G,Z,ce){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+G+"]: "+_+`
`+b+`
`+Z+" "+ce})}function os(f,_,b,I){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ta(f,b)+(I?" "+I:"")})}function gf(f,_){f.info(function(){return"TIMEOUT: "+_})}tr.prototype.info=function(){};function Ta(f,_){if(!f.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var I=b[f];if(!(2>I.length)){var G=I[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ce=1;ce<G.length;ce++)G[ce]=""}}}}return vr(b)}catch{return _}}var ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kr;function Vr(){}R(Vr,ku),Vr.prototype.g=function(){return new XMLHttpRequest},Vr.prototype.i=function(){return{}},kr=new Vr;function Tn(f,_,b,I){this.j=f,this.i=_,this.l=b,this.R=I||1,this.U=new _a(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var Bu={},Bo={};function br(f,_,b){f.L=1,f.v=xa(Bn(_)),f.m=b,f.P=!0,pi(f,null)}function pi(f,_){f.F=Date.now(),wa(f),f.A=Bn(f.v);var b=f.A,I=f.R;Array.isArray(I)||(I=[String(I)]),$u(b.i,"t",I),f.C=0,b=f.j.J,f.h=new It,f.g=Of(f.j,b?_:null,!f.m),0<f.O&&(f.M=new Wp(E(f.Y,f,f.g),f.O)),_=f.U,b=f.g,I=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(va[0]=G.toString()),G=va);for(var Z=0;Z<G.length;Z++){var ce=ff(b,G[Z],I||_.handleEvent,!1,_.h||_);if(!ce)break;_.g[ce.key]=ce}_=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),as(),ju(f.i,f.u,f.A,f.l,f.R,f.m)}Tn.prototype.ca=function(f){f=f.target;const _=this.M;_&&sr(f)==3?_.j():this.Y(f)},Tn.prototype.Y=function(f){try{if(f==this.g)e:{const Ht=sr(this.g);var _=this.g.Ba();const wi=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Sf(this.g)))){this.J||Ht!=4||_==7||(_==8||0>=wi?as(3):as(2)),us(this);var b=this.g.Z();this.X=b;t:if(yf(this)){var I=Sf(this.g);f="";var G=I.length,Z=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),Mr(this);var ce="";break t}this.h.i=new h.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,f+=this.h.i.decode(I[_],{stream:!(Z&&_==G-1)});I.length=0,this.h.g+=f,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=b==200,Jp(this.i,this.u,this.A,this.l,this.R,Ht,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Ft=this.g;if((Be=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Be)){var ze=Be;break t}}ze=null}if(b=ze)os(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,b);else{this.o=!1,this.s=3,pt(12),rn(this),Mr(this);break e}}if(this.P){b=!0;let sn;for(;!this.J&&this.C<ce.length;)if(sn=_f(this,ce),sn==Bo){Ht==4&&(this.s=4,pt(14),b=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Bu){this.s=4,pt(15),os(this.i,this.l,ce,"[Invalid Chunk]"),b=!1;break}else os(this.i,this.l,sn,null),Sa(this,sn);if(yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ce.length!=0||this.h.h||(this.s=1,pt(16),b=!1),this.o=this.o&&b,!b)os(this.i,this.l,ce,"[Invalid Chunked Response]"),rn(this),Mr(this);else if(0<ce.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Va(Wt),Wt.M=!0,pt(11))}}else os(this.i,this.l,ce,null),Sa(this,ce);Ht==4&&rn(this),this.o&&!this.J&&(Ht==4?Cf(this.j,this):(this.o=!1,wa(this)))}else rg(this.g),b==400&&0<ce.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),rn(this),Mr(this)}}}catch{}finally{}};function yf(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function _f(f,_){var b=f.C,I=_.indexOf(`
`,b);return I==-1?Bo:(b=Number(_.substring(b,I)),isNaN(b)?Bu:(I+=1,I+b>_.length?Bo:(_=_.slice(I,I+b),f.C=I+b,_)))}Tn.prototype.cancel=function(){this.J=!0,rn(this)};function wa(f){f.S=Date.now()+f.I,vf(f,f.I)}function vf(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Pt(E(f.ba,f),_)}function us(f){f.B&&(h.clearTimeout(f.B),f.B=null)}Tn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(gf(this.i,this.A),this.L!=2&&(as(),pt(17)),rn(this),this.s=2,Mr(this)):vf(this,this.S-f)};function Mr(f){f.j.G==0||f.J||Cf(f.j,f)}function rn(f){us(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,ba(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Sa(f,_){try{var b=f.j;if(b.G!=0&&(b.g==f||zu(b.h,f))){if(!f.K&&zu(b.h,f)&&b.G==3){try{var I=b.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var G=I;if(G[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Jo(b),Xo(b);else break e;Wu(b),pt(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&b.v==0&&!b.C&&(b.C=Pt(E(b.Za,b),6e3));if(1>=qo(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ti(b,11)}else if((f.K||b.g==f)&&Jo(b),!F(_))for(G=b.Da.g.parse(_),_=0;_<G.length;_++){let ze=G[_];if(b.T=ze[0],ze=ze[1],b.G==2)if(ze[0]=="c"){b.K=ze[1],b.ia=ze[2];const Wt=ze[3];Wt!=null&&(b.la=Wt,b.j.info("VER="+b.la));const Ht=ze[4];Ht!=null&&(b.Aa=Ht,b.j.info("SVER="+b.Aa));const wi=ze[5];wi!=null&&typeof wi=="number"&&0<wi&&(I=1.5*wi,b.L=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const sn=f.g;if(sn){const Fr=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fr){var Z=I.h;Z.g||Fr.indexOf("spdy")==-1&&Fr.indexOf("quic")==-1&&Fr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Fo(Z,Z.h),Z.h=null))}if(I.D){const Zu=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zu&&(I.ya=Zu,nt(I.I,I.D,Zu))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),I=b;var ce=f;if(I.qa=Df(I,I.J?I.ia:null,I.W),ce.K){wn(I.h,ce);var Be=ce,Ft=I.L;Ft&&(Be.I=Ft),Be.B&&(us(Be),wa(Be)),I.g=ce}else xf(I);0<b.i.length&&Wo(b)}else ze[0]!="stop"&&ze[0]!="close"||Ti(b,7);else b.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Ti(b,7):Yu(b):ze[0]!="noop"&&b.l&&b.l.ta(ze),b.v=0)}}as(4)}catch{}}var bf=class{constructor(f,_){this.g=f,this.map=_}};function gi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zo(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function qo(f){return f.h?1:f.g?f.g.size:0}function zu(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Fo(f,_){f.g?f.g.add(_):f.h=_}function wn(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}gi.prototype.cancel=function(){if(this.i=qu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function qu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const b of f.g.values())_=_.concat(b.D);return _}return P(f.i)}function Zp(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var _=[],b=f.length,I=0;I<b;I++)_.push(f[I]);return _}_=[],b=0;for(I in f)_[b++]=f[I];return _}function Ho(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var _=[];f=f.length;for(var b=0;b<f;b++)_.push(b);return _}_=[],b=0;for(const I in f)_[b++]=I;return _}}}function Fu(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var b=Ho(f),I=Zp(f),G=I.length,Z=0;Z<G;Z++)_.call(void 0,I[Z],b&&b[Z],f)}var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eg(f,_){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var I=f[b].indexOf("="),G=null;if(0<=I){var Z=f[b].substring(0,I);G=f[b].substring(I+1)}else Z=f[b];_(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function kt(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof kt){this.h=f.h,Ia(this,f.j),this.o=f.o,this.g=f.g,cs(this,f.s),this.l=f.l;var _=f.i,b=new _i;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),yi(this,b),this.m=f.m}else f&&(_=String(f).match(Aa))?(this.h=!1,Ia(this,_[1]||"",!0),this.o=nr(_[2]||""),this.g=nr(_[3]||"",!0),cs(this,_[4]),this.l=nr(_[5]||"",!0),yi(this,_[6]||"",!0),this.m=nr(_[7]||"")):(this.h=!1,this.i=new _i(null,this.h))}kt.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Ra(_,Hu,!0),":");var b=this.g;return(b||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Ra(_,Hu,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Ra(b,b.charAt(0)=="/"?tg:Gu,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Ra(b,Go)),f.join("")};function Bn(f){return new kt(f)}function Ia(f,_,b){f.j=b?nr(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function cs(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function yi(f,_,b){_ instanceof _i?(f.i=_,Tf(f.i,f.h)):(b||(_=Ra(_,ng)),f.i=new _i(_,f.h))}function nt(f,_,b){f.i.set(_,b)}function xa(f){return nt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function nr(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ra(f,_,b){return typeof f=="string"?(f=encodeURI(f).replace(_,Ef),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ef(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Hu=/[#\/\?@]/g,Gu=/[#\?:]/g,tg=/[#\?]/g,ng=/[#\?@]/g,Go=/#/g;function _i(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function rr(f){f.g||(f.g=new Map,f.h=0,f.i&&eg(f.i,function(_,b){f.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=_i.prototype,n.add=function(f,_){rr(this),this.i=null,f=Lr(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(_),this.h+=1,this};function vi(f,_){rr(f),_=Lr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function bi(f,_){return rr(f),_=Lr(f,_),f.g.has(_)}n.forEach=function(f,_){rr(this),this.g.forEach(function(b,I){b.forEach(function(G){f.call(_,G,I,this)},this)},this)},n.na=function(){rr(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let I=0;I<_.length;I++){const G=f[I];for(let Z=0;Z<G.length;Z++)b.push(_[I])}return b},n.V=function(f){rr(this);let _=[];if(typeof f=="string")bi(this,f)&&(_=_.concat(this.g.get(Lr(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)_=_.concat(f[b])}return _},n.set=function(f,_){return rr(this),this.i=null,f=Lr(this,f),bi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function $u(f,_,b){vi(f,_),0<b.length&&(f.i=null,f.g.set(Lr(f,_),P(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var I=_[b];const Z=encodeURIComponent(String(I)),ce=this.V(I);for(I=0;I<ce.length;I++){var G=Z;ce[I]!==""&&(G+="="+encodeURIComponent(String(ce[I]))),f.push(G)}}return this.i=f.join("&")};function Lr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Tf(f,_){_&&!f.j&&(rr(f),f.i=null,f.g.forEach(function(b,I){var G=I.toLowerCase();I!=G&&(vi(this,I),$u(this,G,b))},f)),f.j=_}function Ca(f,_){const b=new tr;if(h.Image){const I=new Image;I.onload=A(ir,b,"TestLoadImage: loaded",!0,_,I),I.onerror=A(ir,b,"TestLoadImage: error",!1,_,I),I.onabort=A(ir,b,"TestLoadImage: abort",!1,_,I),I.ontimeout=A(ir,b,"TestLoadImage: timeout",!1,_,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else _(!1)}function Er(f,_){const b=new tr,I=new AbortController,G=setTimeout(()=>{I.abort(),ir(b,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:I.signal}).then(Z=>{clearTimeout(G),Z.ok?ir(b,"TestPingServer: ok",!0,_):ir(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),ir(b,"TestPingServer: error",!1,_)})}function ir(f,_,b,I,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),I(b)}catch{}}function Na(){this.g=new Ea}function Ur(f,_,b){const I=b||"";try{Fu(f,function(G,Z){let ce=G;p(G)&&(ce=vr(G)),_.push(I+Z+"="+encodeURIComponent(ce))})}catch(G){throw _.push(I+"type="+encodeURIComponent("_badmap")),G}}function hs(f){this.l=f.Ub||null,this.j=f.eb||!1}R(hs,ku),hs.prototype.g=function(){return new Ei(this.l,this.j)},hs.prototype.i=function(f){return function(){return f}}({});function Ei(f,_){Tt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ei,Tt),n=Ei.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Br(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ku(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ku(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?jr(this):Br(this),this.readyState==3&&Ku(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,jr(this))},n.Qa=function(f){this.g&&(this.response=f,jr(this))},n.ga=function(){this.g&&jr(this)};function jr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Br(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=_.next();return f.join(`\r
`)};function Br(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Qu(f){let _="";return te(f,function(b,I){_+=I,_+=":",_+=b,_+=`\r
`}),_}function Xt(f,_,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Qu(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):nt(f,_,b))}function Ye(f){Tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ye,Tt);var $o=/^https?$/i,Da=["POST","PUT"];n=Ye.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kr.g(),this.v=this.o?Vu(this.o):Vu(kr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(Z){wf(this,Z);return}if(f=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var G in I)b.set(G,I[G]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Z of I.keys())b.set(Z,I.get(Z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Da,_,void 0))||I||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ce]of b)this.g.setRequestHeader(Z,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oa(this),this.u=!0,this.g.send(f),this.u=!1}catch(Z){wf(this,Z)}};function wf(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Ko(f),zr(f)}function Ko(f){f.A||(f.A=!0,We(f,"complete"),We(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,We(this,"complete"),We(this,"abort"),zr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zr(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qo(this):this.bb())},n.bb=function(){Qo(this)};function Qo(f){if(f.h&&typeof u<"u"&&(!f.v[1]||sr(f)!=4||f.Z()!=2)){if(f.u&&sr(f)==4)mn(f.Ea,0,f);else if(We(f,"readystatechange"),sr(f)==4){f.h=!1;try{const ce=f.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var I;if(I=ce===0){var G=String(f.D).match(Aa)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),I=!$o.test(G?G.toLowerCase():"")}b=I}if(b)We(f,"complete"),We(f,"success");else{f.m=6;try{var Z=2<sr(f)?f.g.statusText:""}catch{Z=""}f.l=Z+" ["+f.Z()+"]",Ko(f)}}finally{zr(f)}}}}function zr(f,_){if(f.g){Oa(f);const b=f.g,I=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||We(f,"ready");try{b.onreadystatechange=I}catch{}}}function Oa(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function sr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Uo(_)}};function Sf(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function rg(f){const _={};f=(f.g&&2<=sr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<f.length;I++){if(F(f[I]))continue;var b=U(f[I]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=_[G]||[];_[G]=Z,Z.push(b)}C(_,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(f,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||_}function Yo(f){this.Aa=0,this.i=[],this.j=new tr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,f),this.cb=Pa("retryDelaySeedMs",1e4,f),this.Wa=Pa("forwardChannelMaxRetries",2,f),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(f&&f.concurrentRequestLimit),this.Da=new Na,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yo.prototype,n.la=8,n.G=1,n.connect=function(f,_,b,I){pt(0),this.W=f,this.H=_||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.I=Df(this,null,this.W),Wo(this)};function Yu(f){if(Af(f),f.G==3){var _=f.U++,b=Bn(f.I);if(nt(b,"SID",f.K),nt(b,"RID",_),nt(b,"TYPE","terminate"),ka(f,b),_=new Tn(f,f.j,_),_.L=2,_.v=xa(Bn(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=_.v,b=!0),b||(_.g=Of(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wa(_)}Nf(f)}function Xo(f){f.g&&(Va(f),f.g.cancel(),f.g=null)}function Af(f){Xo(f),f.u&&(h.clearTimeout(f.u),f.u=null),Jo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Wo(f){if(!zo(f.h)&&!f.s){f.s=!0;var _=f.Ga;fe||L(),_e||(fe(),_e=!0),Ke.add(_,f),f.B=0}}function ig(f,_){return qo(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Pt(E(f.Ga,f,_),Ju(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new Tn(this,this.j,f);let Z=this.o;if(this.S&&(Z?(Z=x(Z),M(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=If(this,G,_),b=Bn(this.I),nt(b,"RID",f),nt(b,"CVER",22),this.D&&nt(b,"X-HTTP-Session-Id",this.D),ka(this,b),Z&&(this.O?_="headers="+encodeURIComponent(String(Qu(Z)))+"&"+_:this.m&&Xt(b,this.m,Z)),Fo(this.h,G),this.Ua&&nt(b,"TYPE","init"),this.P?(nt(b,"$req",_),nt(b,"SID","null"),G.T=!0,br(G,b,null)):br(G,b,_),this.G=2}}else this.G==3&&(f?Xu(this,f):this.i.length==0||zo(this.h)||Xu(this))};function Xu(f,_){var b;_?b=_.l:b=f.U++;const I=Bn(f.I);nt(I,"SID",f.K),nt(I,"RID",b),nt(I,"AID",f.T),ka(f,I),f.m&&f.o&&Xt(I,f.m,f.o),b=new Tn(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),_&&(f.i=_.D.concat(f.i)),_=If(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fo(f.h,b),br(b,I,_)}function ka(f,_){f.H&&te(f.H,function(b,I){nt(_,I,b)}),f.l&&Fu({},function(b,I){nt(_,I,b)})}function If(f,_,b){b=Math.min(f.i.length,b);var I=f.l?E(f.l.Na,f.l,f):null;e:{var G=f.i;let Z=-1;for(;;){const ce=["count="+b];Z==-1?0<b?(Z=G[0].g,ce.push("ofs="+Z)):Z=0:ce.push("ofs="+Z);let Be=!0;for(let Ft=0;Ft<b;Ft++){let ze=G[Ft].g;const Wt=G[Ft].map;if(ze-=Z,0>ze)Z=Math.max(0,G[Ft].g-100),Be=!1;else try{Ur(Wt,ce,"req"+ze+"_")}catch{I&&I(Wt)}}if(Be){I=ce.join("&");break e}}}return f=f.i.splice(0,b),_.D=f,I}function xf(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;fe||L(),_e||(fe(),_e=!0),Ke.add(_,f),f.v=0}}function Wu(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Pt(E(f.Fa,f),Ju(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Rf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Pt(E(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Xo(this),Rf(this))};function Va(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Rf(f){f.g=new Tn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Bn(f.qa);nt(_,"RID","rpc"),nt(_,"SID",f.K),nt(_,"AID",f.T),nt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&nt(_,"TO",f.ja),nt(_,"TYPE","xmlhttp"),ka(f,_),f.m&&f.o&&Xt(_,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=xa(Bn(_)),b.m=null,b.P=!0,pi(b,f)}n.Za=function(){this.C!=null&&(this.C=null,Xo(this),Wu(this),pt(19))};function Jo(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Cf(f,_){var b=null;if(f.g==_){Jo(f),Va(f),f.g=null;var I=2}else if(zu(f.h,_))b=_.D,wn(f.h,_),I=1;else return;if(f.G!=0){if(_.o)if(I==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var G=f.B;I=ss(),We(I,new qt(I,b)),Wo(f)}else xf(f);else if(G=_.s,G==3||G==0&&0<_.X||!(I==1&&ig(f,_)||I==2&&Wu(f)))switch(b&&0<b.length&&(_=f.h,_.i=_.i.concat(b)),G){case 1:Ti(f,5);break;case 4:Ti(f,10);break;case 3:Ti(f,6);break;default:Ti(f,2)}}}function Ju(f,_){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*_}function Ti(f,_){if(f.j.info("Error code "+_),_==2){var b=E(f.fb,f),I=f.Xa;const G=!I;I=new kt(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ia(I,"https"),xa(I),G?Ca(I.toString(),b):Er(I.toString(),b)}else pt(2);f.G=0,f.l&&f.l.sa(_),Nf(f),Af(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Nf(f){if(f.G=0,f.ka=[],f.l){const _=qu(f.h);(_.length!=0||f.i.length!=0)&&(D(f.ka,_),D(f.ka,f.i),f.h.i.length=0,P(f.i),f.i.length=0),f.l.ra()}}function Df(f,_,b){var I=b instanceof kt?Bn(b):new kt(b);if(I.g!="")_&&(I.g=_+"."+I.g),cs(I,I.s);else{var G=h.location;I=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var Z=new kt(null);I&&Ia(Z,I),_&&(Z.g=_),G&&cs(Z,G),b&&(Z.l=b),I=Z}return b=f.D,_=f.ya,b&&_&&nt(I,b,_),nt(I,"VER",f.la),ka(f,I),I}function Of(f,_,b){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new Ye(new hs({eb:b})):new Ye(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pf(){}n=Pf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zo(){}Zo.prototype.g=function(f,_){return new Sn(f,_)};function Sn(f,_){Tt.call(this),this.g=new Yo(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!F(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new qr(this)}R(Sn,Tt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Yu(this.g)},Sn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=vr(f),f=b);_.i.push(new bf(_.Ya++,f)),_.G==3&&Wo(_)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Yu(this.g),delete this.g,Sn.aa.N.call(this)};function kf(f){di.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const b in _){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}R(kf,di);function Vf(){Lu.call(this),this.status=1}R(Vf,Lu);function qr(f){this.g=f}R(qr,Pf),qr.prototype.ua=function(){We(this.g,"a")},qr.prototype.ta=function(f){We(this.g,new kf(f))},qr.prototype.sa=function(f){We(this.g,new Vf)},qr.prototype.ra=function(){We(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,PI=function(){return new Zo},OI=function(){return ss()},DI=Pr,z_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,Jd=ls,mi.COMPLETE="complete",NI=mi,Mu.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Wc=Mu,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,CI=Ye}).apply(typeof Bd<"u"?Bd:typeof self<"u"?self:typeof window<"u"?window:{});const S1="@firebase/firestore",A1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new dp("@firebase/firestore");function kl(){return Zs.logLevel}function yk(n){Zs.setLogLevel(n)}function le(n,...e){if(Zs.logLevel<=Me.DEBUG){const t=e.map($v);Zs.debug(`Firestore (${gu}): ${n}`,...t)}}function Nt(n,...e){if(Zs.logLevel<=Me.ERROR){const t=e.map($v);Zs.error(`Firestore (${gu}): ${n}`,...t)}}function Jn(n,...e){if(Zs.logLevel<=Me.WARN){const t=e.map($v);Zs.warn(`Firestore (${gu}): ${n}`,...t)}}function $v(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,kI(n,r,t)}function kI(n,e,t){let r=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Nt(r),new Error(r)}function ye(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||kI(e,s,r)}function _k(n,e){n||pe(57014,e)}function de(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nn.UNAUTHENTICATED))}shutdown(){}}class bk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ek{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dn,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dn)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new VI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Tk{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Tk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);const r=o=>{o.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new I1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Ak(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Se(n,e){return n<e?-1:n>e?1:0}function q_(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Se(r,s);{const o=Kv(),u=Ik(o.encode(x1(n,t)),o.encode(x1(e,t)));return u!==0?u:Se(r,s)}}t+=r>65535?2:1}return Se(n.length,e.length)}function x1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ik(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Se(n[t],e[t]);return Se(n.length,e.length)}function Ql(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function MI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="__name__";class Yr{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Yr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Se(e.length,t.length)}static compareSegments(e,t){const r=Yr.isNumericId(e),s=Yr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Yr.extractNumericId(e).compare(Yr.extractNumericId(t)):q_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gs.fromString(e.substring(4,e.length-2))}}class Le extends Yr{construct(e,t,r){return new Le(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Le(t)}static emptyPath(){return new Le([])}}const xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Yr{construct(e,t,r){return new _t(e,t,r)}static isValidIdentifier(e){return xk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===R1}static keyField(){return new _t([R1])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ae(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ae(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(o(),s++)}if(o(),u)throw new ae(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Le.fromString(e))}static fromName(e){return new he(Le.fromString(e).popFirst(5))}static empty(){return new he(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(n,e,t){if(!t)throw new ae(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LI(n,e,t,r){if(e===!0&&r===!0)throw new ae(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function C1(n){if(!he.isDocumentKey(n))throw new ae(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function N1(n){if(he.isDocumentKey(n))throw new ae(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function $e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pp(n);throw new ae(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jI(n,e){if(e<=0)throw new ae(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function qh(n,e){if(!UI(n))throw new ae(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ae(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=-62135596800,O1=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*O1);return new Xe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<D1)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O1}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qh(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:jt("string",Xe._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Xe(0,0))}static max(){return new ve(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=-1;class Dm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function F_(n){return n.fields.find(e=>e.kind===2)}function to(n){return n.fields.filter(e=>e.kind!==2)}Dm.UNKNOWN_ID=-1;class Zd{constructor(e,t){this.fieldPath=e,this.kind=t}}class vh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vh(0,Zn.min())}}function BI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new Xe(t+1,0):new Xe(t,r));return new Zn(s,he.empty(),e)}function zI(n){return new Zn(n.readTime,n.key,Yl)}class Zn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zn(ve.min(),he.empty(),Yl)}static max(){return new Zn(ve.max(),he.empty(),Yl)}}function Xv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==qI)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,r)=>{t(e)})}static reject(e){return new $((t,r)=>{r(e)})}static waitFor(e){return new $((t,r)=>{let s=0,o=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++o,u&&o===s&&t()},d=>r(d))}),u=!0,o===s&&t()})}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next(s=>s?$.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new $((r,s)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next(y=>{u[p]=y,++h,h===o&&r(u)},y=>s(y))}})}static doWhile(e,t){return new $((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="SimpleDb";class gp{static open(e,t,r,s){try{return new gp(t,e.transaction(s,r))}catch(o){throw new ih(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new dn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ih(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Wv(r.target.error);this.S.reject(new ih(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(Qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ck(t)}}class ei{static delete(e){return le(Qn,"Removing database:",e),ro(zv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!mI())return!1;if(ei.F())return!0;const e=Kt(),t=ei.M(e),r=0<t&&t<10,s=HI(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,ei.M(Kt())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(le(Qn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{r(new ih(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?r(new ae(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new ae(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new ih(e,u))},s.onupgradeneeded=o=>{le(Qn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${u.version}`);this.B.q(u,s.transaction,o.oldVersion,this.version).next(()=>{le(Qn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(Jn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const h=gp.open(this.db,e,o?"readonly":"readwrite",r),d=s(h).next(p=>(h.v(),p)).catch(p=>(h.abort(p),$.reject(p))).toPromise();return d.catch(()=>{}),await h.D,d}catch(h){const d=h,p=d.name!=="FirebaseError"&&u<3;if(le(Qn,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function HI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Rk{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return ro(this.$.delete())}}class ih extends ae{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ua(n){return n.name==="IndexedDbTransactionError"}class Ck{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(Qn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(Qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ro(r)}add(e){return le(Qn,"ADD",this.store.name,e,e),ro(this.store.add(e))}get(e){return ro(this.store.get(e)).next(t=>(t===void 0&&(t=null),le(Qn,"GET",this.store.name,e,t),t))}delete(e){return le(Qn,"DELETE",this.store.name,e),ro(this.store.delete(e))}count(){return le(Qn,"COUNT",this.store.name),ro(this.store.count())}j(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new $((u,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{u(d.target.result)}})}{const o=this.cursor(r),u=[];return this.J(o,(h,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $((s,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}Y(e,t){le(Qn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const s=this.cursor(r);return this.J(s,(o,u,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.J(s,t)}ee(e){const t=this.cursor({});return new $((r,s)=>{t.onerror=o=>{const u=Wv(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}J(e,t){const r=[];return new $((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const d=new Rk(h),p=t(h.primaryKey,h.value,d);if(p instanceof $){const y=p.catch(v=>(d.done(),$.reject(v)));r.push(y)}d.isDone?s():d.W===null?h.continue():h.continue(d.W)}}).next(()=>$.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ro(n){return new $((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Wv(r.target.error);t(s)}})}let P1=!1;function Wv(n){const e=ei.M(Kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return P1||(P1=!0,setTimeout(()=>{throw r},0)),r}}return n}const sh="IndexBackfiller";class Nk{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){le(sh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.te.re();le(sh,`Documents written: ${t}`)}catch(t){ua(t)?le(sh,"Ignoring IndexedDB error during index backfill: ",t):await la(t)}await this.ne(6e4)})}}class Dk{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))}ie(e,t){const r=new Set;let s=t,o=!0;return $.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return le(sh,`Processing collection: ${u}`),this.se(e,u,s).next(h=>{s-=h,r.add(u)});o=!1})).next(()=>t-s)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.oe(s,o)).next(h=>(le(sh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}oe(e,t){let r=e;return t.changes.forEach((s,o)=>{const u=zI(o);Xv(u,r)>0&&(r=u)}),new Zn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Mn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=-1;function Fh(n){return n==null}function bh(n){return n===0&&1/n==-1/0}function GI(n){return typeof n=="number"&&Number.isInteger(n)&&!bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="";function bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=k1(e)),e=Ok(n.get(t),e);return k1(e)}function Ok(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Om:t+="";break;default:t+=o}}return t}function k1(n){return n+Om+""}function Jr(n){const e=n.length;if(ye(e>=2,64408,{path:n}),e===2)return ye(n.charAt(0)===Om&&n.charAt(1)==="",56145,{path:n}),Le.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const u=n.indexOf(Om,o);switch((u<0||u>t)&&pe(50515,{path:n}),n.charAt(u+1)){case"":const h=n.substring(o,u);let d;s.length===0?d=h:(s+=h,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:pe(61167,{path:n})}o=u+2}return new Le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="remoteDocuments",Hh="owner",Rl="owner",Eh="mutationQueues",Pk="userId",Ar="mutations",V1="batchId",lo="userMutationsIndex",M1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(n,e){return[n,bn(e)]}function $I(n,e,t){return[n,bn(e),t]}const kk={},Xl="documentMutations",Pm="remoteDocumentsV14",Vk=["prefixPath","collectionGroup","readTime","documentId"],tm="documentKeyIndex",Mk=["prefixPath","collectionGroup","documentId"],KI="collectionGroupIndex",Lk=["collectionGroup","readTime","prefixPath","documentId"],Th="remoteDocumentGlobal",H_="remoteDocumentGlobalKey",Wl="targets",QI="queryTargetsIndex",Uk=["canonicalId","targetId"],Jl="targetDocuments",jk=["targetId","path"],Jv="documentTargetsIndex",Bk=["path","targetId"],km="targetGlobalKey",mo="targetGlobal",wh="collectionParents",zk=["collectionId","parent"],Zl="clientMetadata",qk="clientId",yp="bundles",Fk="bundleId",_p="namedQueries",Hk="name",Zv="indexConfiguration",Gk="indexId",G_="collectionGroupIndex",$k="collectionGroup",ah="indexState",Kk=["indexId","uid"],YI="sequenceNumberIndex",Qk=["uid","sequenceNumber"],oh="indexEntries",Yk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XI="documentKeyIndex",Xk=["indexId","uid","orderedDocumentKey"],vp="documentOverlays",Wk=["userId","collectionPath","documentId"],$_="collectionPathOverlayIndex",Jk=["userId","collectionPath","largestBatchId"],WI="collectionGroupOverlayIndex",Zk=["userId","collectionGroup","largestBatchId"],e0="globals",eV="name",JI=[Eh,Ar,Xl,no,Wl,Hh,mo,Jl,Zl,Th,wh,yp,_p],tV=[...JI,vp],ZI=[Eh,Ar,Xl,Pm,Wl,Hh,mo,Jl,Zl,Th,wh,yp,_p,vp],ex=ZI,t0=[...ex,Zv,ah,oh],nV=t0,tx=[...t0,e0],rV=tx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends FI{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Qt(n,e){const t=de(n);return ei.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ca(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??cn.RED,this.left=s??cn.EMPTY,this.right=o??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new cn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new U1(this.data.getIterator())}getIteratorFrom(e){return new U1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class U1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new tt(_t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rx("Invalid base64 string: "+o):o}}(e);return new At(t)}static fromUint8Array(e){const t=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new At(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const sV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(n){if(ye(!!n,39018),typeof n=="string"){let e=0;const t=sV.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xi(n){return typeof n=="string"?At.fromBase64String(n):At.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="server_timestamp",sx="__type__",ax="__previous_value__",ox="__local_write_time__";function bp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sx])===null||t===void 0?void 0:t.stringValue)===ix}function Ep(n){const e=n.mapValue.fields[ax];return bp(e)?Ep(e):e}function Sh(n){const e=Yi(n.mapValue.fields[ox].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t,r,s,o,u,h,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const Vm="(default)";class ea{constructor(e,t){this.projectId=e,this.database=t||Vm}static empty(){return new ea("","")}get isDefaultDatabase(){return this.database===Vm}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__type__",lx="__max__",zs={mapValue:{fields:{__type__:{stringValue:lx}}}},r0="__vector__",eu="value",nm={nullValue:"NULL_VALUE"};function ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bp(n)?4:ux(n)?9007199254740991:Tp(n)?10:11:pe(28295,{value:n})}function ii(n,e){if(n===e)return!0;const t=ta(n);if(t!==ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sh(n).isEqual(Sh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=Yi(s.timestampValue),h=Yi(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Xi(s.bytesValue).isEqual(Xi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return yt(s.geoPointValue.latitude)===yt(o.geoPointValue.latitude)&&yt(s.geoPointValue.longitude)===yt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return yt(s.integerValue)===yt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=yt(s.doubleValue),h=yt(o.doubleValue);return u===h?bh(u)===bh(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Ql(n.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(L1(u)!==L1(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!ii(u[d],h[d])))return!1;return!0}(n,e);default:return pe(52216,{left:n})}}function Ah(n,e){return(n.values||[]).find(t=>ii(t,e))!==void 0}function na(n,e){if(n===e)return 0;const t=ta(n),r=ta(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=yt(o.integerValue||o.doubleValue),d=yt(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return j1(n.timestampValue,e.timestampValue);case 4:return j1(Sh(n),Sh(e));case 5:return q_(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Xi(o),d=Xi(u);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),d=u.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=Se(h[p],d[p]);if(y!==0)return y}return Se(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Se(yt(o.latitude),yt(u.latitude));return h!==0?h:Se(yt(o.longitude),yt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return B1(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,d,p,y;const v=o.fields||{},E=u.fields||{},A=(h=v[eu])===null||h===void 0?void 0:h.arrayValue,R=(d=E[eu])===null||d===void 0?void 0:d.arrayValue,P=Se(((p=A?.values)===null||p===void 0?void 0:p.length)||0,((y=R?.values)===null||y===void 0?void 0:y.length)||0);return P!==0?P:B1(A,R)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===zs.mapValue&&u===zs.mapValue)return 0;if(o===zs.mapValue)return 1;if(u===zs.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=u.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const E=q_(d[v],y[v]);if(E!==0)return E;const A=na(h[d[v]],p[y[v]]);if(A!==0)return A}return Se(d.length,y.length)}(n.mapValue,e.mapValue);default:throw pe(23264,{le:t})}}function j1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=Yi(n),r=Yi(e),s=Se(t.seconds,r.seconds);return s!==0?s:Se(t.nanos,r.nanos)}function B1(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=na(t[s],r[s]);if(o)return o}return Se(t.length,r.length)}function tu(n){return Q_(n)}function Q_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Q_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${Q_(t.fields[u])}`;return s+"}"}(n.mapValue):pe(61005,{value:n})}function rm(n){switch(ta(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ep(n);return e?16+rm(e):16;case 5:return 2*n.stringValue.length;case 6:return Xi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+rm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ca(r.fields,(o,u)=>{s+=o.length+rm(u)}),s}(n.mapValue);default:throw pe(13486,{value:n})}}function bo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Y_(n){return!!n&&"integerValue"in n}function Ih(n){return!!n&&"arrayValue"in n}function z1(n){return!!n&&"nullValue"in n}function q1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function im(n){return!!n&&"mapValue"in n}function Tp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[n0])===null||t===void 0?void 0:t.stringValue)===r0}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ca(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ux(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lx}const cx={mapValue:{fields:{[n0]:{stringValue:r0},[eu]:{arrayValue:{}}}}};function oV(n){return"nullValue"in n?nm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bo(ea.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Tp(n)?cx:{mapValue:{}}:pe(35942,{value:n})}function lV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bo(ea.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?cx:"mapValue"in n?Tp(n)?{mapValue:{}}:zs:pe(61959,{value:n})}function F1(n,e){const t=na(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function H1(n,e){const t=na(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!im(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=_t.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=lh(u):s.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());im(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];im(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ca(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new fn(lh(this.value))}}function hx(n){const e=[];return ca(n.fields,(t,r)=>{const s=new _t([t]);if(im(r)){const o=hx(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t,r,s,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new mt(e,0,ve.min(),ve.min(),ve.min(),fn.empty(),0)}static newFoundDocument(e,t,r,s){return new mt(e,1,t,ve.min(),r,s,0)}static newNoDocument(e,t){return new mt(e,2,t,ve.min(),ve.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,ve.min(),ve.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t){this.position=e,this.inclusive=t}}function G1(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?r=he.comparator(he.fromName(u.referenceValue),t.key):r=na(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ii(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function uV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{}class Ue extends fx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cV(e,t,r):t==="array-contains"?new dV(e,r):t==="in"?new _x(e,r):t==="not-in"?new mV(e,r):t==="array-contains-any"?new pV(e,r):new Ue(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hV(e,r):new fV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(na(t,this.value)):t!==null&&ta(this.value)===ta(t)&&this.matchesComparison(na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends fx{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new et(e,t)}matches(e){return nu(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function nu(n){return n.op==="and"}function X_(n){return n.op==="or"}function i0(n){return dx(n)&&nu(n)}function dx(n){for(const e of n.filters)if(e instanceof et)return!1;return!0}function W_(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+tu(n.value);if(i0(n))return n.filters.map(e=>W_(e)).join(",");{const e=n.filters.map(t=>W_(t)).join(",");return`${n.op}(${e})`}}function mx(n,e){return n instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&ii(r.value,s.value)}(n,e):n instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,h)=>o&&mx(u,s.filters[h]),!0):!1}(n,e):void pe(19439)}function px(n,e){const t=n.filters.concat(e);return et.create(t,n.op)}function gx(n){return n instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${tu(t.value)}`}(n):n instanceof et?function(t){return t.op.toString()+" {"+t.getFilters().map(gx).join(" ,")+"}"}(n):"Filter"}class cV extends Ue{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class hV extends Ue{constructor(e,t){super(e,"in",t),this.keys=yx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fV extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=yx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class dV extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ih(t)&&Ah(t.arrayValue,this.value)}}class _x extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ah(this.value.arrayValue,t)}}class mV extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ah(this.value.arrayValue,t)}}class pV extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ih(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t=null,r=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.Pe=null}}function J_(n,e=null,t=[],r=[],s=null,o=null,u=null){return new gV(n,e,t,r,s,o,u)}function Eo(n){const e=de(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>W_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tu(r)).join(",")),e.Pe=t}return e.Pe}function Gh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$1(n.startAt,e.startAt)&&$1(n.endAt,e.endAt)}function Mm(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lm(n,e){return n.filters.filter(t=>t instanceof Ue&&t.field.isEqual(e))}function K1(n,e,t){let r=nm,s=!0;for(const o of Lm(n,e)){let u=nm,h=!0;switch(o.op){case"<":case"<=":u=oV(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=nm}F1({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];F1({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function Q1(n,e,t){let r=zs,s=!0;for(const o of Lm(n,e)){let u=zs,h=!0;switch(o.op){case">=":case">":u=lV(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=zs}H1({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];H1({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t=null,r=[],s=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function vx(n,e,t,r,s,o,u,h){return new Zi(n,e,t,r,s,o,u,h)}function yu(n){return new Zi(n)}function Y1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function s0(n){return n.collectionGroup!==null}function jl(n){const e=de(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new tt(_t.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new xh(o,r))}),t.has(_t.keyField().canonicalString())||e.Te.push(new xh(_t.keyField(),r))}return e.Te}function Nn(n){const e=de(n);return e.Ie||(e.Ie=yV(e,jl(n))),e.Ie}function yV(n,e){if(n.limitType==="F")return J_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new xh(s.field,o)});const t=n.endAt?new ra(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ra(n.startAt.position,n.startAt.inclusive):null;return J_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Z_(n,e){const t=n.filters.concat([e]);return new Zi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Um(n,e,t){return new Zi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $h(n,e){return Gh(Nn(n),Nn(e))&&n.limitType===e.limitType}function bx(n){return`${Eo(Nn(n))}|lt:${n.limitType}`}function Vl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>gx(s)).join(", ")}]`),Fh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>tu(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>tu(s)).join(",")),`Target(${r})`}(Nn(n))}; limitType=${n.limitType})`}function Kh(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):he.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of jl(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,d){const p=G1(u,h,d);return u.inclusive?p<=0:p<0}(r.startAt,jl(r),s)||r.endAt&&!function(u,h,d){const p=G1(u,h,d);return u.inclusive?p>=0:p>0}(r.endAt,jl(r),s))}(n,e)}function Ex(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Tx(n){return(e,t)=>{let r=!1;for(const s of jl(n)){const o=_V(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function _V(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(o,u,h){const d=u.data.field(o),p=h.data.field(o);return d!==null&&p!==null?na(d,p):pe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ca(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return nx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=new ft(he.comparator);function Un(){return vV}const wx=new ft(he.comparator);function Jc(...n){let e=wx;for(const t of n)e=e.insert(t.key,t);return e}function Sx(n){let e=wx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zr(){return uh()}function Ax(){return uh()}function uh(){return new es(n=>n.toString(),(n,e)=>n.isEqual(e))}const bV=new ft(he.comparator),EV=new tt(he.comparator);function Re(...n){let e=EV;for(const t of n)e=e.add(t);return e}const TV=new tt(Se);function a0(){return TV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function Ix(n){return{integerValue:""+n}}function xx(n,e){return GI(e)?Ix(e):o0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this._=void 0}}function wV(n,e,t){return n instanceof ru?function(s,o){const u={fields:{[sx]:{stringValue:ix},[ox]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&bp(o)&&(o=Ep(o)),o&&(u.fields[ax]=o),{mapValue:u}}(t,e):n instanceof To?Cx(n,e):n instanceof wo?Nx(n,e):function(s,o){const u=Rx(s,o),h=X1(u)+X1(s.Ee);return Y_(u)&&Y_(s.Ee)?Ix(h):o0(s.serializer,h)}(n,e)}function SV(n,e,t){return n instanceof To?Cx(n,e):n instanceof wo?Nx(n,e):t}function Rx(n,e){return n instanceof iu?function(r){return Y_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ru extends wp{}class To extends wp{constructor(e){super(),this.elements=e}}function Cx(n,e){const t=Dx(e);for(const r of n.elements)t.some(s=>ii(s,r))||t.push(r);return{arrayValue:{values:t}}}class wo extends wp{constructor(e){super(),this.elements=e}}function Nx(n,e){let t=Dx(e);for(const r of n.elements)t=t.filter(s=>!ii(s,r));return{arrayValue:{values:t}}}class iu extends wp{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function X1(n){return yt(n.integerValue||n.doubleValue)}function Dx(n){return Ih(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.field=e,this.transform=t}}function AV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof To&&s instanceof To||r instanceof wo&&s instanceof wo?Ql(r.elements,s.elements,ii):r instanceof iu&&s instanceof iu?ii(r.Ee,s.Ee):r instanceof ru&&s instanceof ru}(n.transform,e.transform)}class IV{constructor(e,t){this.version=e,this.transformResults=t}}class vt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Sp{}function Ox(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vu(n.key,vt.none()):new _u(n.key,n.data,vt.none());{const t=n.data,r=fn.empty();let s=new tt(_t.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new ts(n.key,r,new Ln(s.toArray()),vt.none())}}function xV(n,e,t){n instanceof _u?function(s,o,u){const h=s.value.clone(),d=J1(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ts?function(s,o,u){if(!sm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=J1(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(Px(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function ch(n,e,t,r){return n instanceof _u?function(o,u,h,d){if(!sm(o.precondition,u))return h;const p=o.value.clone(),y=Z1(o.fieldTransforms,d,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ts?function(o,u,h,d){if(!sm(o.precondition,u))return h;const p=Z1(o.fieldTransforms,d,u),y=u.data;return y.setAll(Px(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,u,h){return sm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function RV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=Rx(r.transform,s||null);o!=null&&(t===null&&(t=fn.empty()),t.set(r.field,o))}return t||null}function W1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ql(r,s,(o,u)=>AV(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _u extends Sp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ts extends Sp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Px(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function J1(n,e,t){const r=new Map;ye(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);r.set(o.field,SV(u,h,t[s]))}return r}function Z1(n,e,t){const r=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);r.set(s.field,wV(o,u,e))}return r}class vu extends Sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l0 extends Sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&xV(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ax();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const d=Ox(u,h);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(t,r)=>W1(t,r))&&Ql(this.baseMutations,e.baseMutations,(t,r)=>W1(t,r))}}class c0{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return bV}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new c0(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Fe;function kx(n){switch(n){case J.OK:return pe(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function Vx(n){if(n===void 0)return Nt("GRPC error has no .code"),J.UNKNOWN;switch(n){case Lt.OK:return J.OK;case Lt.CANCELLED:return J.CANCELLED;case Lt.UNKNOWN:return J.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return J.INTERNAL;case Lt.UNAVAILABLE:return J.UNAVAILABLE;case Lt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Lt.NOT_FOUND:return J.NOT_FOUND;case Lt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Lt.ABORTED:return J.ABORTED;case Lt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Lt.DATA_LOSS:return J.DATA_LOSS;default:return pe(39323,{code:n})}}(Fe=Lt||(Lt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new Gs([4294967295,4294967295],0);function eS(n){const e=Kv().encode(n),t=new RI;return t.update(e),new Uint8Array(t.digest())}function tS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gs([t,r],0),new Gs([s,o],0)]}class f0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zc(`Invalid padding: ${t}`);if(r<0)throw new Zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gs.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Gs.fromNumber(r)));return s.compare(NV)===1&&(s=new Gs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=eS(e),[r,s]=tS(t);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new f0(o,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.fe===0)return;const t=eS(e),[r,s]=tS(t);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Xh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yh(ve.min(),s,new ft(Se),Un(),Re())}}class Xh{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xh(r,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class Mx{constructor(e,t){this.targetId=e,this.De=t}}class Lx{constructor(e,t,r=At.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class nS{constructor(){this.ve=0,this.Ce=rS(),this.Fe=At.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),t=Re(),r=Re();return this.Ce.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:pe(38017,{changeType:o})}}),new Xh(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=rS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class DV{constructor(e){this.We=e,this.Ge=new Map,this.ze=Un(),this.je=qd(),this.Je=qd(),this.He=new ft(Se)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const o=s.target;if(Mm(o))if(r===0){const u=new he(o.path);this.Xe(t,u,mt.newNoDocument(u,ve.min()))}else ye(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const h=this._t(e),d=h?this.ut(h,e,u):1;if(d!==0){this.rt(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=Xi(r).toUint8Array()}catch(d){if(d instanceof rx)return Jn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new f0(u,s,o)}catch(d){return Jn(d instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const u=this.We.lt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,o,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((o,u)=>{const h=this.st(u);if(h){if(o.current&&Mm(h.target)){const d=new he(h.target.path);this.Tt(d).has(u)||this.It(u,d)||this.Xe(u,d,mt.newNoDocument(d,e))}o.Ne&&(t.set(u,o.Le()),o.ke())}});let r=Re();this.Je.forEach((o,u)=>{let h=!0;u.forEachWhile(d=>{const p=this.st(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.ze.forEach((o,u)=>u.setReadTime(e));const s=new Yh(e,t,this.He,this.ze,r);return this.ze=Un(),this.je=qd(),this.Je=qd(),this.He=new ft(Se),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new nS,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new tt(Se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new tt(Se),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nS),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function qd(){return new ft(he.comparator)}function rS(){return new ft(he.comparator)}const OV={asc:"ASCENDING",desc:"DESCENDING"},PV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kV={and:"AND",or:"OR"};class VV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ev(n,e){return n.useProto3Json||Fh(e)?e:{value:e}}function su(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ux(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function MV(n,e){return su(n,e.toTimestamp())}function Dt(n){return ye(!!n,49232),ve.fromTimestamp(function(t){const r=Yi(t);return new Xe(r.seconds,r.nanos)}(n))}function d0(n,e){return tv(n,e).canonicalString()}function tv(n,e){const t=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function jx(n){const e=Le.fromString(n);return ye(Yx(e),10190,{key:e.toString()}),e}function Rh(n,e){return d0(n.databaseId,e.path)}function ti(n,e){const t=jx(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(qx(t))}function Bx(n,e){return d0(n.databaseId,e)}function zx(n){const e=jx(n);return e.length===4?Le.emptyPath():qx(e)}function nv(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qx(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iS(n,e,t){return{name:Rh(n,e),fields:t.value.mapValue.fields}}function Fx(n,e,t){const r=ti(n,e.name),s=Dt(e.updateTime),o=e.createTime?Dt(e.createTime):ve.min(),u=new fn({mapValue:{fields:e.fields}}),h=mt.newFoundDocument(r,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function LV(n,e){return"found"in e?function(r,s){ye(!!s.found,43571),s.found.name,s.found.updateTime;const o=ti(r,s.found.name),u=Dt(s.found.updateTime),h=s.found.createTime?Dt(s.found.createTime):ve.min(),d=new fn({mapValue:{fields:s.found.fields}});return mt.newFoundDocument(o,u,h,d)}(n,e):"missing"in e?function(r,s){ye(!!s.missing,3894),ye(!!s.readTime,22933);const o=ti(r,s.missing),u=Dt(s.readTime);return mt.newNoDocument(o,u)}(n,e):pe(7234,{result:e})}function UV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(ye(y===void 0||typeof y=="string",58123),At.fromBase64String(y||"")):(ye(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),At.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=p.code===void 0?J.UNKNOWN:Vx(p.code);return new ae(y,p.message||"")}(u);t=new Lx(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ti(n,r.document.name),o=Dt(r.document.updateTime),u=r.document.createTime?Dt(r.document.createTime):ve.min(),h=new fn({mapValue:{fields:r.document.fields}}),d=mt.newFoundDocument(s,o,u,h),p=r.targetIds||[],y=r.removedTargetIds||[];t=new am(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ti(n,r.document),o=r.readTime?Dt(r.readTime):ve.min(),u=mt.newNoDocument(s,o),h=r.removedTargetIds||[];t=new am([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ti(n,r.document),o=r.removedTargetIds||[];t=new am([],o,s,null)}else{if(!("filter"in e))return pe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new CV(s,o),h=r.targetId;t=new Mx(h,u)}}return t}function Ch(n,e){let t;if(e instanceof _u)t={update:iS(n,e.key,e.value)};else if(e instanceof vu)t={delete:Rh(n,e.key)};else if(e instanceof ts)t={update:iS(n,e.key,e.data),updateMask:HV(e.fieldMask)};else{if(!(e instanceof l0))return pe(16599,{Rt:e.type});t={verify:Rh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof ru)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof To)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof wo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof iu)return{fieldPath:u.field.canonicalString(),increment:h.Ee};throw pe(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:MV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)}(n,e.precondition)),t}function rv(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?vt.updateTime(Dt(o.updateTime)):o.exists!==void 0?vt.exists(o.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let d=null;if("setToServerValue"in h)ye(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new ru;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];d=new To(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];d=new wo(y)}else"increment"in h?d=new iu(u,h.increment):pe(16584,{proto:h});const p=_t.fromServerFormat(h.fieldPath);return new Qh(p,d)}(n,s)):[];if(e.update){e.update.name;const s=ti(n,e.update.name),o=new fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const p=d.fieldPaths||[];return new Ln(p.map(y=>_t.fromServerFormat(y)))}(e.updateMask);return new ts(s,o,u,t,r)}return new _u(s,o,t,r)}if(e.delete){const s=ti(n,e.delete);return new vu(s,t)}if(e.verify){const s=ti(n,e.verify);return new l0(s,t)}return pe(1463,{proto:e})}function jV(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map(t=>function(s,o){let u=s.updateTime?Dt(s.updateTime):Dt(o);return u.isEqual(ve.min())&&(u=Dt(o)),new IV(u,s.transformResults||[])}(t,e))):[]}function Hx(n,e){return{documents:[Bx(n,e.path)]}}function Gx(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Bx(n,s);const o=function(p){if(p.length!==0)return Qx(et.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:Ml(E.field),direction:zV(E.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=ev(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:s}}function $x(n){let e=zx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ye(r===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const E=Kx(v);return E instanceof et&&i0(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(E=>function(R){return new xh(Ll(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,Fh(E)?null:E}(t.limit));let d=null;t.startAt&&(d=function(v){const E=!!v.before,A=v.values||[];return new ra(A,E)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const E=!v.before,A=v.values||[];return new ra(A,E)}(t.endAt)),vx(e,s,u,o,h,"F",d,p)}function BV(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ll(t.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ll(t.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ll(t.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ll(t.unaryFilter.field);return Ue.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ue.create(Ll(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return et.create(t.compositeFilter.filters.map(r=>Kx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(t.compositeFilter.op))}(n):pe(30097,{filter:n})}function zV(n){return OV[n]}function qV(n){return PV[n]}function FV(n){return kV[n]}function Ml(n){return{fieldPath:n.canonicalString()}}function Ll(n){return _t.fromServerFormat(n.fieldPath)}function Qx(n){return n instanceof Ue?function(t){if(t.op==="=="){if(q1(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(z1(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(q1(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(z1(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:qV(t.op),value:t.value}}}(n):n instanceof et?function(t){const r=t.getFilters().map(s=>Qx(s));return r.length===1?r[0]:{compositeFilter:{op:FV(t.op),filters:r}}}(n):pe(54877,{filter:n})}function HV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,r,s,o=ve.min(),u=ve.min(),h=At.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.gt=e}}function GV(n,e){let t;if(e.document)t=Fx(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),s=Ao(e.noDocument.readTime);t=mt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=he.fromSegments(e.unknownDocument.path),s=Ao(e.unknownDocument.version);t=mt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const o=new Xe(s[0],s[1]);return ve.fromTimestamp(o)}(e.readTime)),t}function sS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,u){return{name:Rh(o,u.key),fields:u.data.value.mapValue.fields,updateTime:su(o,u.version.toTimestamp()),createTime:su(o,u.createTime.toTimestamp())}}(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:So(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:So(e.version)}}return r}function jm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function So(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ao(n){const e=new Xe(n.seconds,n.nanoseconds);return ve.fromTimestamp(e)}function io(n,e){const t=(e.baseMutations||[]).map(o=>rv(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>rv(n.gt,o)),s=Xe.fromMillis(e.localWriteTimeMs);return new u0(e.batchId,s,t,r)}function eh(n){const e=Ao(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ao(n.lastLimboFreeSnapshotVersion):ve.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){const u=o.documents.length;return ye(u===1,1966,{count:u}),Nn(yu(zx(o.documents[0])))}(n.query):function(o){return Nn($x(o))}(n.query),new ji(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,At.fromBase64String(n.resumeToken))}function Wx(n,e){const t=So(e.snapshotVersion),r=So(e.lastLimboFreeSnapshotVersion);let s;s=Mm(e.target)?Hx(n.gt,e.target):Gx(n.gt,e.target).Vt;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function m0(n){const e=$x({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Um(e,e.limit,"L"):e}function h_(n,e){return new h0(e.largestBatchId,rv(n.gt,e.overlayMutation))}function aS(n,e){const t=e.path.lastSegment();return[n,bn(e.path.popLast()),t]}function oS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:So(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{getBundleMetadata(e,t){return lS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ao(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return lS(e).put(function(s){return{bundleId:s.id,createTime:So(Dt(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return uS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:m0(o.bundledQuery),readTime:Ao(o.readTime)}}(r)})}saveNamedQuery(e,t){return uS(e).put(function(s){return{name:s.name,readTime:So(Dt(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function lS(n){return Qt(n,yp)}function uS(n){return Qt(n,_p)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new Ap(e,r)}getOverlay(e,t){return qc(e).get(aS(this.userId,t)).next(r=>r?h_(this.serializer,r):null)}getOverlays(e,t){const r=Zr();return $.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((o,u)=>{const h=new h0(t,u);s.push(this.wt(e,h))}),$.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(bn(u.getCollectionPath())));const o=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(qc(e).Y($_,h))}),$.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Zr(),o=bn(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qc(e).j($_,u).next(h=>{for(const d of h){const p=h_(this.serializer,d);s.set(p.getKey(),p)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const o=Zr();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qc(e).X({index:WI,range:h},(d,p,y)=>{const v=h_(this.serializer,p);o.size()<s||v.largestBatchId===u?(o.set(v.getKey(),v),u=v.largestBatchId):y.done()}).next(()=>o)}wt(e,t){return qc(e).put(function(s,o,u){const[h,d,p]=aS(o,u.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ch(s.gt,u.mutation)}}(this.serializer,this.userId,t))}}function qc(n){return Qt(n,vp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{St(e){return Qt(e,e0)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{const r=t?.value;return r?At.fromUint8Array(r):At.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(yt(e.integerValue));else if("doubleValue"in e){const r=yt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),bh(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Yi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Xi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?ux(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Tp(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):pe(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const s of Object.keys(r))this.xt(s,t),this.Dt(r[s],t)}Lt(e,t){var r,s;const o=e.fields||{};this.Ct(t,53);const u=eu,h=((s=(r=o[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(yt(h)),this.xt(u,t),this.Dt(o[u],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const s of r)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),he.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}so.Ut=new so;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=255;function QV(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function cS(n){const e=64-function(r){let s=0;for(let o=0;o<8;++o){const u=QV(255&r[o]);if(s+=u,u!==8)break}return s}(n);return Math.ceil(e/8)}class YV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const s=t.codePointAt(0);this.Wt(240|s>>>18),this.Wt(128|63&s>>>12),this.Wt(128|63&s>>>6),this.Wt(128|63&s)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const s=t.codePointAt(0);this.jt(240|s>>>18),this.jt(128|63&s>>>12),this.jt(128|63&s>>>6),this.jt(128|63&s)}}this.Jt()}Zt(e){const t=this.Xt(e),r=cS(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}tn(e){const t=this.Xt(e),r=cS(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}nn(){this.rn(Nl),this.rn(255)}sn(){this._n(Nl),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===Nl?(this.rn(Nl),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Nl?(this._n(Nl),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class XV{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class WV{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Fc{constructor(){this.un=new YV,this.cn=new XV(this.un),this.ln=new WV(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,r,s){this.Pn=e,this.Tn=t,this.In=r,this.dn=s}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ao(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:om(this.In),directionalValue:om(this.dn),orderedDocumentKey:om(t),documentKey:r.path.toArray()}}Rn(e,t,r){const s=this.An(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ps(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=hS(n.In,e.In),t!==0?t:(t=hS(n.dn,e.dn),t!==0?t:he.comparator(n.Tn,e.Tn)))}function hS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function om(n){return dI()?function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r}(n):n}function fS(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(n)}class dS{constructor(e){this.Vn=new tt((t,r)=>_t.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(ye(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=F_(e);if(t!==void 0&&!this.yn(t))return!1;const r=to(e);let s=new Set,o=0,u=0;for(;o<r.length&&this.yn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){const h=this.Vn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=r[o];if(!this.wn(h,d)||!this.Sn(this.mn[u++],d))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.mn.length||!this.Sn(this.mn[u++],h))return!1}return!0}bn(){if(this.gn)return null;let e=new tt(_t.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Zd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Zd(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Zd(r.field,r.dir==="asc"?0:1)));return new Dm(Dm.UNKNOWN_ID,this.collectionId,t,vh.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(n){var e,t;if(ye(n instanceof Ue||n instanceof et,20012),n instanceof Ue){if(n instanceof _x){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Ue.create(n.field,"==",o)))||[];return et.create(s,"or")}return n}const r=n.filters.map(s=>Jx(s));return et.create(r,n.op)}function JV(n){if(n.getFilters().length===0)return[];const e=av(Jx(n));return ye(Zx(e),7391),iv(e)||sv(e)?[e]:e.getFilters()}function iv(n){return n instanceof Ue}function sv(n){return n instanceof et&&i0(n)}function Zx(n){return iv(n)||sv(n)||function(t){if(t instanceof et&&X_(t)){for(const r of t.getFilters())if(!iv(r)&&!sv(r))return!1;return!0}return!1}(n)}function av(n){if(ye(n instanceof Ue||n instanceof et,34018),n instanceof Ue)return n;if(n.filters.length===1)return av(n.filters[0]);const e=n.filters.map(r=>av(r));let t=et.create(e,n.op);return t=Bm(t),Zx(t)?t:(ye(t instanceof et,64498),ye(nu(t),40251),ye(t.filters.length>1,57927),t.filters.reduce((r,s)=>p0(r,s)))}function p0(n,e){let t;return ye(n instanceof Ue||n instanceof et,38388),ye(e instanceof Ue||e instanceof et,25473),t=n instanceof Ue?e instanceof Ue?function(s,o){return et.create([s,o],"and")}(n,e):mS(n,e):e instanceof Ue?mS(e,n):function(s,o){if(ye(s.filters.length>0&&o.filters.length>0,48005),nu(s)&&nu(o))return px(s,o.getFilters());const u=X_(s)?s:o,h=X_(s)?o:s,d=u.filters.map(p=>p0(p,h));return et.create(d,"or")}(n,e),Bm(t)}function mS(n,e){if(nu(e))return px(e,n.getFilters());{const t=e.filters.map(r=>p0(n,r));return et.create(t,"or")}}function Bm(n){if(ye(n instanceof Ue||n instanceof et,11850),n instanceof Ue)return n;const e=n.getFilters();if(e.length===1)return Bm(e[0]);if(dx(n))return n;const t=e.map(s=>Bm(s)),r=[];return t.forEach(s=>{s instanceof Ue?r.push(s):s instanceof et&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:et.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.Dn=new g0}addToCollectionParentIndex(e,t){return this.Dn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Zn.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class g0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new tt(Le.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="IndexedDbIndexManager",Fd=new Uint8Array(0);class e3{constructor(e,t){this.databaseId=t,this.vn=new g0,this.Cn=new es(r=>Eo(r),(r,s)=>Gh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const o={collectionId:r,parent:bn(s)};return gS(e).put(o)}return $.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[MI(t),""],!1,!0);return gS(e).j(s).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Jr(u.parent))}return r})}addFieldIndex(e,t){const r=Hc(e),s=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete s.indexId;const o=r.add(s);if(t.indexState){const u=Ol(e);return o.next(h=>{u.put(oS(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Hc(e),s=Ol(e),o=Dl(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Hc(e),r=Dl(e),s=Ol(e);return t.Y().next(()=>r.Y()).next(()=>s.Y())}createTargetIndexes(e,t){return $.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const o=new dS(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Dl(e);let s=!0;const o=new Map;return $.forEach(this.Fn(t),u=>this.Mn(e,u).next(h=>{s&&(s=!!h),o.set(u,h)})).next(()=>{if(s){let u=Re();const h=[];return $.forEach(o,(d,p)=>{le(pS,`Using index ${function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(d)} to execute ${Eo(t)}`);const y=function(B,X){const ee=F_(X);if(ee===void 0)return null;for(const te of Lm(B,ee.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(p,d),v=function(B,X){const ee=new Map;for(const te of to(X))for(const C of Lm(B,te.fieldPath))switch(C.op){case"==":case"in":ee.set(te.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ee.set(te.fieldPath.canonicalString(),C.value),Array.from(ee.values())}return null}(p,d),E=function(B,X){const ee=[];let te=!0;for(const C of to(X)){const x=C.kind===0?K1(B,C.fieldPath,B.startAt):Q1(B,C.fieldPath,B.startAt);ee.push(x.value),te&&(te=x.inclusive)}return new ra(ee,te)}(p,d),A=function(B,X){const ee=[];let te=!0;for(const C of to(X)){const x=C.kind===0?Q1(B,C.fieldPath,B.endAt):K1(B,C.fieldPath,B.endAt);ee.push(x.value),te&&(te=x.inclusive)}return new ra(ee,te)}(p,d),R=this.xn(d,p,E),P=this.xn(d,p,A),D=this.On(d,p,v),V=this.Nn(d.indexId,y,R,E.inclusive,P,A.inclusive,D);return $.forEach(V,F=>r.H(F,t.limit).next(B=>{B.forEach(X=>{const ee=he.fromSegments(X.documentKey);u.has(ee)||(u=u.add(ee),h.push(ee))})}))}).next(()=>h)}return $.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=JV(et.create(e.filters,"and")).map(r=>J_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,s,o,u,h){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),p=d/(t!=null?t.length:1),y=[];for(let v=0;v<d;++v){const E=t?this.Bn(t[v/p]):Fd,A=this.Ln(e,E,r[v%p],s),R=this.kn(e,E,o[v%p],u),P=h.map(D=>this.Ln(e,E,D,!0));y.push(...this.createRange(A,R,P))}return y}Ln(e,t,r,s){const o=new ao(e,he.empty(),t,r);return s?o:o.En()}kn(e,t,r,s){const o=new ao(e,he.empty(),t,r);return s?o.En():o}Mn(e,t){const r=new dS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let u=null;for(const h of o)r.pn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const s=this.Fn(t);return $.forEach(s,o=>this.Mn(e,o).next(u=>{u?r!==0&&u.fields.length<function(d){let p=new tt(_t.comparator),y=!1;for(const v of d.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?y=!0:p=p.add(E.field));for(const v of d.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&s.length>1&&r===2?1:r)}qn(e,t){const r=new Fc;for(const s of to(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=r.hn(s.kind);so.Ut.bt(o,u)}return r.an()}Bn(e){const t=new Fc;return so.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Fc;return so.Ut.bt(bo(this.databaseId,t),r.hn(function(o){const u=to(o);return u.length===0?0:u[u.length-1].kind}(e))),r.an()}On(e,t,r){if(r===null)return[];let s=[];s.push(new Fc);let o=0;for(const u of to(e)){const h=r[o++];for(const d of s)if(this.$n(t,u.fieldPath)&&Ih(h))s=this.Un(s,u,h);else{const p=d.hn(u.kind);so.Ut.bt(h,p)}}return this.Kn(s)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const s=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of s){const d=new Fc;d.seed(h.an()),so.Ut.bt(u,d.hn(t.kind)),o.push(d)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof Ue&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Hc(e),s=Ol(e);return(t?r.j(G_,IDBKeyRange.bound(t,t)):r.j()).next(o=>{const u=[];return $.forEach(o,h=>s.get([h.indexId,this.uid]).next(d=>{u.push(function(y,v){const E=v?new vh(v.sequenceNumber,new Zn(Ao(v.readTime),new he(Jr(v.documentKey)),v.largestBatchId)):vh.empty(),A=y.fields.map(([R,P])=>new Zd(_t.fromServerFormat(R),P));return new Dm(y.indexId,y.collectionGroup,A,E)}(h,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Se(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Hc(e),o=Ol(e);return this.Wn(e).next(u=>s.j(G_,IDBKeyRange.bound(t,t)).next(h=>$.forEach(h,d=>o.put(oS(d.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,(s,o)=>{const u=r.get(s.collectionGroup);return(u?$.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),$.forEach(h,d=>this.Gn(e,s,d).next(p=>{const y=this.zn(o,d);return p.isEqual(y)?$.resolve():this.jn(e,o,d,p,y)}))))})}Jn(e,t,r,s){return Dl(e).put(s.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,s){return Dl(e).delete(s.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const s=Dl(e);let o=new tt(Ps);return s.X({index:XI,range:IDBKeyRange.only([r.indexId,this.uid,om(this.Qn(r,t))])},(u,h)=>{o=o.add(new ao(r.indexId,t,fS(h.arrayValue),fS(h.directionalValue)))}).next(()=>o)}zn(e,t){let r=new tt(Ps);const s=this.qn(t,e);if(s==null)return r;const o=F_(t);if(o!=null){const u=e.data.field(o.fieldPath);if(Ih(u))for(const h of u.arrayValue.values||[])r=r.add(new ao(t.indexId,e.key,this.Bn(h),s))}else r=r.add(new ao(t.indexId,e.key,Fd,s));return r}jn(e,t,r,s,o){le(pS,"Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,v,E){const A=d.getIterator(),R=p.getIterator();let P=Cl(A),D=Cl(R);for(;P||D;){let V=!1,F=!1;if(P&&D){const B=y(P,D);B<0?F=!0:B>0&&(V=!0)}else P!=null?F=!0:V=!0;V?(v(D),D=Cl(R)):F?(E(P),P=Cl(A)):(P=Cl(A),D=Cl(R))}}(s,o,Ps,h=>{u.push(this.Jn(e,t,r,h))},h=>{u.push(this.Hn(e,t,r,h))}),$.waitFor(u)}Wn(e){let t=1;return Ol(e).X({index:YI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Ps(u,h)).filter((u,h,d)=>!h||Ps(u,d[h-1])!==0);const s=[];s.push(e);for(const u of r){const h=Ps(u,e),d=Ps(u,t);if(h===0)s[0]=e.En();else if(h>0&&d<0)s.push(u),s.push(u.En());else if(d>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Yn(s[u],s[u+1]))return[];const h=s[u].Rn(this.uid,Fd,he.empty()),d=s[u+1].Rn(this.uid,Fd,he.empty());o.push(IDBKeyRange.bound(h,d))}return o}Yn(e,t){return Ps(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yS)}getMinOffset(e,t){return $.mapArray(this.Fn(t),r=>this.Mn(e,r).next(s=>s||pe(44426))).next(yS)}}function gS(n){return Qt(n,wh)}function Dl(n){return Qt(n,oh)}function Hc(n){return Qt(n,Zv)}function Ol(n){return Qt(n,ah)}function yS(n){ye(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Xv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Zn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e2=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(n,e,t){const r=n.store(Ar),s=n.store(Xl),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=r.X({range:u},(y,v,E)=>(h++,E.delete()));o.push(d.next(()=>{ye(h===1,47070,{batchId:t.batchId})}));const p=[];for(const y of t.mutations){const v=$I(e,y.key.path,t.batchId);o.push(s.delete(v)),p.push(y.key)}return $.waitFor(o).next(()=>p)}function zm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(e2,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class Ip{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static yt(e,t,r,s){ye(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Ip(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).X({index:lo,range:r},(s,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const o=Ul(e),u=ks(e);return u.add({}).next(h=>{ye(typeof h=="number",49019);const d=new u0(h,t,r,s),p=function(A,R,P){const D=P.baseMutations.map(F=>Ch(A.gt,F)),V=P.mutations.map(F=>Ch(A.gt,F));return{userId:R,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:D,mutations:V}}(this.serializer,this.userId,d),y=[];let v=new tt((E,A)=>Se(E.canonicalString(),A.canonicalString()));for(const E of s){const A=$I(this.userId,E.key.path,h);v=v.add(E.key.path.popLast()),y.push(u.put(p)),y.push(o.put(A,kk))}return v.forEach(E=>{y.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.Zn[h]=d.keys()}),$.waitFor(y).next(()=>d)})}lookupMutationBatch(e,t){return ks(e).get(t).next(r=>r?(ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),io(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?$.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Zn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ks(e).X({index:lo,range:s},(u,h,d)=>{h.userId===this.userId&&(ye(h.batchId>=r,47524,{er:r}),o=io(this.serializer,h)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=$s;return ks(e).X({index:lo,range:t,reverse:!0},(s,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,$s],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).j(lo,t).next(r=>r.map(s=>io(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=em(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return Ul(e).X({range:s},(u,h,d)=>{const[p,y,v]=u,E=Jr(y);if(p===this.userId&&t.path.isEqual(E))return ks(e).get(v).next(A=>{if(!A)throw pe(61480,{tr:u,batchId:v});ye(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:v}),o.push(io(this.serializer,A))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(Se);const s=[];return t.forEach(o=>{const u=em(this.userId,o.path),h=IDBKeyRange.lowerBound(u),d=Ul(e).X({range:h},(p,y,v)=>{const[E,A,R]=p,P=Jr(A);E===this.userId&&o.path.isEqual(P)?r=r.add(R):v.done()});s.push(d)}),$.waitFor(s).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=em(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new tt(Se);return Ul(e).X({range:u},(d,p,y)=>{const[v,E,A]=d,R=Jr(E);v===this.userId&&r.isPrefixOf(R)?R.length===s&&(h=h.add(A)):y.done()}).next(()=>this.nr(e,h))}nr(e,t){const r=[],s=[];return t.forEach(o=>{s.push(ks(e).get(o).next(u=>{if(u===null)throw pe(35274,{batchId:o});ye(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:o}),r.push(io(this.serializer,u))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return t2(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return Ul(e).X({range:r},(o,u,h)=>{if(o[0]===this.userId){const d=Jr(o[1]);s.push(d)}else h.done()}).next(()=>{ye(s.length===0,56720,{ir:s.map(o=>o.canonicalString())})})})}containsKey(e,t){return n2(e,this.userId,t)}sr(e){return r2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:$s,lastStreamToken:""})}}function n2(n,e,t){const r=em(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Ul(n).X({range:o,Z:!0},(h,d,p)=>{const[y,v,E]=h;y===e&&v===s&&(u=!0),p.done()}).next(()=>u)}function ks(n){return Qt(n,Ar)}function Ul(n){return Qt(n,Xl)}function r2(n){return Qt(n,Eh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Io(0)}static ur(){return new Io(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{const r=new Io(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>ve.fromTimestamp(new Xe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.lr(e,s)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Pl(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(ye(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let s=0;const o=[];return Pl(e).X((u,h)=>{const d=eh(h);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))}).next(()=>$.waitFor(o)).next(()=>s)}forEachTarget(e,t){return Pl(e).X((r,s)=>{const o=eh(s);t(o)})}cr(e){return vS(e).get(km).next(t=>(ye(t!==null,2888),t))}lr(e,t){return vS(e).put(km,t)}hr(e,t){return Pl(e).put(Wx(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Pl(e).X({range:s,index:QI},(u,h,d)=>{const p=eh(h);Gh(t,p.target)&&(o=p,d.done())}).next(()=>o)}addMatchingKeys(e,t,r){const s=[],o=Ls(e);return t.forEach(u=>{const h=bn(u.path);s.push(o.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),$.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ls(e);return $.forEach(t,o=>{const u=bn(o.path);return $.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Ls(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ls(e);let o=Re();return s.X({range:r,Z:!0},(u,h,d)=>{const p=Jr(u[1]),y=new he(p);o=o.add(y)}).next(()=>o)}containsKey(e,t){const r=bn(t.path),s=IDBKeyRange.bound([r],[MI(r)],!1,!0);let o=0;return Ls(e).X({index:Jv,Z:!0,range:s},([u,h],d,p)=>{u!==0&&(o++,p.done())}).next(()=>o>0)}Et(e,t){return Pl(e).get(t).next(r=>r?eh(r):null)}}function Pl(n){return Qt(n,Wl)}function vS(n){return Qt(n,mo)}function Ls(n){return Qt(n,Jl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="LruGarbageCollector",n3=1048576;function ES([n,e],[t,r]){const s=Se(n,t);return s===0?Se(e,r):s}class r3{constructor(e){this.Tr=e,this.buffer=new tt(ES),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ES(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class i2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(bS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?le(bS,"Ignoring IndexedDB error during garbage collection: ",t):await la(t)}await this.Rr(3e5)})}}class i3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Mn.ue);const r=new r3(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(_S)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_S):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,o,u,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,u=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),kl()<=Me.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function s2(n,e){return new i3(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.db=e,this.garbageCollector=s2(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,s)=>t(s))}addReference(e,t,r){return Hd(e,r)}removeReference(e,t,r){return Hd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hd(e,t)}Sr(e,t){return function(s,o){let u=!1;return r2(s).ee(h=>n2(s,h,o).next(d=>(d&&(u=!0),$.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.wr(e,(u,h)=>{if(h<=t){const d=this.Sr(e,u).next(p=>{if(!p)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,ve.min()),Ls(e).delete(function(v){return[0,bn(v.path)]}(u))))});s.push(d)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hd(e,t)}wr(e,t){const r=Ls(e);let s,o=Mn.ue;return r.X({index:Jv},([u,h],{path:d,sequenceNumber:p})=>{u===0?(o!==Mn.ue&&t(new he(Jr(s)),o),o=p,s=d):o=Mn.ue}).next(()=>{o!==Mn.ue&&t(new he(Jr(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hd(n,e){return Ls(n).put(function(r,s){return{targetId:0,path:bn(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.changes=new es(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wa(e).put(r)}removeEntry(e,t,r){return Wa(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],jm(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=mt.newInvalidDocument(t);return Wa(e).X({index:tm,range:IDBKeyRange.only(Gc(t))},(s,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return Wa(e).X({index:tm,range:IDBKeyRange.only(Gc(t))},(s,o)=>{r={document:this.Dr(t,o),size:zm(o)}}).next(()=>r)}getEntries(e,t){let r=Un();return this.Cr(e,t,(s,o)=>{const u=this.Dr(s,o);r=r.insert(s,u)}).next(()=>r)}Fr(e,t){let r=Un(),s=new ft(he.comparator);return this.Cr(e,t,(o,u)=>{const h=this.Dr(o,u);r=r.insert(o,h),s=s.insert(o,zm(u))}).next(()=>({documents:r,Mr:s}))}Cr(e,t,r){if(t.isEmpty())return $.resolve();let s=new tt(SS);t.forEach(d=>s=s.add(d));const o=IDBKeyRange.bound(Gc(s.first()),Gc(s.last())),u=s.getIterator();let h=u.getNext();return Wa(e).X({index:tm,range:o},(d,p,y)=>{const v=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&SS(h,v)<0;)r(h,null),h=u.getNext();h&&h.isEqual(v)&&(r(h,p),h=u.hasNext()?u.getNext():null),h?y.G(Gc(h)):y.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),jm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wa(e).j(IDBKeyRange.bound(h,d,!0)).next(p=>{o?.incrementDocumentReadCount(p.length);let y=Un();for(const v of p){const E=this.Dr(he.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(Kh(t,E)||s.has(E.key))&&(y=y.insert(E.key,E))}return y})}getAllFromCollectionGroup(e,t,r,s){let o=Un();const u=wS(t,r),h=wS(t,Zn.max());return Wa(e).X({index:KI,range:IDBKeyRange.bound(u,h,!0)},(d,p,y)=>{const v=this.Dr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(v.key,v),o.size===s&&y.done()}).next(()=>o)}newChangeBuffer(e){return new o3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TS(e).get(H_).next(t=>(ye(!!t,20021),t))}br(e,t){return TS(e).put(H_,t)}Dr(e,t){if(t){const r=GV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return mt.newInvalidDocument(e)}}function o2(n){return new a3(n)}class o3 extends a2{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new es(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new tt((o,u)=>Se(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,h.readTime)),u.isValidDocument()){const d=sS(this.Or.serializer,u);s=s.add(o.path.popLast());const p=zm(d);r+=p-h.size,t.push(this.Or.addEntry(e,o,d))}else if(r-=h.size,this.trackRemovals){const d=sS(this.Or.serializer,u.convertToNoDocument(ve.min()));t.push(this.Or.addEntry(e,o,d))}}),s.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:s})=>(s.forEach((o,u)=>{this.Nr.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function TS(n){return Qt(n,Th)}function Wa(n){return Qt(n,Pm)}function Gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wS(n,e){const t=e.documentKey.path.toArray();return[n,jm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SS(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=Se(t[o],r[o]),s)return s;return s=Se(t.length,r.length),s||(s=Se(t[t.length-2],r[r.length-2]),s||Se(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ch(r.mutation,s,Ln.empty(),Xe.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Re()){const s=Zr();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let u=Jc();return o.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Zr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Re()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let o=Un();const u=uh(),h=function(){return uh()}();return t.forEach((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof ts)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),ch(y.mutation,p,y.mutation.getFieldMask(),Xe.now())):u.set(p.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var v;return h.set(p,new l3(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=uh();let s=new ft((u,h)=>u-h),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let y=r.get(d)||Ln.empty();y=h.applyToLocalView(p,y),r.set(d,y);const v=(s.get(h.batchId)||Re()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=Ax();y.forEach(E=>{if(!o.has(E)){const A=Ox(t.get(E),r.get(E));A!==null&&v.set(E,A),o=o.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return $.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return he.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):s0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):$.resolve(Zr());let h=Yl,d=o;return u.next(p=>$.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?$.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{d=d.insert(y,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Re())).next(y=>({batchId:h,changes:Sx(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let s=Jc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let u=Jc();return this.indexManager.getCollectionParents(e,o).next(h=>$.forEach(h,d=>{const p=function(v,E){return new Zi(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(y=>{y.forEach((v,E)=>{u=u.insert(v,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(u=>{o.forEach((d,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,mt.newInvalidDocument(y)))});let h=Jc();return u.forEach((d,p)=>{const y=o.get(d);y!==void 0&&ch(y.mutation,p,Ln.empty(),Xe.now()),Kh(t,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return $.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Dt(s.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:m0(s.bundledQuery),readTime:Dt(s.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.overlays=new ft(he.comparator),this.kr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zr();return $.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.wt(e,t,o)}),$.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const s=Zr(),o=t.length+1,u=new he(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new ft((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Zr(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Zr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return $.resolve(h)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new h0(t,r));let o=this.kr.get(t);o===void 0&&(o=Re(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.qr=new tt(tn.Qr),this.$r=new tt(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new tn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new he(new Le([])),r=new tn(t,e),s=new tn(t,e+1),o=[];return this.$r.forEachInRange([r,s],u=>{this.Wr(u),o.push(u.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new he(new Le([])),r=new tn(t,e),s=new tn(t,e+1);let o=Re();return this.$r.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new tn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return he.comparator(e.key,t.key)||Se(e.Hr,t.Hr)}static Ur(e,t){return Se(e.Hr,t.Hr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new tt(tn.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new u0(o,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Yr=this.Yr.add(new tn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(u)}lookupMutationBatch(e,t){return $.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?$s:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),s=new tn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],u=>{const h=this.Zr(u.Hr);o.push(h)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(Se);return t.forEach(s=>{const o=new tn(s,0),u=new tn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,u],h=>{r=r.add(h.Hr)})}),$.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;he.isDocumentKey(o)||(o=o.child(""));const u=new tn(new he(o),0);let h=new tt(Se);return this.Yr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Hr)),!0)},u),$.resolve(this.ei(h))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return $.forEach(t.mutations,s=>{const o=new tn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new tn(t,0),s=this.Yr.firstAfterOrEqual(r);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.ni=e,this.docs=function(){return new ft(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=Un();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():mt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Un();const u=t.path,h=new he(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Xv(zI(y),r)<=0||(s.has(y.key)||Kh(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,r,s){pe(9500)}ri(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new m3(this)}getSize(e){return $.resolve(this.size)}}class m3 extends a2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.persistence=e,this.ii=new es(t=>Eo(t),Gh),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.si=0,this.oi=new y0,this.targetCount=0,this._i=Io.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),$.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Io(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.hr(t),$.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.ii.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ii.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),$.waitFor(o).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mn(0),this.ci=!1,this.ci=!0,this.li=new h3,this.referenceDelegate=e(this),this.hi=new p3(this),this.indexManager=new ZV,this.remoteDocumentCache=function(s){return new d3(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Xx(t),this.Ti=new u3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new c3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new f3(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const s=new g3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,t){return $.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class g3 extends FI{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Ai=new y0,this.Ri=null}static Vi(e){return new xp(e)}get mi(){if(this.Ri)return this.Ri;throw pe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,r=>{const s=he.fromPath(r);return this.fi(e,s).next(o=>{o||t.removeEntry(s,ve.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return $.or([()=>$.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class qm{constructor(e,t){this.persistence=e,this.gi=new es(r=>bn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=s2(this,t)}static Vi(e,t){return new qm(e,t)}Ii(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return $.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(o=>o?$.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,u=>this.Sr(e,u,t).next(h=>{h||(r++,o.removeEntry(u,ve.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),$.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rm(e.data.value)),t}Sr(e,t,r){return $.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.serializer=e}q(e,t,r,s){const o=new gp("createOrUpgrade",t);r<1&&s>=1&&(function(d){d.createObjectStore(Hh)}(e),function(d){d.createObjectStore(Eh,{keyPath:Pk}),d.createObjectStore(Ar,{keyPath:V1,autoIncrement:!0}).createIndex(lo,M1,{unique:!0}),d.createObjectStore(Xl)}(e),AS(e),function(d){d.createObjectStore(no)}(e));let u=$.resolve();return r<3&&s>=3&&(r!==0&&(function(d){d.deleteObjectStore(Jl),d.deleteObjectStore(Wl),d.deleteObjectStore(mo)}(e),AS(e)),u=u.next(()=>function(d){const p=d.store(mo),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return p.put(km,y)}(o))),r<4&&s>=4&&(r!==0&&(u=u.next(()=>function(d,p){return p.store(Ar).j().next(v=>{d.deleteObjectStore(Ar),d.createObjectStore(Ar,{keyPath:V1,autoIncrement:!0}).createIndex(lo,M1,{unique:!0});const E=p.store(Ar),A=v.map(R=>E.put(R));return $.waitFor(A)})}(e,o))),u=u.next(()=>{(function(d){d.createObjectStore(Zl,{keyPath:qk})})(e)})),r<5&&s>=5&&(u=u.next(()=>this.pi(o))),r<6&&s>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Th)}(e),this.yi(o)))),r<7&&s>=7&&(u=u.next(()=>this.wi(o))),r<8&&s>=8&&(u=u.next(()=>this.Si(e,o))),r<9&&s>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(u=u.next(()=>this.bi(o))),r<11&&s>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(yp,{keyPath:Fk})})(e),function(d){d.createObjectStore(_p,{keyPath:Hk})}(e)})),r<12&&s>=12&&(u=u.next(()=>{(function(d){const p=d.createObjectStore(vp,{keyPath:Wk});p.createIndex($_,Jk,{unique:!1}),p.createIndex(WI,Zk,{unique:!1})})(e)})),r<13&&s>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore(Pm,{keyPath:Vk});p.createIndex(tm,Mk),p.createIndex(KI,Lk)}(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(no))),r<14&&s>=14&&(u=u.next(()=>this.Ci(e,o))),r<15&&s>=15&&(u=u.next(()=>function(d){d.createObjectStore(Zv,{keyPath:Gk,autoIncrement:!0}).createIndex(G_,$k,{unique:!1}),d.createObjectStore(ah,{keyPath:Kk}).createIndex(YI,Qk,{unique:!1}),d.createObjectStore(oh,{keyPath:Yk}).createIndex(XI,Xk,{unique:!1})}(e))),r<16&&s>=16&&(u=u.next(()=>{t.objectStore(ah).clear()}).next(()=>{t.objectStore(oh).clear()})),r<17&&s>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(e0,{keyPath:eV})})(e)})),r<18&&s>=18&&dI()&&(u=u.next(()=>{t.objectStore(ah).clear()}).next(()=>{t.objectStore(oh).clear()})),u}yi(e){let t=0;return e.store(no).X((r,s)=>{t+=zm(s)}).next(()=>{const r={byteSize:t};return e.store(Th).put(H_,r)})}pi(e){const t=e.store(Eh),r=e.store(Ar);return t.j().next(s=>$.forEach(s,o=>{const u=IDBKeyRange.bound([o.userId,$s],[o.userId,o.lastAcknowledgedBatchId]);return r.j(lo,u).next(h=>$.forEach(h,d=>{ye(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const p=io(this.serializer,d);return t2(e,o.userId,p).next(()=>{})}))}))}wi(e){const t=e.store(Jl),r=e.store(no);return e.store(mo).get(km).next(s=>{const o=[];return r.X((u,h)=>{const d=new Le(u),p=function(v){return[0,bn(v)]}(d);o.push(t.get(p).next(y=>y?$.resolve():(v=>t.put({targetId:0,path:bn(v),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>$.waitFor(o))})}Si(e,t){e.createObjectStore(wh,{keyPath:zk});const r=t.store(wh),s=new g0,o=u=>{if(s.add(u)){const h=u.lastSegment(),d=u.popLast();return r.put({collectionId:h,parent:bn(d)})}};return t.store(no).X({Z:!0},(u,h)=>{const d=new Le(u);return o(d.popLast())}).next(()=>t.store(Xl).X({Z:!0},([u,h,d],p)=>{const y=Jr(h);return o(y.popLast())}))}bi(e){const t=e.store(Wl);return t.X((r,s)=>{const o=eh(s),u=Wx(this.serializer,o);return t.put(u)})}Di(e,t){const r=t.store(no),s=[];return r.X((o,u)=>{const h=t.store(Pm),d=function(v){return v.document?new he(Le.fromString(v.document.name).popFirst(5)):v.noDocument?he.fromSegments(v.noDocument.path):v.unknownDocument?he.fromSegments(v.unknownDocument.path):pe(36783)}(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(p))}).next(()=>$.waitFor(s))}Ci(e,t){const r=t.store(Ar),s=o2(this.serializer),o=new _0(xp.Vi,this.serializer.gt);return r.j().next(u=>{const h=new Map;return u.forEach(d=>{var p;let y=(p=h.get(d.userId))!==null&&p!==void 0?p:Re();io(this.serializer,d).keys().forEach(v=>y=y.add(v)),h.set(d.userId,y)}),$.forEach(h,(d,p)=>{const y=new nn(p),v=Ap.yt(this.serializer,y),E=o.getIndexManager(y),A=Ip.yt(y,this.serializer,E,o.referenceDelegate);return new l2(s,A,v,E).recalculateAndSaveOverlaysForDocumentKeys(new K_(t,Mn.ue),d).next()})})}}function AS(n){n.createObjectStore(Jl,{keyPath:jk}).createIndex(Jv,Bk,{unique:!0}),n.createObjectStore(Wl,{keyPath:"targetId"}).createIndex(QI,Uk,{unique:!0}),n.createObjectStore(mo)}const Vs="IndexedDbPersistence",f_=18e5,d_=5e3,m_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",u2="main";class v0{constructor(e,t,r,s,o,u,h,d,p,y,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=u,this.document=h,this.Mi=p,this.xi=y,this.Oi=v,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=E=>Promise.resolve(),!v0.C())throw new ae(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s3(this,s),this.Qi=t+u2,this.serializer=new Xx(d),this.$i=new ei(this.Qi,this.Oi,new y3(this.serializer)),this.li=new KV,this.hi=new t3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=o2(this.serializer),this.Ti=new $V,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&Nt(Vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(J.FAILED_PRECONDITION,m_);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new Mn(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(ua(e))return le(Vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(Vs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return $c(e).get(Rl).next(t=>$.resolve(this.Xi(t)))}es(e){return Gd(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,f_)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Qt(t,Zl);return r.j().next(s=>{const o=this.rs(s,f_),u=s.filter(h=>o.indexOf(h)===-1);return $.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?$.resolve(!0):$c(e).get(Rl).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,d_)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ae(J.FAILED_PRECONDITION,m_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gd(e).j().next(r=>this.rs(r,d_).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&le(Vs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Hh,Zl],e=>{const t=new K_(e,Mn.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Gd(e).j().next(t=>this.rs(t,f_).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Ip.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new e3(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Ap.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){le(Vs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=function(d){return d===18?rV:d===17?tx:d===16?nV:d===15?t0:d===14?ex:d===13?ZI:d===12?tV:d===11?JI:void pe(60245)}(this.Oi);let u;return this.$i.runTransaction(e,s,o,h=>(u=new K_(h,this.ui?this.ui.next():Mn.ue),t==="readwrite-primary"?this.Ji(u).next(d=>!!d||this.Hi(u)).next(d=>{if(!d)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new ae(J.FAILED_PRECONDITION,qI);return r(u)}).next(d=>this.Zi(u).next(()=>d)):this.Ts(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}Ts(e){return $c(e).get(Rl).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,d_)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(J.FAILED_PRECONDITION,m_)})}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $c(e).put(Rl,t)}static C(){return ei.C()}Yi(e){const t=$c(e);return t.get(Rl).next(r=>this.Xi(r)?(le(Vs,"Releasing primary lease."),t.delete(Rl)):$.resolve())}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;fI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return le(Vs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nt(Vs,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $c(n){return Qt(n,Hh)}function Gd(n){return Qt(n,Zl)}function b0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Re(),s=Re();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new E0(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return fI()?8:HI(Kt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ps(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ys(e,t,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new _3;return this.ws(e,t,u).next(h=>{if(o.result=h,this.Rs)return this.Ss(e,t,u,h.size)})}).next(()=>o.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(kl()<=Me.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Vl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(kl()<=Me.DEBUG&&le("QueryEngine","Query:",Vl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(kl()<=Me.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Vl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(t))):$.resolve())}ps(e,t){if(Y1(t))return $.resolve(null);let r=Nn(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Um(t,null,"F"),r=Nn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Re(...o);return this.gs.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.bs(t,h);return this.Ds(t,p,u,d.readTime)?this.ps(e,Um(t,null,"F")):this.vs(e,p,t,d)}))})))}ys(e,t,r,s){return Y1(t)||s.isEqual(ve.min())?$.resolve(null):this.gs.getDocuments(e,r).next(o=>{const u=this.bs(t,o);return this.Ds(t,u,r,s)?$.resolve(null):(kl()<=Me.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vl(t)),this.vs(e,u,t,BI(s,Yl)).next(h=>h))})}bs(e,t){let r=new tt(Tx(e));return t.forEach((s,o)=>{Kh(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,t,r){return kl()<=Me.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Vl(t)),this.gs.getDocumentsMatchingQuery(e,t,Zn.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="LocalStore",v3=3e8;class b3{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new ft(Se),this.Ms=new es(o=>Eo(o),Gh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function h2(n,e,t,r){return new b3(n,e,t,r)}async function f2(n,e){const t=de(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let d=Re();for(const p of s){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next(p=>({Bs:p,removedBatchIds:u,addedBatchIds:h}))})})}function E3(n,e){const t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,E=v.keys();let A=$.resolve();return E.forEach(R=>{A=A.next(()=>y.getEntry(d,R)).next(P=>{const D=p.docVersions.get(R);ye(D!==null,48541),P.version.compareTo(D)<0&&(v.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),y.addEntry(P)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=Re();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function d2(n){const e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function T3(n,e){const t=de(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const h=[];e.targetChanges.forEach((y,v)=>{const E=s.get(v);if(!E)return;h.push(t.hi.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.hi.addMatchingKeys(o,y.addedDocuments,v)));let A=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(At.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),s=s.insert(v,A),function(P,D,V){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=v3?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(E,A,y)&&h.push(t.hi.updateTargetData(o,A))});let d=Un(),p=Re();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(m2(o,u,e.documentUpdates).next(y=>{d=y.Ls,p=y.ks})),!r.isEqual(ve.min())){const y=t.hi.getLastRemoteSnapshotVersion(o).next(v=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return $.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(t.Fs=s,o))}function m2(n,e,t){let r=Re(),s=Re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Un();return t.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ve.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):le(T0,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Ls:u,ks:s}})}function w3(n,e){const t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$s),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function au(n,e){const t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(o=>o?(s=o,$.resolve(s)):t.hi.allocateTargetId(r).next(u=>(s=new ji(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function ou(n,e,t){const r=de(n),s=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!ua(u))throw u;le(T0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Fm(n,e,t){const r=de(n);let s=ve.min(),o=Re();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,y){const v=de(d),E=v.Ms.get(y);return E!==void 0?$.resolve(v.Fs.get(E)):v.hi.getTargetData(p,y)}(r,u,Nn(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,h.targetId).next(d=>{o=d})}).next(()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:ve.min(),t?o:Re())).next(h=>(y2(r,Ex(e),h),{documents:h,qs:o})))}function p2(n,e){const t=de(n),r=de(t.hi),s=t.Fs.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(u=>u?u.target:null))}function g2(n,e){const t=de(n),r=t.xs.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Os.getAllFromCollectionGroup(s,e,BI(r,Yl),Number.MAX_SAFE_INTEGER)).then(s=>(y2(t,e,s),s))}function y2(n,e,t){let r=n.xs.get(e)||ve.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}async function S3(n,e,t,r){const s=de(n);let o=Re(),u=Un();for(const p of t){const y=e.Qs(p.metadata.name);p.document&&(o=o.add(y));const v=e.$s(p);v.setReadTime(e.Us(p.metadata.readTime)),u=u.insert(y,v)}const h=s.Os.newChangeBuffer({trackRemovals:!0}),d=await au(s,function(y){return Nn(yu(Le.fromString(`__bundle__/docs/${y}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",p=>m2(p,h,u).next(y=>(h.apply(p),y)).next(y=>s.hi.removeMatchingKeysForTargetId(p,d.targetId).next(()=>s.hi.addMatchingKeys(p,o,d.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(p,y.Ls,y.ks)).next(()=>y.Ls)))}async function A3(n,e,t=Re()){const r=await au(n,Nn(m0(e.bundledQuery))),s=de(n);return s.persistence.runTransaction("Save named query","readwrite",o=>{const u=Dt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Ti.saveNamedQuery(o,e);const h=r.withResumeToken(At.EMPTY_BYTE_STRING,u);return s.Fs=s.Fs.insert(h.targetId,h),s.hi.updateTargetData(o,h).next(()=>s.hi.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>s.hi.addMatchingKeys(o,t,r.targetId)).next(()=>s.Ti.saveNamedQuery(o,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="firestore_clients";function IS(n,e){return`${_2}_${n}_${e}`}const v2="firestore_mutations";function xS(n,e,t){let r=`${v2}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const b2="firestore_targets";function p_(n,e){return`${b2}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="SharedClientState";class Hm{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ks(e,t,r){const s=JSON.parse(r);let o,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new ae(s.error.code,s.error.message))),u?new Hm(e,t,s.state,o):(Nt(Xr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){const r=JSON.parse(t);let s,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new ae(r.error.code,r.error.message))),o?new hh(e,r.state,s):(Nt(Xr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,o=a0();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=GI(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return s?new Gm(e,o):(Nt(Xr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class w0{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new w0(t.clientId,t.onlineState):(Nt(Xr,`Failed to parse online state: ${e}`),null)}}class ov{constructor(){this.activeTargetIds=a0()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g_{constructor(e,t,r,s,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new ft(Se),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=IS(this.persistenceKey,this.js),this.eo=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new ov),this.no=new RegExp(`^${_2}_${u}_([^_]*)$`),this.ro=new RegExp(`^${v2}_${u}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${b2}_${u}_(\\d+)$`),this.so=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.oo=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const s=this.getItem(IS(this.persistenceKey,r));if(s){const o=Gm.Ks(r,s);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();const t=this.storage.getItem(this.so);if(t){const r=this.ao(t);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(p_(this.persistenceKey,e));if(s){const o=hh.Ks(e,s);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(p_(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.ho(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return le(Xr,"READ",e,t),t}setItem(e,t){le(Xr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){le(Xr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(le(Xr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){const r=this.Ao(t.key);return this.Ro(r,null)}{const r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){const r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){const r=function(o){let u=Mn.ue;if(o!=null)try{const h=JSON.parse(o);ye(typeof h=="number",30636,{wo:o}),u=h}catch(h){Nt(Xr,"Failed to read sequence number from WebStorage",h)}return u}(t.newValue);r!==Mn.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){const r=this.So(t.newValue);await Promise.all(r.map(s=>this.syncEngine.bo(s)))}}}else this.Zs.push(t)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){const s=new Hm(this.currentUser,e,t,r),o=xS(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Ws())}ho(e){const t=xS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){const s=p_(this.persistenceKey,e),o=new hh(e,t,r);this.setItem(s,o.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const r=this.Ao(e);return Gm.Ks(r,t)}mo(e,t){const r=this.ro.exec(e),s=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Hm.Ks(new nn(o),s,t)}po(e,t){const r=this.io.exec(e),s=Number(r[1]);return hh.Ks(s,t)}ao(e){return w0.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);le(Xr,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Ys.insert(e,t):this.Ys.remove(e),s=this.co(this.Ys),o=this.co(r),u=[],h=[];return o.forEach(d=>{s.has(d)||u.push(d)}),s.forEach(d=>{o.has(d)||h.push(d)}),this.syncEngine.Co(u,h).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=a0();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class E2{constructor(){this.Fo=new ov,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ov,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="ConnectivityMonitor";class CS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(RS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(RS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function lv(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="RestConnection",x3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class R3{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Vm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,o){const u=lv(),h=this.Go(e,t.toUriEncodedString());le(y_,`Sending RPC '${e}' ${u}:`,h,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,o);const{host:p}=new URL(h),y=pu(p);return this.jo(e,h,d,r,y).then(v=>(le(y_,`Received RPC '${e}' ${u}: `,v),v),v=>{throw Jn(y_,`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",r),v})}Jo(e,t,r,s,o,u){return this.Wo(e,t,r,s,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}Go(e,t){const r=x3[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class N3 extends R3{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,o){const u=lv();return new Promise((h,d)=>{const p=new CI;p.setWithCredentials(!0),p.listenOnce(NI.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Jd.NO_ERROR:const v=p.getResponseJson();le(yn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case Jd.TIMEOUT:le(yn,`RPC '${e}' ${u} timed out`),d(new ae(J.DEADLINE_EXCEEDED,"Request time out"));break;case Jd.HTTP_ERROR:const E=p.getStatus();if(le(yn,`RPC '${e}' ${u} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const P=function(V){const F=V.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(F)>=0?F:J.UNKNOWN}(R.status);d(new ae(P,R.message))}else d(new ae(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ae(J.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{c_:e,streamId:u,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{le(yn,`RPC '${e}' ${u} completed.`)}});const y=JSON.stringify(s);le(yn,`RPC '${e}' ${u} sending request:`,s),p.send(t,"POST",y,r,15)})}P_(e,t,r){const s=lv(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=PI(),h=OI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=o.join("");le(yn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const v=u.createWebChannel(y,d);this.T_(v);let E=!1,A=!1;const R=new C3({Ho:D=>{A?le(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(E||(le(yn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),le(yn,`RPC '${e}' stream ${s} sending:`,D),v.send(D))},Yo:()=>v.close()}),P=(D,V,F)=>{D.listen(V,B=>{try{F(B)}catch(X){setTimeout(()=>{throw X},0)}})};return P(v,Wc.EventType.OPEN,()=>{A||(le(yn,`RPC '${e}' stream ${s} transport opened.`),R.s_())}),P(v,Wc.EventType.CLOSE,()=>{A||(A=!0,le(yn,`RPC '${e}' stream ${s} transport closed`),R.__(),this.I_(v))}),P(v,Wc.EventType.ERROR,D=>{A||(A=!0,Jn(yn,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),R.__(new ae(J.UNAVAILABLE,"The operation could not be completed")))}),P(v,Wc.EventType.MESSAGE,D=>{var V;if(!A){const F=D.data[0];ye(!!F,16349);const B=F,X=B?.error||((V=B[0])===null||V===void 0?void 0:V.error);if(X){le(yn,`RPC '${e}' stream ${s} received error:`,X);const ee=X.status;let te=function(N){const M=Lt[N];if(M!==void 0)return Vx(M)}(ee),C=X.message;te===void 0&&(te=J.INTERNAL,C="Unknown error status: "+ee+" with message "+X.message),A=!0,R.__(new ae(te,C)),v.close()}else le(yn,`RPC '${e}' stream ${s} received:`,F),R.a_(F)}}),P(h,DI.STAT_EVENT,D=>{D.stat===z_.PROXY?le(yn,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===z_.NOPROXY&&le(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){return typeof window<"u"?window:null}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n){return new VV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="PersistentStream";class w2{constructor(e,t,r,s,o,u,h,d){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new S0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Nt(t.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new ae(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return le(NS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(le(NS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D3 extends w2{constructor(e,t,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=UV(this.serializer,e),r=function(o){if(!("targetChange"in o))return ve.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ve.min():u.readTime?Dt(u.readTime):ve.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=nv(this.serializer),t.addTarget=function(o,u){let h;const d=u.target;if(h=Mm(d)?{documents:Hx(o,d)}:{query:Gx(o,d).Vt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Ux(o,u.resumeToken);const p=ev(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(ve.min())>0){h.readTime=su(o,u.snapshotVersion.toTimestamp());const p=ev(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=BV(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=nv(this.serializer),t.removeTarget=e,this.k_(t)}}class O3 extends w2{constructor(e,t,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=jV(e.writeResults,e.commitTime),r=Dt(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=nv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ch(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{}class k3 extends P3{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Wo(e,tv(t,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(J.UNKNOWN,o.toString())})}Jo(e,t,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Jo(e,tv(t,r),s,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(J.UNKNOWN,u.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class V3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Nt(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="RemoteStore";class M3{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(u=>{r.enqueueAndForget(async()=>{ha(this)&&(le(xo,"Restarting streams for network reachability change."),await async function(d){const p=de(d);p.Ia.add(4),await bu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Jh(p)}(this))})}),this.Aa=new V3(r,s)}}async function Jh(n){if(ha(n))for(const e of n.da)await e(!0)}async function bu(n){for(const e of n.da)await e(!1)}function Rp(n,e){const t=de(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),x0(t)?I0(t):Tu(t).x_()&&A0(t,e))}function lu(n,e){const t=de(n),r=Tu(t);t.Ta.delete(e),r.x_()&&S2(t,e),t.Ta.size===0&&(r.x_()?r.B_():ha(t)&&t.Aa.set("Unknown"))}function A0(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tu(n).H_(e)}function S2(n,e){n.Ra.$e(e),Tu(n).Y_(e)}function I0(n){n.Ra=new DV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Tu(n).start(),n.Aa.aa()}function x0(n){return ha(n)&&!Tu(n).M_()&&n.Ta.size>0}function ha(n){return de(n).Ia.size===0}function A2(n){n.Ra=void 0}async function L3(n){n.Aa.set("Online")}async function U3(n){n.Ta.forEach((e,t)=>{A0(n,e)})}async function j3(n,e){A2(n),x0(n)?(n.Aa.la(e),I0(n)):n.Aa.set("Unknown")}async function B3(n,e,t){if(n.Aa.set("Online"),e instanceof Lx&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const h of o.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ta.delete(h),s.Ra.removeTarget(h))}(n,e)}catch(r){le(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $m(n,r)}else if(e instanceof am?n.Ra.Ye(e):e instanceof Mx?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ve.min()))try{const r=await d2(n.localStore);t.compareTo(r)>=0&&await function(o,u){const h=o.Ra.Pt(u);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ta.get(p);y&&o.Ta.set(p,y.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ta.get(d);if(!y)return;o.Ta.set(d,y.withResumeToken(At.EMPTY_BYTE_STRING,y.snapshotVersion)),S2(o,d);const v=new ji(y.target,d,p,y.sequenceNumber);A0(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){le(xo,"Failed to raise snapshot:",r),await $m(n,r)}}async function $m(n,e,t){if(!ua(e))throw e;n.Ia.add(1),await bu(n),n.Aa.set("Offline"),t||(t=()=>d2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{le(xo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jh(n)})}function I2(n,e){return e().catch(t=>$m(n,t,e))}async function Eu(n){const e=de(n),t=ia(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:$s;for(;z3(e);)try{const s=await w3(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,q3(e,s)}catch(s){await $m(e,s)}x2(e)&&R2(e)}function z3(n){return ha(n)&&n.Pa.length<10}function q3(n,e){n.Pa.push(e);const t=ia(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function x2(n){return ha(n)&&!ia(n).M_()&&n.Pa.length>0}function R2(n){ia(n).start()}async function F3(n){ia(n).na()}async function H3(n){const e=ia(n);for(const t of n.Pa)e.X_(t.mutations)}async function G3(n,e,t){const r=n.Pa.shift(),s=c0.from(r,e,t);await I2(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Eu(n)}async function $3(n,e){e&&ia(n).Z_&&await async function(r,s){if(function(u){return kx(u)&&u!==J.ABORTED}(s.code)){const o=r.Pa.shift();ia(r).N_(),await I2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Eu(r)}}(n,e),x2(n)&&R2(n)}async function DS(n,e){const t=de(n);t.asyncQueue.verifyOperationInProgress(),le(xo,"RemoteStore received new credentials");const r=ha(t);t.Ia.add(3),await bu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jh(t)}async function uv(n,e){const t=de(n);e?(t.Ia.delete(2),await Jh(t)):e||(t.Ia.add(2),await bu(t),t.Aa.set("Unknown"))}function Tu(n){return n.Va||(n.Va=function(t,r,s){const o=de(t);return o.ia(),new D3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:L3.bind(null,n),e_:U3.bind(null,n),n_:j3.bind(null,n),J_:B3.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),x0(n)?I0(n):n.Aa.set("Unknown")):(await n.Va.stop(),A2(n))})),n.Va}function ia(n){return n.ma||(n.ma=function(t,r,s){const o=de(t);return o.ia(),new O3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:F3.bind(null,n),n_:$3.bind(null,n),ea:H3.bind(null,n),ta:G3.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Eu(n)):(await n.ma.stop(),n.Pa.length>0&&(le(xo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const u=Date.now()+r,h=new R0(e,t,u,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wu(n,e){if(Nt("AsyncQueue",`${e}: ${n}`),ua(n))return new ae(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{static emptySet(e){return new Bl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Jc(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Bl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.fa=new ft(he.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class uu{constructor(e,t,r,s,o,u,h,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new uu(e,t,Bl.emptySet(t),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Q3{constructor(){this.queries=PS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=de(t),o=s.queries;s.queries=PS(),o.forEach((u,h)=>{for(const d of h.wa)d.onError(r)})})(this,new ae(J.ABORTED,"Firestore shutting down"))}}function PS(){return new es(n=>bx(n),$h)}async function C0(n,e){const t=de(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new K3,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(s,!0);break;case 1:o.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=wu(u,`Initialization of query '${Vl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&D0(t)}async function N0(n,e){const t=de(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const u=o.wa.indexOf(e);u>=0&&(o.wa.splice(u,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Y3(n,e){const t=de(n);let r=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.wa)h.Ca(s)&&(r=!0);u.ya=s}}r&&D0(t)}function X3(n,e,t){const r=de(n),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(t);r.queries.delete(e)}function D0(n){n.Da.forEach(e=>{e.next()})}var cv,kS;(kS=cv||(cv={})).Fa="default",kS.Cache="cache";class O0{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=uu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.serializer=e}Qs(e){return ti(this.serializer,e)}$s(e){return e.metadata.exists?Fx(this.serializer,e.document,!1):mt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Dt(e)}}class J3{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=C2(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=Le.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){const t=new Map,r=new VS(this.serializer);for(const s of e)if(s.metadata.queries){const o=r.Qs(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||Re()).add(o);t.set(u,h)}}return t}async za(e){const t=await S3(e,new VS(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(const s of this.Ua)await A3(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}}}function C2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.key=e}}class D2{constructor(e){this.key=e}}class O2{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=Tx(e),this.eu=new Bl(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new OS,s=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const E=s.get(y),A=Kh(this.query,v)?v:null,R=!!E&&this.mutatedKeys.has(E.key),P=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;E&&A?E.data.isEqual(A.data)?R!==P&&(r.track({type:3,doc:A}),D=!0):this.iu(E,A)||(r.track({type:2,doc:A}),D=!0,(d&&this.Xa(A,d)>0||p&&this.Xa(A,p)<0)&&(h=!0)):!E&&A?(r.track({type:0,doc:A}),D=!0):E&&!A&&(r.track({type:1,doc:E}),D=!0,(d||p)&&(h=!0)),D&&(A?(u=u.add(A),o=P?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{eu:u,ru:r,Ds:h,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort((y,v)=>function(A,R){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{At:D})}};return P(A)-P(R)}(y.type,v.type)||this.Xa(y.doc,v.doc)),this.su(r),s=s!=null&&s;const h=t&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,p=d!==this.Ya;return this.Ya=d,u.length!==0||p?{snapshot:new uu(this.query,e.eu,o,u,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new OS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Re(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new D2(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new N2(r))}),t}uu(e){this.Ha=e.qs,this.Za=Re();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return uu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fa="SyncEngine";class Z3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class e6{constructor(e){this.key=e,this.lu=!1}}class t6{constructor(e,t,r,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new es(h=>bx(h),$h),this.Tu=new Map,this.Iu=new Set,this.du=new ft(he.comparator),this.Eu=new Map,this.Au=new y0,this.Ru={},this.Vu=new Map,this.mu=Io.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function n6(n,e,t=!0){const r=Cp(n);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await P2(r,e,t,!0),s}async function r6(n,e){const t=Cp(n);await P2(t,e,!0,!1)}async function P2(n,e,t,r){const s=await au(n.localStore,Nn(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await P0(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&Rp(n.remoteStore,s),h}async function P0(n,e,t,r,s){n.gu=(v,E,A)=>async function(P,D,V,F){let B=D.view.nu(V);B.Ds&&(B=await Fm(P.localStore,D.query,!1).then(({documents:C})=>D.view.nu(C,B)));const X=F&&F.targetChanges.get(D.targetId),ee=F&&F.targetMismatches.get(D.targetId)!=null,te=D.view.applyChanges(B,P.isPrimaryClient,X,ee);return hv(P,D.targetId,te._u),te.snapshot}(n,v,E,A);const o=await Fm(n.localStore,e,!0),u=new O2(e,o.qs),h=u.nu(o.documents),d=Xh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=u.applyChanges(h,n.isPrimaryClient,d);hv(n,t,p._u);const y=new Z3(e,t,u);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function i6(n,e,t){const r=de(n),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter(u=>!$h(u,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ou(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&lu(r.remoteStore,s.targetId),cu(r,s.targetId)}).catch(la)):(cu(r,s.targetId),await ou(r.localStore,s.targetId,!0))}async function s6(n,e){const t=de(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lu(t.remoteStore,r.targetId))}async function a6(n,e,t){const r=L0(n);try{const s=await function(u,h){const d=de(u),p=Xe.now(),y=h.reduce((A,R)=>A.add(R.key),Re());let v,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Un(),P=Re();return d.Os.getEntries(A,y).next(D=>{R=D,R.forEach((V,F)=>{F.isValidDocument()||(P=P.add(V))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,R)).next(D=>{v=D;const V=[];for(const F of h){const B=RV(F,v.get(F.key).overlayedDocument);B!=null&&V.push(new ts(F.key,B,hx(B.value.mapValue),vt.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,V,h)}).next(D=>{E=D;const V=D.applyToLocalDocumentSet(v,P);return d.documentOverlayCache.saveOverlays(A,D.batchId,V)})}).then(()=>({batchId:E.batchId,changes:Sx(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,d){let p=u.Ru[u.currentUser.toKey()];p||(p=new ft(Se)),p=p.insert(h,d),u.Ru[u.currentUser.toKey()]=p}(r,s.batchId,t),await ns(r,s.changes),await Eu(r.remoteStore)}catch(s){const o=wu(s,"Failed to persist write");t.reject(o)}}async function k2(n,e){const t=de(n);try{const r=await T3(t.localStore,e);e.targetChanges.forEach((s,o)=>{const u=t.Eu.get(o);u&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ye(u.lu,14607):s.removedDocuments.size>0&&(ye(u.lu,42227),u.lu=!1))}),await ns(t,r,e)}catch(r){await la(r)}}function MS(n,e,t){const r=de(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((o,u)=>{const h=u.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const d=de(u);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const E of v.wa)E.va(h)&&(p=!0)}),p&&D0(d)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o6(n,e,t){const r=de(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new ft(he.comparator);u=u.insert(o,mt.newNoDocument(o,ve.min()));const h=Re().add(o),d=new Yh(ve.min(),new Map,new ft(Se),u,h);await k2(r,d),r.du=r.du.remove(o),r.Eu.delete(e),M0(r)}else await ou(r.localStore,e,!1).then(()=>cu(r,e,t)).catch(la)}async function l6(n,e){const t=de(n),r=e.batch.batchId;try{const s=await E3(t.localStore,e);V0(t,r,null),k0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ns(t,s)}catch(s){await la(s)}}async function u6(n,e,t){const r=de(n);try{const s=await function(u,h){const d=de(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(ye(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);V0(r,e,t),k0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ns(r,s)}catch(s){await la(s)}}async function c6(n,e){const t=de(n);ha(t.remoteStore)||le(fa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const h=de(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>h.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(r===$s)return void e.resolve();const s=t.Vu.get(r)||[];s.push(e),t.Vu.set(r,s)}catch(r){const s=wu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function k0(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function V0(n,e,t){const r=de(n);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function cu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||V2(n,r)})}function V2(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(lu(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),M0(n))}function hv(n,e,t){for(const r of t)r instanceof N2?(n.Au.addReference(r.key,e),h6(n,r)):r instanceof D2?(le(fa,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||V2(n,r.key)):pe(19791,{yu:r})}function h6(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(le(fa,"New document in limbo: "+t),n.Iu.add(r),M0(n))}function M0(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new he(Le.fromString(e)),r=n.mu.next();n.Eu.set(r,new e6(t)),n.du=n.du.insert(t,r),Rp(n.remoteStore,new ji(Nn(yu(t.path)),r,"TargetPurposeLimboResolution",Mn.ue))}}async function ns(n,e,t){const r=de(n),s=[],o=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach((h,d)=>{u.push(r.gu(d,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t?.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=E0.Es(d.targetId,p);o.push(v)}}))}),await Promise.all(u),r.hu.J_(s),await async function(d,p){const y=de(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>$.forEach(p,E=>$.forEach(E.Is,A=>y.persistence.referenceDelegate.addReference(v,E.targetId,A)).next(()=>$.forEach(E.ds,A=>y.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))}catch(v){if(!ua(v))throw v;le(T0,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const A=y.Fs.get(E),R=A.snapshotVersion,P=A.withLastLimboFreeSnapshotVersion(R);y.Fs=y.Fs.insert(E,P)}}}(r.localStore,o))}async function f6(n,e){const t=de(n);if(!t.currentUser.isEqual(e)){le(fa,"User change. New user:",e.toKey());const r=await f2(t.localStore,e);t.currentUser=e,function(o,u){o.Vu.forEach(h=>{h.forEach(d=>{d.reject(new ae(J.CANCELLED,u))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ns(t,r.Bs)}}function d6(n,e){const t=de(n),r=t.Eu.get(e);if(r&&r.lu)return Re().add(r.key);{let s=Re();const o=t.Tu.get(e);if(!o)return s;for(const u of o){const h=t.Pu.get(u);s=s.unionWith(h.view.tu)}return s}}async function m6(n,e){const t=de(n),r=await Fm(t.localStore,e.query,!0),s=e.view.uu(r);return t.isPrimaryClient&&hv(t,e.targetId,s._u),s}async function p6(n,e){const t=de(n);return g2(t.localStore,e).then(r=>ns(t,r))}async function g6(n,e,t,r){const s=de(n),o=await function(h,d){const p=de(h),y=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>y.Xn(v,d).next(E=>E?p.localDocuments.getDocuments(v,E):$.resolve(null)))}(s.localStore,e);o!==null?(t==="pending"?await Eu(s.remoteStore):t==="acknowledged"||t==="rejected"?(V0(s,e,r||null),k0(s,e),function(h,d){de(de(h).mutationQueue).rr(d)}(s.localStore,e)):pe(6720,"Unknown batchState",{wu:t}),await ns(s,o)):le(fa,"Cannot apply mutation batch with id: "+e)}async function y6(n,e){const t=de(n);if(Cp(t),L0(t),e===!0&&t.fu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await LS(t,r.toArray());t.fu=!0,await uv(t.remoteStore,!0);for(const o of s)Rp(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){const r=[];let s=Promise.resolve();t.Tu.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(cu(t,u),ou(t.localStore,u,!0))),lu(t.remoteStore,u)}),await s,await LS(t,r),function(u){const h=de(u);h.Eu.forEach((d,p)=>{lu(h.remoteStore,p)}),h.Au.jr(),h.Eu=new Map,h.du=new ft(he.comparator)}(t),t.fu=!1,await uv(t.remoteStore,!1)}}async function LS(n,e,t){const r=de(n),s=[],o=[];for(const u of e){let h;const d=r.Tu.get(u);if(d&&d.length!==0){h=await au(r.localStore,Nn(d[0]));for(const p of d){const y=r.Pu.get(p),v=await m6(r,y);v.snapshot&&o.push(v.snapshot)}}else{const p=await p2(r.localStore,u);h=await au(r.localStore,p),await P0(r,M2(p),u,!1,h.resumeToken)}s.push(h)}return r.hu.J_(o),s}function M2(n){return vx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _6(n){return function(t){return de(de(t).persistence).Ps()}(de(n).localStore)}async function v6(n,e,t,r){const s=de(n);if(s.fu)return void le(fa,"Ignoring unexpected query state notification.");const o=s.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=await g2(s.localStore,Ex(o[0])),h=Yh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",At.EMPTY_BYTE_STRING);await ns(s,u,h);break}case"rejected":await ou(s.localStore,e,!0),cu(s,e,r);break;default:pe(64155,t)}}async function b6(n,e,t){const r=Cp(n);if(r.fu){for(const s of e){if(r.Tu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){le(fa,"Adding an already active target "+s);continue}const o=await p2(r.localStore,s),u=await au(r.localStore,o);await P0(r,M2(o),u.targetId,!1,u.resumeToken),Rp(r.remoteStore,u)}for(const s of t)r.Tu.has(s)&&await ou(r.localStore,s,!1).then(()=>{lu(r.remoteStore,s),cu(r,s)}).catch(la)}}function Cp(n){const e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=k2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o6.bind(null,e),e.hu.J_=Y3.bind(null,e.eventManager),e.hu.pu=X3.bind(null,e.eventManager),e}function L0(n){const e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u6.bind(null,e),e}function E6(n,e,t){const r=de(n);(async function(o,u,h){try{const d=await u.getMetadata();if(await function(A,R){const P=de(A),D=Dt(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",V=>P.Ti.getBundleMetadata(V,R.id)).then(V=>!!V&&V.createTime.compareTo(D)>=0)}(o.localStore,d))return await u.close(),h._completeWith(function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}}(d)),Promise.resolve(new Set);h._updateProgress(C2(d));const p=new J3(d,u.serializer);let y=await u.Su();for(;y;){const E=await p.Wa(y);E&&h._updateProgress(E),y=await u.Su()}const v=await p.za(o.localStore);return await ns(o,v.Ja,void 0),await function(A,R){const P=de(A);return P.persistence.runTransaction("Save bundle","readwrite",D=>P.Ti.saveBundleMetadata(D,R))}(o.localStore,d),h._completeWith(v.progress),Promise.resolve(v.ja)}catch(d){return Jn(fa,`Loading bundle failed with ${d}`),h._failWith(d),Promise.resolve(new Set)}})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return h2(this.persistence,new c2,e.initialUser,this.serializer)}Du(e){return new _0(xp.Vi,this.serializer)}bu(e){return new E2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class T6 extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ye(this.persistence.referenceDelegate instanceof qm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new i2(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new _0(r=>qm.Vi(r,t),this.serializer)}}class L2 extends Nh{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await L0(this.Mu.syncEngine),await Eu(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return h2(this.persistence,new c2,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new i2(r,e.asyncQueue,t)}Fu(e,t){const r=new Dk(t,this.persistence);return new Nk(e.asyncQueue,r)}Du(e){const t=b0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new v0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,T2(),lm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new E2}}class w6 extends L2{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof g_&&(this.sharedClientState.syncEngine={Do:g6.bind(null,t),vo:v6.bind(null,t),Co:b6.bind(null,t),Ps:_6.bind(null,t),bo:p6.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji(async r=>{await y6(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}bu(e){const t=T2();if(!g_.C(t))throw new ae(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=b0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new g_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Dh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>MS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f6.bind(null,this.syncEngine),await uv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q3}()}createDatastore(e){const t=Wh(e.databaseInfo.databaseId),r=function(o){return new N3(o)}(e.databaseInfo);return function(o,u,h,d){return new k3(o,u,h,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,u,h){return new M3(r,s,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>MS(this.syncEngine,t,0),function(){return CS.C()?new CS:new I3}())}createSyncEngine(e,t){return function(s,o,u,h,d,p,y){const v=new t6(s,o,u,h,d,p);return y&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=de(s);le(xo,"RemoteStore shutting down."),o.Ia.add(5),await bu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Dh.provider={build:()=>new Dh};function US(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new dn,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const s=await this.Qu(r);return new W3(JSON.parse(s),e.length+r)}$u(){return this.buffer.findIndex(e=>e===123)}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ae(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(s,o){const u=de(s),h={documents:o.map(v=>Rh(u.serializer,v))},d=await u.Jo("BatchGetDocuments",u.serializer.databaseId,Le.emptyPath(),h,o.length),p=new Map;d.forEach(v=>{const E=LV(u.serializer,v);p.set(E.key.toString(),E)});const y=[];return o.forEach(v=>{const E=p.get(v.toString());ye(!!E,55234,{key:v}),y.push(E)}),y}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const s=he.fromPath(r);this.mutations.push(new l0(s,this.precondition(s)))}),await async function(r,s){const o=de(r),u={writes:s.map(h=>Ch(o.serializer,h))};await o.Wo("Commit",o.serializer.databaseId,Le.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pe(50498,{Wu:e.constructor.name});t=ve.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ae(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ve.min())?vt.exists(!1):vt.updateTime(t):vt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ve.min()))throw new ae(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(t)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t,r,s,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new S0(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new A6(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Hu(s)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const t=this.updateFunction(e);return!Fh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="FirestoreClient";class x6{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=Qv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{le(sa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(le(sa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wu(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function __(n,e){n.asyncQueue.verifyOperationInProgress(),le(sa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await f2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Jn("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Jn("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function jS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await U0(n);le(sa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>DS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>DS(e.remoteStore,s)),n._onlineComponents=e}async function U0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(sa,"Using user provided OfflineComponentProvider");try{await __(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Jn("Error using user provided cache. Falling back to memory cache: "+t),await __(n,new Nh)}}else le(sa,"Using default OfflineComponentProvider"),await __(n,new T6(void 0));return n._offlineComponents}async function Dp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(sa,"Using user provided OnlineComponentProvider"),await jS(n,n._uninitializedComponentsProvider._online)):(le(sa,"Using default OnlineComponentProvider"),await jS(n,new Dh))),n._onlineComponents}function U2(n){return U0(n).then(e=>e.persistence)}function j0(n){return U0(n).then(e=>e.localStore)}function j2(n){return Dp(n).then(e=>e.remoteStore)}function B0(n){return Dp(n).then(e=>e.syncEngine)}function R6(n){return Dp(n).then(e=>e.datastore)}async function hu(n){const e=await Dp(n),t=e.eventManager;return t.onListen=n6.bind(null,e.syncEngine),t.onUnlisten=i6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=r6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=s6.bind(null,e.syncEngine),t}function C6(n){return n.asyncQueue.enqueue(async()=>{const e=await U2(n),t=await j2(n);return e.setNetworkEnabled(!0),function(s){const o=de(s);return o.Ia.delete(0),Jh(o)}(t)})}function N6(n){return n.asyncQueue.enqueue(async()=>{const e=await U2(n),t=await j2(n);return e.setNetworkEnabled(!1),async function(s){const o=de(s);o.Ia.add(0),await bu(o),o.Aa.set("Offline")}(t)})}function D6(n,e){const t=new dn;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await function(p,y){const v=de(p);return v.persistence.runTransaction("read document","readonly",E=>v.localDocuments.getDocument(E,y))}(s,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ae(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const d=wu(h,`Failed to get document '${o} from cache`);u.reject(d)}}(await j0(n),e,t)),t.promise}function B2(n,e,t={}){const r=new dn;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,p){const y=new Np({next:E=>{y.Ou(),u.enqueueAndForget(()=>N0(o,v));const A=E.docs.has(h);!A&&E.fromCache?p.reject(new ae(J.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new ae(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new O0(yu(h.path),y,{includeMetadataChanges:!0,ka:!0});return C0(o,v)}(await hu(n),n.asyncQueue,e,t,r)),r.promise}function O6(n,e){const t=new dn;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await Fm(s,o,!0),d=new O2(o,h.qs),p=d.nu(h.documents),y=d.applyChanges(p,!1);u.resolve(y.snapshot)}catch(h){const d=wu(h,`Failed to execute query '${o} against cache`);u.reject(d)}}(await j0(n),e,t)),t.promise}function z2(n,e,t={}){const r=new dn;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,p){const y=new Np({next:E=>{y.Ou(),u.enqueueAndForget(()=>N0(o,v)),E.fromCache&&d.source==="server"?p.reject(new ae(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new O0(h,y,{includeMetadataChanges:!0,ka:!0});return C0(o,v)}(await hu(n),n.asyncQueue,e,t,r)),r.promise}function P6(n,e){const t=new Np(e);return n.asyncQueue.enqueueAndForget(async()=>function(s,o){de(s).Da.add(o),o.next()}(await hu(n),t)),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(async()=>function(s,o){de(s).Da.delete(o)}(await hu(n),t))}}function k6(n,e,t,r){const s=function(u,h){let d;return d=typeof u=="string"?Kv().encode(u):u,function(y,v){return new S6(y,v)}(function(y,v){if(y instanceof Uint8Array)return US(y,v);if(y instanceof ArrayBuffer)return US(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),h)}(t,Wh(e));n.asyncQueue.enqueueAndForget(async()=>{E6(await B0(n),s,r)})}function V6(n,e){return n.asyncQueue.enqueue(async()=>function(r,s){const o=de(r);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ti.getNamedQuery(u,s))}(await j0(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firestore.googleapis.com",zS=!0;class qS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F2,this.ssl=zS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:zS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n3)throw new ae(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vk;switch(r.type){case"firstParty":return new wk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=BS.get(t);r&&(le("ComponentProvider","Removing Datastore"),BS.delete(t),r.terminate())}(this),Promise.resolve()}}function H2(n,e,t,r={}){var s;n=$e(n,Zh);const o=pu(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;o&&(lI(`https://${d}`),uI("Firestore",!0)),u.host!==F2&&u.host!==d&&Jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:d,ssl:o,emulatorOptions:r});if(!$i(p,h)&&(n._setSettings(p),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=nn.MOCK_USER;else{y=V4(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ae(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(E)}n._authCredentials=new bk(new VI(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dn=class G2{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new G2(this.firestore,e,this._query)}},ct=class th{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new th(this.firestore,e,this._key)}toJSON(){return{type:th._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qh(t,th._jsonSchema))return new th(e,r||null,new he(Le.fromString(t.referencePath)))}};ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:jt("string",ct._jsonSchemaVersion),referencePath:jt("string")};let Ks=class $2 extends Dn{constructor(e,t,r){super(e,t,yu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new he(e))}withConverter(e){return new $2(this.firestore,e,this._path)}};function Yn(n,e,...t){if(n=ht(n),Yv("collection","path",e),n instanceof Zh){const r=Le.fromString(e,...t);return N1(r),new Ks(n,null,r)}{if(!(n instanceof ct||n instanceof Ks))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(e,...t));return N1(r),new Ks(n.firestore,null,r)}}function M6(n,e){if(n=$e(n,Zh),Yv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ae(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dn(n,null,function(r){return new Zi(Le.emptyPath(),r)}(e))}function Vn(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Qv.newId()),Yv("doc","path",e),n instanceof Zh){const r=Le.fromString(e,...t);return C1(r),new ct(n,null,new he(r))}{if(!(n instanceof ct||n instanceof Ks))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(e,...t));return C1(r),new ct(n.firestore,n instanceof Ks?n.converter:null,new he(r))}}function K2(n,e){return n=ht(n),e=ht(e),(n instanceof ct||n instanceof Ks)&&(e instanceof ct||e instanceof Ks)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Q2(n,e){return n=ht(n),e=ht(e),n instanceof Dn&&e instanceof Dn&&n.firestore===e.firestore&&$h(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="AsyncQueue";class HS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new S0(this,"async_queue_retry"),this.oc=()=>{const r=lm();r&&le(FS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=lm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new dn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ua(e))throw e;le(FS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Nt("INTERNAL UNHANDLED ERROR: ",GS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=R0.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(s),s}ac(){this.tc&&pe(47125,{hc:GS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function GS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class L6{constructor(){this._progressObserver={},this._taskCompletionResolver=new dn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=-1;let Ot=class extends Zh{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new HS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HS(e),this._firestoreClient=void 0,await e}}};function j6(n,e){const t=typeof n=="object"?n:Hv(),r=typeof n=="string"?n:Vm,s=zh(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=P4("firestore");o&&H2(s,...o)}return s}function En(n){if(n._terminated)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Y2(n),n._firestoreClient}function Y2(n){var e,t,r;const s=n._freezeSettings(),o=function(h,d,p,y){return new aV(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,q2(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new x6(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h?._online.build();return{_offline:h?._offline.build(d),_online:d}}(n._componentsProvider))}function B6(n,e){Jn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return X2(n,Dh.provider,{build:r=>new L2(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function z6(n){Jn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();X2(n,Dh.provider,{build:t=>new w6(t,e.cacheSizeBytes)})}function X2(n,e,t){if((n=$e(n,Ot))._firestoreClient||n._terminated)throw new ae(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ae(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Y2(n)}function q6(n){if(n._initialized&&!n._terminated)throw new ae(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ei.C())return Promise.resolve();const s=r+u2;await ei.delete(s)}(b0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function F6(n){return function(t){const r=new dn;return t.asyncQueue.enqueueAndForget(async()=>c6(await B0(t),r)),r.promise}(En(n=$e(n,Ot)))}function H6(n){return C6(En(n=$e(n,Ot)))}function G6(n){return N6(En(n=$e(n,Ot)))}function $6(n,e){const t=En(n=$e(n,Ot)),r=new L6;return k6(t,n._databaseId,e,r),r}function K6(n,e){return V6(En(n=$e(n,Ot)),e).then(t=>t?new Dn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(At.fromBase64String(e))}catch(t){throw new ae(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vn(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qh(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:jt("string",vn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(qh(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:jt("string",Cr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qh(e,ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ni(e.vectorValues);throw new ae(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ni._jsonSchemaVersion="firestore/vectorValue/1.0",ni._jsonSchema={type:jt("string",ni._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=/^__.*__$/;class Y6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class W2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function J2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ec:n})}}class Op{constructor(e,t,r,s,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Km(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(J2(this.Ec)&&Q6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class X6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wh(e)}Dc(e,t,r,s=!1){return new Op({Ec:e,methodName:t,bc:r,path:_t.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Po(n){const e=n._freezeSettings(),t=Wh(n._databaseId);return new X6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Pp(n,e,t,r,s,o={}){const u=n.Dc(o.merge||o.mergeFields?2:0,e,t,s);K0("Data must be an object, but it was:",u,r);const h=tR(r,u);let d,p;if(o.merge)d=new Ln(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const E=dv(e,v,t);if(!u.contains(E))throw new ae(J.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);rR(y,E)||y.push(E)}d=new Ln(y),p=u.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=u.fieldTransforms;return new Y6(new fn(h),d,p)}class ef extends Oo{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ef}}function Z2(n,e,t){return new Op({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class z0 extends Oo{_toFieldTransform(e){return new Qh(e.path,new ru)}isEqual(e){return e instanceof z0}}class q0 extends Oo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Z2(this,e,!0),r=this.vc.map(o=>ko(o,t)),s=new To(r);return new Qh(e.path,s)}isEqual(e){return e instanceof q0&&$i(this.vc,e.vc)}}class F0 extends Oo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Z2(this,e,!0),r=this.vc.map(o=>ko(o,t)),s=new wo(r);return new Qh(e.path,s)}isEqual(e){return e instanceof F0&&$i(this.vc,e.vc)}}class H0 extends Oo{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new iu(e.serializer,xx(e.serializer,this.Cc));return new Qh(e.path,t)}isEqual(e){return e instanceof H0&&this.Cc===e.Cc}}function G0(n,e,t,r){const s=n.Dc(1,e,t);K0("Data must be an object, but it was:",s,r);const o=[],u=fn.empty();ca(r,(d,p)=>{const y=Q0(e,d,t);p=ht(p);const v=s.gc(y);if(p instanceof ef)o.push(y);else{const E=ko(p,v);E!=null&&(o.push(y),u.set(y,E))}});const h=new Ln(o);return new W2(u,h,s.fieldTransforms)}function $0(n,e,t,r,s,o){const u=n.Dc(1,e,t),h=[dv(e,r,t)],d=[s];if(o.length%2!=0)throw new ae(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(dv(e,o[E])),d.push(o[E+1]);const p=[],y=fn.empty();for(let E=h.length-1;E>=0;--E)if(!rR(p,h[E])){const A=h[E];let R=d[E];R=ht(R);const P=u.gc(A);if(R instanceof ef)p.push(A);else{const D=ko(R,P);D!=null&&(p.push(A),y.set(A,D))}}const v=new Ln(p);return new W2(y,v,u.fieldTransforms)}function eR(n,e,t,r=!1){return ko(t,n.Dc(r?4:3,e))}function ko(n,e){if(nR(n=ht(n)))return K0("Unsupported field value:",e,n),tR(n,e);if(n instanceof Oo)return function(r,s){if(!J2(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const h of r){let d=ko(h,s.yc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xe.fromDate(r);return{timestampValue:su(s.serializer,o)}}if(r instanceof Xe){const o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,o)}}if(r instanceof Cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vn)return{bytesValue:Ux(s.serializer,r._byteString)};if(r instanceof ct){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:d0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ni)return function(u,h){return{mapValue:{fields:{[n0]:{stringValue:r0},[eu]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.wc("VectorValues must only contain numeric values.");return o0(h.serializer,p)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${pp(r)}`)}(n,e)}function tR(n,e){const t={};return nx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ca(n,(r,s)=>{const o=ko(s,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function nR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof Cr||n instanceof vn||n instanceof ct||n instanceof Oo||n instanceof ni)}function K0(n,e,t){if(!nR(t)||!UI(t)){const r=pp(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function dv(n,e,t){if((e=ht(e))instanceof aa)return e._internalPath;if(typeof e=="string")return Q0(n,e);throw Km("Field path arguments must be of type string or ",n,!1,void 0,t)}const W6=new RegExp("[~\\*/\\[\\]]");function Q0(n,e,t){if(e.search(W6)>=0)throw Km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new aa(...e.split("."))._internalPath}catch{throw Km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Km(n,e,t,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new ae(J.INVALID_ARGUMENT,h+n+d)}function rR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J6 extends Oh{data(){return super.data()}}function kp(n,e){return typeof e=="string"?Q0(n,e):e instanceof aa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y0{}class tf extends Y0{}function hn(n,e,...t){let r=[];e instanceof Y0&&r.push(e),r=r.concat(t),function(o){const u=o.filter(d=>d instanceof Su).length,h=o.filter(d=>d instanceof nf).length;if(u>1||u>0&&h>0)throw new ae(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class nf extends tf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nf(e,t,r)}_apply(e){const t=this._parse(e);return aR(e._query,t),new Dn(e.firestore,e.converter,Z_(e._query,t))}_parse(e){const t=Po(e.firestore);return function(o,u,h,d,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ae(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){QS(v,y);const R=[];for(const P of v)R.push(KS(d,o,P));E={arrayValue:{values:R}}}else E=KS(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||QS(v,y),E=eR(h,u,v,y==="in"||y==="not-in");return Ue.create(p,y,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xn(n,e,t){const r=e,s=kp("where",n);return nf._create(s,r,t)}class Su extends Y0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Su(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)aR(u,d),u=Z_(u,d)}(e._query,t),new Dn(e.firestore,e.converter,Z_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Z6(...n){return n.forEach(e=>oR("or",e)),Su._create("or",n)}function $S(...n){return n.forEach(e=>oR("and",e)),Su._create("and",n)}class X0 extends tf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new X0(e,t)}_apply(e){const t=function(s,o,u){if(s.startAt!==null)throw new ae(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ae(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xh(o,u)}(e._query,this._field,this._direction);return new Dn(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new Zi(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function W0(n,e="asc"){const t=e,r=kp("orderBy",n);return X0._create(r,t)}class Vp extends tf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Vp(e,t,r)}_apply(e){return new Dn(e.firestore,e.converter,Um(e._query,this._limit,this._limitType))}}function Mp(n){return jI("limit",n),Vp._create("limit",n,"F")}function eM(n){return jI("limitToLast",n),Vp._create("limitToLast",n,"L")}class Lp extends tf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lp(e,t,r)}_apply(e){const t=sR(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(s,o){return new Zi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)}(e._query,t))}}function tM(...n){return Lp._create("startAt",n,!0)}function nM(...n){return Lp._create("startAfter",n,!1)}class Up extends tf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Up(e,t,r)}_apply(e){const t=sR(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(s,o){return new Zi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)}(e._query,t))}}function rM(...n){return Up._create("endBefore",n,!1)}function iM(...n){return Up._create("endAt",n,!0)}function sR(n,e,t,r){if(t[0]=ht(t[0]),t[0]instanceof Oh)return function(o,u,h,d,p){if(!d)throw new ae(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const v of jl(o))if(v.field.isKeyField())y.push(bo(u,d.key));else{const E=d.data.field(v.field);if(bp(E))throw new ae(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const A=v.field.canonicalString();throw new ae(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new ra(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Po(n.firestore);return function(u,h,d,p,y,v){const E=u.explicitOrderBy;if(y.length>E.length)throw new ae(J.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let R=0;R<y.length;R++){const P=y[R];if(E[R].field.isKeyField()){if(typeof P!="string")throw new ae(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof P}`);if(!s0(u)&&P.indexOf("/")!==-1)throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${P}' contains a slash.`);const D=u.path.child(Le.fromString(P));if(!he.isDocumentKey(D))throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const V=new he(D);A.push(bo(h,V))}else{const D=eR(d,p,P);A.push(D)}}return new ra(A,v)}(n._query,n.firestore._databaseId,s,e,t,r)}}function KS(n,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new ae(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s0(e)&&t.indexOf("/")!==-1)throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Le.fromString(t));if(!he.isDocumentKey(r))throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bo(n,new he(r))}if(t instanceof ct)return bo(n,t._key);throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(t)}.`)}function QS(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aR(n,e){const t=function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function oR(n,e){if(!(e instanceof nf||e instanceof Su))throw new ae(J.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class J0{convertValue(e,t="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ca(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[eu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>yt(u.doubleValue));return new ni(o)}convertGeoPoint(e){return new Cr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ep(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sh(e));default:return null}}convertTimestamp(e){const t=Yi(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Le.fromString(e);ye(Yx(r),9688,{name:e});const s=new ea(r.get(1),r.get(3)),o=new he(r.popFirst(5));return s.isEqual(t)||Nt(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class sM extends J0{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}class uo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let _r=class lR extends Oh{constructor(e,t,r,s,o,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};_r._jsonSchemaVersion="firestore/documentSnapshot/1.0",_r._jsonSchema={type:jt("string",_r._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};let fh=class extends _r{data(e={}){return super.data(e)}},Nr=class uR{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new uo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fh(this._firestore,this._userDataWriter,r.key,r,new uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const d=new fh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new uo(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new fh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new uo(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:aM(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function aM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}function cR(n,e){return n instanceof _r&&e instanceof _r?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nr&&e instanceof Nr&&n._firestore===e._firestore&&Q2(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){n=$e(n,ct);const e=$e(n.firestore,Ot);return B2(En(e),n._key).then(t=>eb(e,n,t))}Nr._jsonSchemaVersion="firestore/querySnapshot/1.0",Nr._jsonSchema={type:jt("string",Nr._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class Vo extends J0{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}function oM(n){n=$e(n,ct);const e=$e(n.firestore,Ot),t=En(e),r=new Vo(e);return D6(t,n._key).then(s=>new _r(e,r,n._key,s,new uo(s!==null&&s.hasLocalMutations,!0),n.converter))}function lM(n){n=$e(n,ct);const e=$e(n.firestore,Ot);return B2(En(e),n._key,{source:"server"}).then(t=>eb(e,n,t))}function Ro(n){n=$e(n,Dn);const e=$e(n.firestore,Ot),t=En(e),r=new Vo(e);return iR(n._query),z2(t,n._query).then(s=>new Nr(e,r,n,s))}function uM(n){n=$e(n,Dn);const e=$e(n.firestore,Ot),t=En(e),r=new Vo(e);return O6(t,n._query).then(s=>new Nr(e,r,n,s))}function cM(n){n=$e(n,Dn);const e=$e(n.firestore,Ot),t=En(e),r=new Vo(e);return z2(t,n._query,{source:"server"}).then(s=>new Nr(e,r,n,s))}function mv(n,e,t){n=$e(n,ct);const r=$e(n.firestore,Ot),s=jp(n.converter,e,t);return sf(r,[Pp(Po(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,vt.none())])}function fu(n,e,t,...r){n=$e(n,ct);const s=$e(n.firestore,Ot),o=Po(s);let u;return u=typeof(e=ht(e))=="string"||e instanceof aa?$0(o,"updateDoc",n._key,e,t,r):G0(o,"updateDoc",n._key,e),sf(s,[u.toMutation(n._key,vt.exists(!0))])}function pv(n){return sf($e(n.firestore,Ot),[new vu(n._key,vt.none())])}function Z0(n,e){const t=$e(n.firestore,Ot),r=Vn(n),s=jp(n.converter,e);return sf(t,[Pp(Po(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function rf(n,...e){var t,r,s;n=ht(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||fv(e[u])||(o=e[u++]);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fv(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let d,p,y;if(n instanceof ct)p=$e(n.firestore,Ot),y=yu(n._key.path),d={next:v=>{e[u]&&e[u](eb(p,n,v))},error:e[u+1],complete:e[u+2]};else{const v=$e(n,Dn);p=$e(v.firestore,Ot),y=v._query;const E=new Vo(p);d={next:A=>{e[u]&&e[u](new Nr(p,E,v,A))},error:e[u+1],complete:e[u+2]},iR(n._query)}return function(E,A,R,P){const D=new Np(P),V=new O0(A,D,R);return E.asyncQueue.enqueueAndForget(async()=>C0(await hu(E),V)),()=>{D.Ou(),E.asyncQueue.enqueueAndForget(async()=>N0(await hu(E),V))}}(En(p),y,h,d)}function hM(n,e){return P6(En(n=$e(n,Ot)),fv(e)?e:{next:e})}function sf(n,e){return function(r,s){const o=new dn;return r.asyncQueue.enqueueAndForget(async()=>a6(await B0(r),s,o)),o.promise}(En(n),e)}function eb(n,e,t){const r=t.docs.get(e._key),s=new Vo(n);return new _r(n,s,e._key,r,new uo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dM=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Po(e)}set(e,t,r){this._verifyNotCommitted();const s=qs(e,this._firestore),o=jp(s.converter,t,r),u=Pp(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,vt.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const o=qs(e,this._firestore);let u;return u=typeof(t=ht(t))=="string"||t instanceof aa?$0(this._dataReader,"WriteBatch.update",o._key,t,r,s):G0(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qs(e,this._firestore);return this._mutations=this._mutations.concat(new vu(t._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qs(n,e){if((n=ht(n)).firestore!==e)throw new ae(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Po(e)}get(e){const t=qs(e,this._firestore),r=new sM(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||s.length!==1)return pe(24041);const o=s[0];if(o.isFoundDocument())return new Oh(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Oh(this._firestore,r,t._key,null,t.converter);throw pe(18433,{doc:o})})}set(e,t,r){const s=qs(e,this._firestore),o=jp(s.converter,t,r),u=Pp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,u),this}update(e,t,r,...s){const o=qs(e,this._firestore);let u;return u=typeof(t=ht(t))=="string"||t instanceof aa?$0(this._dataReader,"Transaction.update",o._key,t,r,s):G0(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=qs(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pM=class extends mM{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qs(e,this._firestore),r=new Vo(this._firestore);return super.get(e).then(s=>new _r(this._firestore,r,t._key,s._document,new uo(!1,!1),t.converter))}};function gM(n,e,t){n=$e(n,Ot);const r=Object.assign(Object.assign({},fM),t);return function(o){if(o.maxAttempts<1)throw new ae(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,h){const d=new dn;return o.asyncQueue.enqueueAndForget(async()=>{const p=await R6(o);new I6(o.asyncQueue,p,h,u,d).zu()}),d.promise}(En(n),s=>e(new pM(n,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(){return new ef("deleteField")}function Bp(){return new z0("serverTimestamp")}function gv(...n){return new q0("arrayUnion",n)}function _M(...n){return new F0("arrayRemove",n)}function vM(n){return new H0("increment",n)}(function(e,t=!0){(function(s){gu=s})(oa),Js(new Ki("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new Ot(new Ek(r.getProvider("auth-internal")),new Sk(u,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ae(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(p.options.projectId,y)}(u,s),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),yr(S1,A1,e),yr(S1,A1,"esm2017")})();const bM="@firebase/firestore-compat",EM="0.3.53";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(){if(typeof Uint8Array>"u")throw new ae("unimplemented","Uint8Arrays are not available in this environment.")}function XS(){if(!iV())throw new ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}let hR=class yv{constructor(e){this._delegate=e}static fromBase64String(e){return XS(),new yv(vn.fromBase64String(e))}static fromUint8Array(e){return YS(),new yv(vn.fromUint8Array(e))}toBase64(){return XS(),this._delegate.toBase64()}toUint8Array(){return YS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n){return TM(n,["next","error","complete"])}function TM(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{enableIndexedDbPersistence(e,t){return B6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return z6(e._delegate)}clearIndexedDbPersistence(e){return q6(e._delegate)}}class fR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){H2(this._delegate,e,t,r)}enableNetwork(){return H6(this._delegate)}disableNetwork(){return G6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return F6(this._delegate)}onSnapshotsInSync(e){return hM(this._delegate,e)}get app(){if(!this._appCompat)throw new ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new du(this,Yn(this._delegate,e))}catch(t){throw Rn(t,"collection()","Firestore.collection()")}}doc(e){try{return new pr(this,Vn(this._delegate,e))}catch(t){throw Rn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new In(this,M6(this._delegate,e))}catch(t){throw Rn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return gM(this._delegate,t=>e(new dR(this,t)))}batch(){return En(this._delegate),new mR(new dM(this._delegate,e=>sf(this._delegate,e)))}loadBundle(e){return $6(this._delegate,e)}namedQuery(e){return K6(this._delegate,e).then(t=>t?new In(this,t):null)}}class zp extends J0{constructor(e){super(),this.firestore=e}convertBytes(e){return new hR(new vn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pr.forKey(t,this.firestore,null)}}function SM(n){yk(n)}class dR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zp(e)}get(e){const t=co(e);return this._delegate.get(t).then(r=>new Ph(this._firestore,new _r(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=co(e);return r?(tb("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=co(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=co(e);return this._delegate.delete(t),this}}class mR{constructor(e){this._delegate=e}set(e,t,r){const s=co(e);return r?(tb("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=co(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=co(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Co{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Co.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let o=s.get(t);return o||(o=new Co(e,new zp(e),t),s.set(t,o)),o}}Co.INSTANCES=new WeakMap;class pr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pr(t,new ct(t._delegate,r,new he(e)))}static forKey(e,t,r){return new pr(t,new ct(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new du(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new du(this.firestore,Yn(this._delegate,e))}catch(t){throw Rn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ht(e),e instanceof ct?K2(this._delegate,e):!1}set(e,t){t=tb("DocumentReference.set",t);try{return t?mv(this._delegate,e,t):mv(this._delegate,e)}catch(r){throw Rn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?fu(this._delegate,e):fu(this._delegate,e,t,...r)}catch(s){throw Rn(s,"updateDoc()","DocumentReference.update()")}}delete(){return pv(this._delegate)}onSnapshot(...e){const t=pR(e),r=gR(e,s=>new Ph(this.firestore,new _r(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return rf(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=oM(this._delegate):e?.source==="server"?t=lM(this._delegate):t=Au(this._delegate),t.then(r=>new Ph(this.firestore,new _r(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pr(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Rn(n,e,t){return n.message=n.message.replace(e,t),n}function pR(n){for(const e of n)if(typeof e=="object"&&!_v(e))return e;return{}}function gR(n,e){var t,r;let s;return _v(n[0])?s=n[0]:_v(n[1])?s=n[1]:typeof n[0]=="function"?s={next:n[0],error:n[1],complete:n[2]}:s={next:n[1],error:n[2],complete:n[3]},{next:o=>{s.next&&s.next(e(o))},error:(t=s.error)===null||t===void 0?void 0:t.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class Ph{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cR(this._delegate,e._delegate)}}class kh extends Ph{data(e){const t=this._delegate.data(e);return this._delegate._converter||_k(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class In{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zp(e)}where(e,t,r){try{return new In(this.firestore,hn(this._delegate,xn(e,t,r)))}catch(s){throw Rn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new In(this.firestore,hn(this._delegate,W0(e,t)))}catch(r){throw Rn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new In(this.firestore,hn(this._delegate,Mp(e)))}catch(t){throw Rn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new In(this.firestore,hn(this._delegate,eM(e)))}catch(t){throw Rn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new In(this.firestore,hn(this._delegate,tM(...e)))}catch(t){throw Rn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new In(this.firestore,hn(this._delegate,nM(...e)))}catch(t){throw Rn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new In(this.firestore,hn(this._delegate,rM(...e)))}catch(t){throw Rn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new In(this.firestore,hn(this._delegate,iM(...e)))}catch(t){throw Rn(t,"endAt()","Query.endAt()")}}isEqual(e){return Q2(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=uM(this._delegate):e?.source==="server"?t=cM(this._delegate):t=Ro(this._delegate),t.then(r=>new vv(this.firestore,new Nr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=pR(e),r=gR(e,s=>new vv(this.firestore,new Nr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return rf(this._delegate,t,r)}withConverter(e){return new In(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class AM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new In(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new AM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new kh(this._firestore,r))})}isEqual(e){return cR(this._delegate,e._delegate)}}class du extends In{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pr(this.firestore,e):null}doc(e){try{return e===void 0?new pr(this.firestore,Vn(this._delegate)):new pr(this.firestore,Vn(this._delegate,e))}catch(t){throw Rn(t,"doc()","CollectionReference.doc()")}}add(e){return Z0(this._delegate,e).then(t=>new pr(this.firestore,t))}isEqual(e){return K2(this._delegate,e._delegate)}withConverter(e){return new du(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function co(n){return $e(n,ct)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(...e){this._delegate=new aa(...e)}static documentId(){return new nb(_t.keyField().canonicalString())}isEqual(e){return e=ht(e),e instanceof aa?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static serverTimestamp(){const e=Bp();return e._methodName="FieldValue.serverTimestamp",new oo(e)}static delete(){const e=yM();return e._methodName="FieldValue.delete",new oo(e)}static arrayUnion(...e){const t=gv(...e);return t._methodName="FieldValue.arrayUnion",new oo(t)}static arrayRemove(...e){const t=_M(...e);return t._methodName="FieldValue.arrayRemove",new oo(t)}static increment(e){const t=vM(e);return t._methodName="FieldValue.increment",new oo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM={Firestore:fR,GeoPoint:Cr,Timestamp:Xe,Blob:hR,Transaction:dR,WriteBatch:mR,DocumentReference:pr,DocumentSnapshot:Ph,Query:In,QueryDocumentSnapshot:kh,QuerySnapshot:vv,CollectionReference:du,FieldPath:nb,FieldValue:oo,setLogLevel:SM,CACHE_SIZE_UNLIMITED:U6};function xM(n,e){n.INTERNAL.registerComponent(new Ki("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},IM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n){xM(n,(e,t)=>new fR(e,t,new wM)),n.registerVersion(bM,EM)}RM(gk);const CM={selectedUser:null,selectedFriend:null},yR=KO({name:"user",initialState:CM,reducers:{setSelectedUser:(n,e)=>{n.selectedUser=e.payload},logout:n=>{n.selectedUser=null,n.selectedUser={uid:"",email:"",name:"",photoURL:"",login:!1,friends:[]},n.selectedUser.name="",n.selectedUser.email="",n.selectedUser.photoURL="",n.selectedUser.login=!1,n.selectedUser.friends=[]},setSelectedFriend:(n,e)=>{n.selectedFriend=e.payload},clearSelectedFriend:n=>{n.selectedFriend=null}}}),{setSelectedUser:NM,logout:DM,setSelectedFriend:_R,clearSelectedFriend:OM}=yR.actions,PM=yR.reducer,kM={key:"root",storage:S4},VM=d4(kM,PM),vR=BO({reducer:{user:VM},middleware:n=>n({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}})}),MM=v4(vR);function um(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?um=function(t){return typeof t}:um=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(n)}function LM(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function UM(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jM(n,e,t){return e&&UM(n.prototype,e),n}function BM(n,e){return e&&(um(e)==="object"||typeof e=="function")?e:cm(n)}function bv(n){return bv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bv(n)}function cm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zM(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&Ev(n,e)}function Ev(n,e){return Ev=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Ev(n,e)}function hm(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var bR=function(n){zM(e,n);function e(){var t,r;LM(this,e);for(var s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];return r=BM(this,(t=bv(e)).call.apply(t,[this].concat(o))),hm(cm(r),"state",{bootstrapped:!1}),hm(cm(r),"_unsubscribe",void 0),hm(cm(r),"handlePersistorState",function(){var h=r.props.persistor,d=h.getState(),p=d.bootstrapped;p&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return jM(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(z.PureComponent);hm(bR,"defaultProps",{children:null,loading:null});var Kc={},WS;function qM(){if(WS)return Kc;WS=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.parse=u,Kc.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,A){const R=new o,P=E.length;if(P<2)return R;const D=A?.decode||y;let V=0;do{const F=E.indexOf("=",V);if(F===-1)break;const B=E.indexOf(";",V),X=B===-1?P:B;if(F>X){V=E.lastIndexOf(";",F-1)+1;continue}const ee=h(E,V,F),te=d(E,F,ee),C=E.slice(ee,te);if(R[C]===void 0){let x=h(E,F+1,X),N=d(E,X,x);const M=D(E.slice(x,N));R[C]=M}V=X+1}while(V<P);return R}function h(E,A,R){do{const P=E.charCodeAt(A);if(P!==32&&P!==9)return A}while(++A<R);return R}function d(E,A,R){for(;A>R;){const P=E.charCodeAt(--A);if(P!==32&&P!==9)return A+1}return R}function p(E,A,R){const P=R?.encode||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const D=P(A);if(!e.test(D))throw new TypeError(`argument val is invalid: ${A}`);let V=E+"="+D;if(!R)return V;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);V+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);V+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);V+="; Path="+R.path}if(R.expires){if(!v(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);V+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(V+="; HttpOnly"),R.secure&&(V+="; Secure"),R.partitioned&&(V+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return V}function y(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function v(E){return s.call(E)==="[object Date]"}return Kc}qM();var JS="popstate";function FM(n={}){function e(r,s){let{pathname:o,search:u,hash:h}=r.location;return Tv("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Vh(s)}return GM(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function si(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HM(){return Math.random().toString(36).substring(2,10)}function ZS(n,e){return{usr:n.state,key:n.key,idx:e}}function Tv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Iu(e):e,state:t,key:e&&e.key||r||HM()}}function Vh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Iu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function GM(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,h="POP",d=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let D=y(),V=D==null?null:D-p;p=D,d&&d({action:h,location:P.location,delta:V})}function E(D,V){h="PUSH";let F=Tv(P.location,D,V);p=y()+1;let B=ZS(F,p),X=P.createHref(F);try{u.pushState(B,"",X)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;s.location.assign(X)}o&&d&&d({action:h,location:P.location,delta:1})}function A(D,V){h="REPLACE";let F=Tv(P.location,D,V);p=y();let B=ZS(F,p),X=P.createHref(F);u.replaceState(B,"",X),o&&d&&d({action:h,location:P.location,delta:0})}function R(D){return $M(D)}let P={get action(){return h},get location(){return n(s,u)},listen(D){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(JS,v),d=D,()=>{s.removeEventListener(JS,v),d=null}},createHref(D){return e(s,D)},createURL:R,encodeLocation(D){let V=R(D);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:A,go(D){return u.go(D)}};return P}function $M(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Vh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function ER(n,e,t="/"){return KM(n,e,t,!1)}function KM(n,e,t,r){let s=typeof e=="string"?Iu(e):e,o=Wi(s.pathname||"/",t);if(o==null)return null;let u=TR(n);QM(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=s5(o);h=r5(u[d],p,r)}return h}function TR(n,e=[],t=[],r=""){let s=(o,u,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(Et(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let p=Fi([r,d.relativePath]),y=t.concat(d);o.children&&o.children.length>0&&(Et(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),TR(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:t5(p,o.index),routesMeta:y})};return n.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))s(o,u);else for(let h of wR(o.path))s(o,u,h)}),e}function wR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=wR(r.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function QM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:n5(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var YM=/^:[\w-]+$/,XM=3,WM=2,JM=1,ZM=10,e5=-2,eA=n=>n==="*";function t5(n,e){let t=n.split("/"),r=t.length;return t.some(eA)&&(r+=e5),e&&(r+=WM),t.filter(s=>!eA(s)).reduce((s,o)=>s+(YM.test(o)?XM:o===""?JM:ZM),r)}function n5(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function r5(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",u=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=Qm({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=Qm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:Fi([o,v.pathname]),pathnameBase:u5(Fi([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=Fi([o,v.pathnameBase]))}return u}function Qm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=i5(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:v},E)=>{if(y==="*"){let R=h[E]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const A=h[E];return v&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function i5(n,e=!1,t=!0){si(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function s5(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Wi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function a5(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Iu(n):n;return{pathname:t?t.startsWith("/")?t:o5(t,e):e,search:c5(r),hash:h5(s)}}function o5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function v_(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function l5(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function SR(n){let e=l5(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function AR(n,e,t,r=!1){let s;typeof n=="string"?s=Iu(n):(s={...n},Et(!s.pathname||!s.pathname.includes("?"),v_("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),v_("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),v_("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}h=v>=0?e[v]:"/"}let d=a5(s,h),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Fi=n=>n.join("/").replace(/\/\/+/g,"/"),u5=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),c5=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,h5=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function f5(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var IR=["POST","PUT","PATCH","DELETE"];new Set(IR);var d5=["GET",...IR];new Set(d5);var xu=z.createContext(null);xu.displayName="DataRouter";var qp=z.createContext(null);qp.displayName="DataRouterState";var xR=z.createContext({isTransitioning:!1});xR.displayName="ViewTransition";var m5=z.createContext(new Map);m5.displayName="Fetchers";var p5=z.createContext(null);p5.displayName="Await";var ui=z.createContext(null);ui.displayName="Navigation";var af=z.createContext(null);af.displayName="Location";var ci=z.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var rb=z.createContext(null);rb.displayName="RouteError";function g5(n,{relative:e}={}){Et(of(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(ui),{hash:s,pathname:o,search:u}=lf(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Fi([t,o])),r.createHref({pathname:h,search:u,hash:s})}function of(){return z.useContext(af)!=null}function da(){return Et(of(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(af).location}var RR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CR(n){z.useContext(ui).static||z.useLayoutEffect(n)}function Ru(){let{isDataRoute:n}=z.useContext(ci);return n?D5():y5()}function y5(){Et(of(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(xu),{basename:e,navigator:t}=z.useContext(ui),{matches:r}=z.useContext(ci),{pathname:s}=da(),o=JSON.stringify(SR(r)),u=z.useRef(!1);return CR(()=>{u.current=!0}),z.useCallback((d,p={})=>{if(si(u.current,RR),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=AR(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Fi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,s,n])}var _5=z.createContext(null);function v5(n){let e=z.useContext(ci).outlet;return e&&z.createElement(_5.Provider,{value:n},e)}function lf(n,{relative:e}={}){let{matches:t}=z.useContext(ci),{pathname:r}=da(),s=JSON.stringify(SR(t));return z.useMemo(()=>AR(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function b5(n,e){return NR(n,e)}function NR(n,e,t,r){Et(of(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=z.useContext(ui),{matches:o}=z.useContext(ci),u=o[o.length-1],h=u?u.params:{},d=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let V=y&&y.path||"";DR(d,!y||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let v=da(),E;if(e){let V=typeof e=="string"?Iu(e):e;Et(p==="/"||V.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${V.pathname}" was given in the \`location\` prop.`),E=V}else E=v;let A=E.pathname||"/",R=A;if(p!=="/"){let V=p.replace(/^\//,"").split("/");R="/"+A.replace(/^\//,"").split("/").slice(V.length).join("/")}let P=ER(n,{pathname:R});si(y||P!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),si(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=A5(P&&P.map(V=>Object.assign({},V,{params:Object.assign({},h,V.params),pathname:Fi([p,s.encodeLocation?s.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?p:Fi([p,s.encodeLocation?s.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,t,r);return e&&D?z.createElement(af.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},D):D}function E5(){let n=N5(),e=f5(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:s},t):null,u)}var T5=z.createElement(E5,null),w5=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?z.createElement(ci.Provider,{value:this.props.routeContext},z.createElement(rb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S5({routeContext:n,match:e,children:t}){let r=z.useContext(xu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(ci.Provider,{value:n},t)}function A5(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t?.errors;if(o!=null){let d=s.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Et(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,h=-1;if(t)for(let d=0;d<s.length;d++){let p=s[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:y,errors:v}=t,E=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||E){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,p,y)=>{let v,E=!1,A=null,R=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||T5,u&&(h<0&&y===0?(DR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,R=null):h===y&&(E=!0,R=p.route.hydrateFallbackElement||null)));let P=e.concat(s.slice(0,y+1)),D=()=>{let V;return v?V=A:E?V=R:p.route.Component?V=z.createElement(p.route.Component,null):p.route.element?V=p.route.element:V=d,z.createElement(S5,{match:p,routeContext:{outlet:d,matches:P,isDataRoute:t!=null},children:V})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?z.createElement(w5,{location:t.location,revalidation:t.revalidation,component:A,error:v,children:D(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):D()},null)}function ib(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I5(n){let e=z.useContext(xu);return Et(e,ib(n)),e}function x5(n){let e=z.useContext(qp);return Et(e,ib(n)),e}function R5(n){let e=z.useContext(ci);return Et(e,ib(n)),e}function sb(n){let e=R5(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function C5(){return sb("useRouteId")}function N5(){let n=z.useContext(rb),e=x5("useRouteError"),t=sb("useRouteError");return n!==void 0?n:e.errors?.[t]}function D5(){let{router:n}=I5("useNavigate"),e=sb("useNavigate"),t=z.useRef(!1);return CR(()=>{t.current=!0}),z.useCallback(async(s,o={})=>{si(t.current,RR),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var tA={};function DR(n,e,t){!e&&!tA[n]&&(tA[n]=!0,si(!1,t))}z.memo(O5);function O5({routes:n,future:e,state:t}){return NR(n,void 0,t,e)}function P5(n){return v5(n.context)}function Ui(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k5({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Et(!of(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=Iu(t));let{pathname:d="/",search:p="",hash:y="",state:v=null,key:E="default"}=t,A=z.useMemo(()=>{let R=Wi(d,u);return R==null?null:{location:{pathname:R,search:p,hash:y,state:v,key:E},navigationType:r}},[u,d,p,y,v,E,r]);return si(A!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:z.createElement(ui.Provider,{value:h},z.createElement(af.Provider,{children:e,value:A}))}function V5({children:n,location:e}){return b5(wv(n),e)}function wv(n,e=[]){let t=[];return z.Children.forEach(n,(r,s)=>{if(!z.isValidElement(r))return;let o=[...e,s];if(r.type===z.Fragment){t.push.apply(t,wv(r.props.children,o));return}Et(r.type===Ui,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=wv(r.props.children,o)),t.push(u)}),t}var fm="get",dm="application/x-www-form-urlencoded";function Fp(n){return n!=null&&typeof n.tagName=="string"}function M5(n){return Fp(n)&&n.tagName.toLowerCase()==="button"}function L5(n){return Fp(n)&&n.tagName.toLowerCase()==="form"}function U5(n){return Fp(n)&&n.tagName.toLowerCase()==="input"}function j5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function B5(n,e){return n.button===0&&(!e||e==="_self")&&!j5(n)}var Kd=null;function z5(){if(Kd===null)try{new FormData(document.createElement("form"),0),Kd=!1}catch{Kd=!0}return Kd}var q5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b_(n){return n!=null&&!q5.has(n)?(si(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dm}"`),null):n}function F5(n,e){let t,r,s,o,u;if(L5(n)){let h=n.getAttribute("action");r=h?Wi(h,e):null,t=n.getAttribute("method")||fm,s=b_(n.getAttribute("enctype"))||dm,o=new FormData(n)}else if(M5(n)||U5(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Wi(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||fm,s=b_(n.getAttribute("formenctype"))||b_(h.getAttribute("enctype"))||dm,o=new FormData(h,n),!z5()){let{name:p,type:y,value:v}=n;if(y==="image"){let E=p?`${p}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else p&&o.append(p,v)}}else{if(Fp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fm,r=null,s=dm,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:u}}function ab(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function H5(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function G5(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $5(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await H5(o,t);return u.links?u.links():[]}return[]}));return X5(r.flat(1).filter(G5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function nA(n,e,t,r,s,o){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>t[p].pathname!==d.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,p)=>u(d,p)||h(d,p)):o==="data"?e.filter((d,p)=>{let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function K5(n,e,{includeHydrateFallback:t}={}){return Q5(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Q5(n){return[...new Set(n)]}function Y5(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function X5(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(Y5(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var W5=new Set([100,101,204,205]);function J5(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Wi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function OR(){let n=z.useContext(xu);return ab(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Z5(){let n=z.useContext(qp);return ab(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ob=z.createContext(void 0);ob.displayName="FrameworkContext";function PR(){let n=z.useContext(ob);return ab(n,"You must render this element inside a <HydratedRouter> element"),n}function eL(n,e){let t=z.useContext(ob),[r,s]=z.useState(!1),[o,u]=z.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,E=z.useRef(null);z.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let P=V=>{V.forEach(F=>{u(F.isIntersecting)})},D=new IntersectionObserver(P,{threshold:.5});return E.current&&D.observe(E.current),()=>{D.disconnect()}}},[n]),z.useEffect(()=>{if(r){let P=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(P)}}},[r]);let A=()=>{s(!0)},R=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,E,{}]:[o,E,{onFocus:Qc(h,A),onBlur:Qc(d,R),onMouseEnter:Qc(p,A),onMouseLeave:Qc(y,R),onTouchStart:Qc(v,A)}]:[!1,E,{}]}function Qc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tL({page:n,...e}){let{router:t}=OR(),r=z.useMemo(()=>ER(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?z.createElement(rL,{page:n,matches:r,...e}):null}function nL(n){let{manifest:e,routeModules:t}=PR(),[r,s]=z.useState([]);return z.useEffect(()=>{let o=!1;return $5(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),r}function rL({page:n,matches:e,...t}){let r=da(),{manifest:s,routeModules:o}=PR(),{basename:u}=OR(),{loaderData:h,matches:d}=Z5(),p=z.useMemo(()=>nA(n,e,d,s,r,"data"),[n,e,d,s,r]),y=z.useMemo(()=>nA(n,e,d,s,r,"assets"),[n,e,d,s,r]),v=z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,P=!1;if(e.forEach(V=>{let F=s.routes[V.route.id];!F||!F.hasLoader||(!p.some(B=>B.route.id===V.route.id)&&V.route.id in h&&o[V.route.id]?.shouldRevalidate||F.hasClientLoader?P=!0:R.add(V.route.id))}),R.size===0)return[];let D=J5(n,u);return P&&R.size>0&&D.searchParams.set("_routes",e.filter(V=>R.has(V.route.id)).map(V=>V.route.id).join(",")),[D.pathname+D.search]},[u,h,r,s,p,e,n,o]),E=z.useMemo(()=>K5(y,s),[y,s]),A=nL(y);return z.createElement(z.Fragment,null,v.map(R=>z.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),E.map(R=>z.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),A.map(({key:R,link:P})=>z.createElement("link",{key:R,...P})))}function iL(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kR&&(window.__reactRouterVersion="7.6.3")}catch{}function sL({basename:n,children:e,window:t}){let r=z.useRef();r.current==null&&(r.current=FM({window:t,v5Compat:!0}));let s=r.current,[o,u]=z.useState({action:s.action,location:s.location}),h=z.useCallback(d=>{z.startTransition(()=>u(d))},[u]);return z.useLayoutEffect(()=>s.listen(h),[s,h]),z.createElement(k5,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var VR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MR=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:p,preventScrollReset:y,viewTransition:v,...E},A){let{basename:R}=z.useContext(ui),P=typeof p=="string"&&VR.test(p),D,V=!1;if(typeof p=="string"&&P&&(D=p,kR))try{let N=new URL(window.location.href),M=p.startsWith("//")?new URL(N.protocol+p):new URL(p),U=Wi(M.pathname,R);M.origin===N.origin&&U!=null?p=U+M.search+M.hash:V=!0}catch{si(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=g5(p,{relative:s}),[B,X,ee]=eL(r,E),te=lL(p,{replace:u,state:h,target:d,preventScrollReset:y,relative:s,viewTransition:v});function C(N){e&&e(N),N.defaultPrevented||te(N)}let x=z.createElement("a",{...E,...ee,href:D||F,onClick:V||o?e:C,ref:iL(A,X),target:d,"data-discover":!P&&t==="render"?"true":void 0});return B&&!P?z.createElement(z.Fragment,null,x,z.createElement(tL,{page:F})):x});MR.displayName="Link";var Fs=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...p},y){let v=lf(u,{relative:p.relative}),E=da(),A=z.useContext(qp),{navigator:R,basename:P}=z.useContext(ui),D=A!=null&&dL(v)&&h===!0,V=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,F=E.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(F=F.toLowerCase(),B=B?B.toLowerCase():null,V=V.toLowerCase()),B&&P&&(B=Wi(B,P)||B);const X=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ee=F===V||!s&&F.startsWith(V)&&F.charAt(X)==="/",te=B!=null&&(B===V||!s&&B.startsWith(V)&&B.charAt(V.length)==="/"),C={isActive:ee,isPending:te,isTransitioning:D},x=ee?e:void 0,N;typeof r=="function"?N=r(C):N=[r,ee?"active":null,te?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(C):o;return z.createElement(MR,{...p,"aria-current":x,className:N,ref:y,style:M,to:u,viewTransition:h},typeof d=="function"?d(C):d)});Fs.displayName="NavLink";var aL=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:u=fm,action:h,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:v,...E},A)=>{let R=hL(),P=fL(h,{relative:p}),D=u.toLowerCase()==="get"?"get":"post",V=typeof h=="string"&&VR.test(h),F=B=>{if(d&&d(B),B.defaultPrevented)return;B.preventDefault();let X=B.nativeEvent.submitter,ee=X?.getAttribute("formmethod")||u;R(X||B.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:s,state:o,relative:p,preventScrollReset:y,viewTransition:v})};return z.createElement("form",{ref:A,method:D,action:P,onSubmit:r?d:F,...E,"data-discover":!V&&n==="render"?"true":void 0})});aL.displayName="Form";function oL(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LR(n){let e=z.useContext(xu);return Et(e,oL(n)),e}function lL(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=Ru(),d=da(),p=lf(n,{relative:o});return z.useCallback(y=>{if(B5(y,e)){y.preventDefault();let v=t!==void 0?t:Vh(d)===Vh(p);h(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:u})}},[d,h,p,t,r,e,n,s,o,u])}var uL=0,cL=()=>`__${String(++uL)}__`;function hL(){let{router:n}=LR("useSubmit"),{basename:e}=z.useContext(ui),t=C5();return z.useCallback(async(r,s={})=>{let{action:o,method:u,encType:h,formData:d,body:p}=F5(r,e);if(s.navigate===!1){let y=s.fetcherKey||cL();await n.fetch(y,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function fL(n,{relative:e}={}){let{basename:t}=z.useContext(ui),r=z.useContext(ci);Et(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...lf(n||".",{relative:e})},u=da();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Fi([t,o.pathname])),Vh(o)}function dL(n,e={}){let t=z.useContext(xR);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=LR("useViewTransitionState"),s=lf(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Wi(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Wi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Qm(s.pathname,u)!=null||Qm(s.pathname,o)!=null}[...W5];var mL="firebase",pL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(mL,pL,"app");function lb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function UR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gL=UR,jR=new Do("auth","Firebase",UR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=new dp("@firebase/auth");function yL(n,...e){Ym.logLevel<=Me.WARN&&Ym.warn(`Auth (${oa}): ${n}`,...e)}function mm(n,...e){Ym.logLevel<=Me.ERROR&&Ym.error(`Auth (${oa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n,...e){throw cb(n,...e)}function Dr(n,...e){return cb(n,...e)}function ub(n,e,t){const r=Object.assign(Object.assign({},gL()),{[e]:t});return new Do("auth","Firebase",r).create(e,{appName:n.name})}function po(n){return ub(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _L(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ai(n,"argument-error"),ub(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cb(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jR.create(n,...e)}function Ie(n,e,...t){if(!n)throw cb(e,...t)}function Bi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mm(e),new Error(e)}function Ji(n,e){n||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function vL(){return rA()==="http:"||rA()==="https:"}function rA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vL()||z4()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ji(t>e,"Short delay should be less than long delay!"),this.isMobile=U4()||q4()}get(){return bL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(n,e){Ji(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SL=new uf(3e4,6e4);function fb(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Cu(n,e,t,r,s={}){return zR(n,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=Bh(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return B4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&pu(n.emulatorConfig.host)&&(p.credentials="include"),BR.fetch()(await qR(n,n.config.apiHost,t,h),p)})}async function zR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},TL),e);try{const s=new IL(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Qd(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Qd(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Qd(n,"user-disabled",u);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ub(n,y,p);ai(n,y)}}catch(s){if(s instanceof li)throw s;ai(n,"network-request-failed",{message:String(s)})}}async function AL(n,e,t,r,s={}){const o=await Cu(n,e,t,r,s);return"mfaPendingCredential"in o&&ai(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function qR(n,e,t,r){const s=`${e}${t}?${r}`,o=n,u=o.config.emulator?hb(n.config,s):`${n.config.apiScheme}://${s}`;return wL.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}class IL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),SL.get())})}}function Qd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Dr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(n,e){return Cu(n,"POST","/v1/accounts:delete",e)}async function Xm(n,e){return Cu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RL(n,e=!1){const t=ht(n),r=await t.getIdToken(e),s=db(r);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:dh(E_(s.auth_time)),issuedAtTime:dh(E_(s.iat)),expirationTime:dh(E_(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function E_(n){return Number(n)*1e3}function db(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return mm("JWT malformed, contained fewer than 3 sections"),null;try{const s=Bv(t);return s?JSON.parse(s):(mm("Failed to decode base64 JWT payload"),null)}catch(s){return mm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function iA(n){const e=db(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof li&&CL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function CL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dh(this.lastLoginAt),this.creationTime=dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wm(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Mh(n,Xm(t,{idToken:r}));Ie(s?.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?FR(o.providerUserInfo):[],h=OL(n.providerData,u),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!h?.length,y=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Av(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function DL(n){const e=ht(n);await Wm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OL(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function FR(n){return n.map(e=>{var{providerId:t}=e,r=lb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(n,e){const t=await zR(n,{},async()=>{const r=Bh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=await qR(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return n.emulatorConfig&&pu(n.emulatorConfig.host)&&(d.credentials="include"),BR.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kL(n,e){return Cu(n,"POST","/v2/accounts:revokeToken",fb(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=iA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await PL(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,u=new zl;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zl,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=lb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Av(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Mh(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RL(this,e)}reload(){return DL(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Wm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(po(this.auth));const e=await this.getIdToken();return await Mh(this,xL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,u,h,d,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,P=(h=t.tenantId)!==null&&h!==void 0?h:void 0,D=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,V=(p=t.createdAt)!==null&&p!==void 0?p:void 0,F=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:B,emailVerified:X,isAnonymous:ee,providerData:te,stsTokenManager:C}=t;Ie(B&&C,e,"internal-error");const x=zl.fromJSON(this.name,C);Ie(typeof B=="string",e,"internal-error"),Ms(v,e.name),Ms(E,e.name),Ie(typeof X=="boolean",e,"internal-error"),Ie(typeof ee=="boolean",e,"internal-error"),Ms(A,e.name),Ms(R,e.name),Ms(P,e.name),Ms(D,e.name),Ms(V,e.name),Ms(F,e.name);const N=new Rr({uid:B,auth:e,email:E,emailVerified:X,displayName:v,isAnonymous:ee,photoURL:R,phoneNumber:A,tenantId:P,stsTokenManager:x,createdAt:V,lastLoginAt:F});return te&&Array.isArray(te)&&(N.providerData=te.map(M=>Object.assign({},M))),D&&(N._redirectEventId=D),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new zl;s.updateFromServerResponse(t);const o=new Rr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?FR(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,h=new zl;h.updateFromIdToken(r);const d=new Rr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Av(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Map;function zi(n){Ji(n instanceof Function,"Expected a class definition");let e=sA.get(n);return e?(Ji(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HR.type="NONE";const aA=HR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n,e,t){return`firebase:${n}:${e}:${t}`}class ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=pm(this.userKey,s.apiKey,o),this.fullPersistenceKey=pm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xm(this.auth,{idToken:e}).catch(()=>{});return t?Rr._fromGetAccountInfoResponse(this.auth,t,e):null}return Rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ql(zi(aA),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||zi(aA);const u=pm(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(u);if(y){let v;if(typeof y=="string"){const E=await Xm(e,{idToken:y}).catch(()=>{});if(!E)break;v=await Rr._fromGetAccountInfoResponse(e,E,y)}else v=Rr._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ql(o,e,r):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new ql(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XR(e))return"Blackberry";if(WR(e))return"Webos";if($R(e))return"Safari";if((e.includes("chrome/")||KR(e))&&!e.includes("edge/"))return"Chrome";if(YR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function GR(n=Kt()){return/firefox\//i.test(n)}function $R(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KR(n=Kt()){return/crios\//i.test(n)}function QR(n=Kt()){return/iemobile/i.test(n)}function YR(n=Kt()){return/android/i.test(n)}function XR(n=Kt()){return/blackberry/i.test(n)}function WR(n=Kt()){return/webos/i.test(n)}function mb(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VL(n=Kt()){var e;return mb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ML(){return F4()&&document.documentMode===10}function JR(n=Kt()){return mb(n)||YR(n)||WR(n)||XR(n)||/windows phone/i.test(n)||QR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n,e=[]){let t;switch(n){case"Browser":t=oA(Kt());break;case"Worker":t=`${oA(Kt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(n,e={}){return Cu(n,"GET","/v2/passwordPolicy",fb(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=6;class BL{constructor(e){var t,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:jL,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lA(this),this.idTokenSubscription=new lA(this),this.beforeStateQueue=new LL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xm(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(po(this));const t=e?ht(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UL(this),t=new BL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Do("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zi(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&yL(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Hp(n){return ht(n)}class lA{constructor(e){this.auth=e,this.observer=null,this.addObserver=pI(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qL(n){pb=n}function FL(n){return pb.loadJS(n)}function HL(){return pb.gapiScript}function GL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(n,e){const t=zh(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if($i(o,e??{}))return s;ai(s,"already-initialized")}return t.initialize({options:e})}function KL(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function QL(n,e,t){const r=Hp(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=eC(e),{host:u,port:h}=YL(e),d=h===null?"":`:${h}`,p={url:`${o}//${u}${d}/`},y=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie($i(p,r.config.emulator)&&$i(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,pu(u)?(lI(`${o}//${u}${d}`),uI("Auth",!0)):XL()}function eC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function YL(n){const e=eC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:uA(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:uA(u)}}}function uA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(n,e){return AL(n,"POST","/v1/accounts:signInWithIdp",fb(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL="http://localhost";class No extends tC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=lb(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new No(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Fl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Fl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fl(e,t)}buildRequest(){const e={requestUri:WL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends cf{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends cf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return No._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Wr.credential(t,r)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends cf{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends cf{constructor(){super("twitter.com")}static credential(e,t){return No._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bs.credential(t,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Rr._fromIdTokenResponse(e,r,s),u=cA(r);return new mu({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=cA(r);return new mu({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function cA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends li{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Jm(e,t,r,s)}}function nC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jm._fromErrorAndOperation(n,o,e,r):o})}async function JL(n,e,t=!1){const r=await Mh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return mu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(n,e,t=!1){const{auth:r}=n;if(mr(r.app))return Promise.reject(po(r));const s="reauthenticate";try{const o=await Mh(n,nC(r,s,e,n),t);Ie(o.idToken,r,"internal-error");const u=db(o.idToken);Ie(u,r,"internal-error");const{sub:h}=u;return Ie(n.uid===h,r,"user-mismatch"),mu._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ai(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(n,e,t=!1){if(mr(n.app))return Promise.reject(po(n));const r="signIn",s=await nC(n,r,e),o=await mu._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}function t9(n,e,t,r){return ht(n).onIdTokenChanged(e,t,r)}function n9(n,e,t){return ht(n).beforeAuthStateChanged(e,t)}const Zm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=1e3,i9=10;class iC extends rC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);ML()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,i9):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},r9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iC.type="LOCAL";const s9=iC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC extends rC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sC.type="SESSION";const aC=sC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Gp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async p=>p(t.origin,o)),d=await a9(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const p=yb("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function l9(n){ri().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}async function u9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function h9(){return oC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="firebaseLocalStorageDb",f9=1,ep="firebaseLocalStorage",uC="fbase_key";class hf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $p(n,e){return n.transaction([ep],e?"readwrite":"readonly").objectStore(ep)}function d9(){const n=indexedDB.deleteDatabase(lC);return new hf(n).toPromise()}function Iv(){const n=indexedDB.open(lC,f9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ep,{keyPath:uC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ep)?e(r):(r.close(),await d9(),e(await Iv()))})})}async function hA(n,e,t){const r=$p(n,!0).put({[uC]:e,value:t});return new hf(r).toPromise()}async function m9(n,e){const t=$p(n,!1).get(e),r=await new hf(t).toPromise();return r===void 0?null:r.value}function fA(n,e){const t=$p(n,!0).delete(e);return new hf(t).toPromise()}const p9=800,g9=3;class cC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Iv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>g9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gp._getInstance(h9()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await u9(),!this.activeServiceWorker)return;this.sender=new o9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Iv();return await hA(e,Zm,"1"),await fA(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>m9(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=$p(s,!1).getAll();return new hf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cC.type="LOCAL";const y9=cC;new uf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n,e){return e?zi(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends tC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _9(n){return e9(n.auth,new _b(n),n.bypassAuthState)}function v9(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),ZL(t,new _b(n),n.bypassAuthState)}async function b9(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),JL(t,new _b(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _9;case"linkViaPopup":case"linkViaRedirect":return b9;case"reauthViaPopup":case"reauthViaRedirect":return v9;default:ai(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=new uf(2e3,1e4);async function T9(n,e,t){if(mr(n.app))return Promise.reject(Dr(n,"operation-not-supported-in-this-environment"));const r=Hp(n);_L(n,e,gb);const s=hC(r,t);return new ho(r,"signInViaPopup",e,s).executeNotNull()}class ho extends fC{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=yb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E9.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9="pendingRedirect",gm=new Map;class S9 extends fC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gm.get(this.auth._key());if(!e){try{const r=await A9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gm.set(this.auth._key(),e)}return this.bypassAuthState||gm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A9(n,e){const t=R9(e),r=x9(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function I9(n,e){gm.set(n._key(),e)}function x9(n){return zi(n._redirectPersistence)}function R9(n){return pm(w9,n.config.apiKey,n.name)}async function C9(n,e,t=!1){if(mr(n.app))return Promise.reject(po(n));const r=Hp(n),s=hC(r,e),u=await new S9(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=10*60*1e3;class D9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Dr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N9&&this.cachedEventUids.clear(),this.cachedEventUids.has(dA(e))}saveEventToCache(e){this.cachedEventUids.add(dA(e)),this.lastProcessedEventTime=Date.now()}}function dA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function O9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P9(n,e={}){return Cu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V9=/^https?/;async function M9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await P9(n);for(const t of e)try{if(L9(t))return}catch{}ai(n,"unauthorized-domain")}function L9(n){const e=Sv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!V9.test(t))return!1;if(k9.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=new uf(3e4,6e4);function mA(){const n=ri().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function j9(n){return new Promise((e,t)=>{var r,s,o;function u(){mA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mA(),t(Dr(n,"network-request-failed"))},timeout:U9.get()})}if(!((s=(r=ri().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ri().gapi)===null||o===void 0)&&o.load)u();else{const h=GL("iframefcb");return ri()[h]=()=>{gapi.load?u():t(Dr(n,"network-request-failed"))},FL(`${HL()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw ym=null,e})}let ym=null;function B9(n){return ym=ym||j9(n),ym}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=new uf(5e3,15e3),q9="__/auth/iframe",F9="emulator/auth/iframe",H9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $9(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hb(e,F9):`https://${n.config.authDomain}/${q9}`,r={apiKey:e.apiKey,appName:n.name,v:oa},s=G9.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Bh(r).slice(1)}`}async function K9(n){const e=await B9(n),t=ri().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:$9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H9,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Dr(n,"network-request-failed"),h=ri().setTimeout(()=>{o(u)},z9.get());function d(){ri().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y9=500,X9=600,W9="_blank",J9="http://localhost";class pA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z9(n,e,t,r=Y9,s=X9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d=Object.assign(Object.assign({},Q9),{width:r.toString(),height:s.toString(),top:o,left:u}),p=Kt().toLowerCase();t&&(h=KR(p)?W9:t),GR(p)&&(e=e||J9,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[A,R])=>`${E}${A}=${R},`,"");if(VL(p)&&h!=="_self")return eU(e||"",h),new pA(null);const v=window.open(e||"",h,y);Ie(v,n,"popup-blocked");try{v.focus()}catch{}return new pA(v)}function eU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU="__/auth/handler",nU="emulator/auth/handler",rU=encodeURIComponent("fac");async function gA(n,e,t,r,s,o){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:oa,eventId:s};if(e instanceof gb){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Q4(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof cf){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),p=d?`#${rU}=${encodeURIComponent(d)}`:"";return`${iU(n)}?${Bh(h).slice(1)}${p}`}function iU({config:n}){return n.emulator?hb(n,nU):`https://${n.authDomain}/${tU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="webStorageSupport";class sU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aC,this._completeRedirectFn=C9,this._overrideRedirectResult=I9}async _openPopup(e,t,r,s){var o;Ji((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await gA(e,t,r,Sv(),s);return Z9(e,u,yb())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await gA(e,t,r,Sv(),s);return l9(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ji(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await K9(e),r=new D9(e);return t.register("authEvent",s=>(Ie(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(T_,{type:T_},s=>{var o;const u=(o=s?.[0])===null||o===void 0?void 0:o[T_];u!==void 0&&t(!!u),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=M9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JR()||$R()||mb()}}const aU=sU;var yA="@firebase/auth",_A="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uU(n){Js(new Ki("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZR(n)},p=new zL(r,s,o,d);return KL(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Js(new Ki("auth-internal",e=>{const t=Hp(e.getProvider("auth").getImmediate());return(r=>new oU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(yA,_A,lU(n)),yr(yA,_A,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=5*60,hU=oI("authIdTokenMaxAge")||cU;let vA=null;const fU=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hU)return;const s=t?.token;vA!==s&&(vA=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function dU(n=Hv()){const e=zh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$L(n,{popupRedirectResolver:aU,persistence:[y9,s9,aC]}),r=oI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=fU(o.toString());n9(t,u,()=>u(t.currentUser)),t9(t,h=>u(h))}}const s=sI("auth");return s&&QL(t,`http://${s}`),t}function mU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}qL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Dr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",mU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uU("Browser");const pU={apiKey:"AIzaSyDYWbCIntbrMr8mAMrINrlcs1Du5qoF7X8",authDomain:"yu-chat-apps.firebaseapp.com",projectId:"yu-chat-apps",storageBucket:"yu-chat-apps.firebasestorage.app",messagingSenderId:"1090596171423",appId:"1:1090596171423:web:b96e042a7000ac72123caa",measurementId:"G-CWN5L3BQKD"},mC=mp(pU),Ja=dU(mC),Ct=j6(mC);var pC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bA=Ge.createContext&&Ge.createContext(pC),gU=["attr","size","title"];function yU(n,e){if(n==null)return{};var t=_U(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _U(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function tp(){return tp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tp.apply(this,arguments)}function EA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function np(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(t),!0).forEach(function(r){vU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vU(n,e,t){return e=bU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bU(n){var e=EU(n,"string");return typeof e=="symbol"?e:e+""}function EU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gC(n){return n&&n.map((e,t)=>Ge.createElement(e.tag,np({key:t},e.attr),gC(e.child)))}function rs(n){return e=>Ge.createElement(TU,tp({attr:np({},n.attr)},e),gC(n.child))}function TU(n){var e=t=>{var{attr:r,size:s,title:o}=n,u=yU(n,gU),h=s||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Ge.createElement("svg",tp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:d,style:np(np({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&Ge.createElement("title",null,o),n.children)};return bA!==void 0?Ge.createElement(bA.Consumer,null,t=>e(t)):e(pC)}function wU(n){return rs({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"},child:[]},{tag:"path",attr:{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"},child:[]}]})(n)}function SU(n){return rs({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(n)}function TA(n){return rs({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function wA(n){return rs({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(n)}function AU(n){return rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function IU(n){return rs({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm144 386.4V280c0-13.2-10.8-24-24-24s-24 10.8-24 24v151.4C315.5 447 282.8 456 248 456s-67.5-9-96-24.6V280c0-13.2-10.8-24-24-24s-24 10.8-24 24v114.4c-34.6-36-56-84.7-56-138.4 0-110.3 89.7-200 200-200s200 89.7 200 200c0 53.7-21.4 102.5-56 138.4zM205.8 234.5c4.4-2.4 6.9-7.4 6.1-12.4-4-25.2-34.2-42.1-59.8-42.1s-55.9 16.9-59.8 42.1c-.8 5 1.7 10 6.1 12.4 4.4 2.4 9.9 1.8 13.7-1.6l9.5-8.5c14.8-13.2 46.2-13.2 61 0l9.5 8.5c2.5 2.3 7.9 4.8 13.7 1.6zM344 180c-25.7 0-55.9 16.9-59.8 42.1-.8 5 1.7 10 6.1 12.4 4.5 2.4 9.9 1.8 13.7-1.6l9.5-8.5c14.8-13.2 46.2-13.2 61 0l9.5 8.5c2.5 2.2 8 4.7 13.7 1.6 4.4-2.4 6.9-7.4 6.1-12.4-3.9-25.2-34.1-42.1-59.8-42.1zm-96 92c-30.9 0-56 28.7-56 64s25.1 64 56 64 56-28.7 56-64-25.1-64-56-64z"},child:[]}]})(n)}const rp=()=>S.jsxs("div",{className:"flex flex-col items-center",children:[S.jsxs("div",{className:"flex",children:[S.jsx("svg",{height:"0",width:"0",viewBox:"0 0 64 64",className:"absolute",children:S.jsxs("defs",{children:[S.jsxs("linearGradient",{id:"b",x1:"0",y1:"62",x2:"0",y2:"2",gradientUnits:"userSpaceOnUse",children:[S.jsx("stop",{stopColor:"#973BED"}),S.jsx("stop",{offset:"1",stopColor:"#007CFF"})]}),S.jsxs("linearGradient",{id:"c",x1:"0",y1:"64",x2:"0",y2:"0",gradientUnits:"userSpaceOnUse",children:[S.jsx("stop",{stopColor:"#FFC800"}),S.jsx("stop",{offset:"1",stopColor:"#F0F"}),S.jsx("animateTransform",{attributeName:"gradientTransform",type:"rotate",values:"0 32 32;-270 32 32;-270 32 32;-540 32 32;-540 32 32;-810 32 32;-810 32 32;-1080 32 32;-1080 32 32",keyTimes:"0; 0.125; 0.25; 0.375; 0.5; 0.625; 0.75; 0.875; 1",dur:"8s",repeatCount:"indefinite",keySplines:".42,0,.58,1;.42,0,.58,1;.42,0,.58,1;.42,0,.58,1;.42,0,.58,1;.42,0,.58,1;.42,0,.58,1;.42,0,.58,1"})]}),S.jsxs("linearGradient",{id:"d",x1:"0",y1:"62",x2:"0",y2:"2",gradientUnits:"userSpaceOnUse",children:[S.jsx("stop",{stopColor:"#00E0ED"}),S.jsx("stop",{offset:"1",stopColor:"#00DA72"})]})]})}),S.jsx("svg",{fill:"none",viewBox:"0 0 64 64",height:"64",width:"64",className:"inline-block",children:S.jsx("path",{className:"dash",pathLength:"360",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8",stroke:"url(#b)",d:"M 54.722656,3.9726563 A 2.0002,2.0002 0 0 0 54.941406,4 h 5.007813 C 58.955121,17.046124 49.099667,27.677057 36.121094,29.580078 a 2.0002,2.0002 0 0 0 -1.708985,1.978516 V 60 H 29.587891 V 31.558594 A 2.0002,2.0002 0 0 0 27.878906,29.580078 C 14.900333,27.677057 5.0448787,17.046124 4.0507812,4 H 9.28125 c 1.231666,11.63657 10.984383,20.554048 22.6875,20.734375 a 2.0002,2.0002 0 0 0 0.02344,0 c 11.806958,0.04283 21.70649,-9.003371 22.730469,-20.7617187 z"})}),S.jsx("div",{className:"w-2"}),S.jsx("svg",{fill:"none",viewBox:"0 0 64 64",height:"64",width:"64",className:"inline-block",children:S.jsx("path",{className:"dash",pathLength:"360",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8",stroke:"url(#d)",d:"M 4,4 h 4.6230469 v 25.919922 c -0.00276,11.916203 9.8364941,21.550422 21.7500001,21.296875 11.616666,-0.240651 21.014356,-9.63894 21.253906,-21.25586 a 2.0002,2.0002 0 0 0 0,-0.04102 V 4 H 56.25 v 25.919922 c 0,14.33873 -11.581192,25.919922 -25.919922,25.919922 a 2.0002,2.0002 0 0 0 -0.0293,0 C 15.812309,56.052941 3.998433,44.409961 4,29.919922 Z"})})]}),S.jsx("h1",{className:"text-2xl animate-bounce",children:"Loading ..."})]}),SA=()=>{const n=Ru(),e=jh(),[t,r]=z.useState(!1),s=async d=>{try{r(!0);const y=(await T9(Ja,d)).user,v=Vn(Ct,"users",y.uid),E=await Au(v);let A=[];const R=E.exists();R&&(A=E.data()?.friends||[]);const P=Yn(Ct,"friendRequests"),D=hn(P,xn("to","==",y.uid),xn("status","==","pending"),Mp(1)),F=!(await Ro(D)).empty;if(await mv(v,{email:y.email,name:y.displayName,photoURL:y.photoURL,createdAt:Bp(),friends:R?A:[]},{merge:!0}),Ja.currentUser){const B={uid:Ja.currentUser.uid,email:Ja.currentUser.email||"",name:Ja.currentUser.displayName||Ja.currentUser.email?.split("@")[0]||"",photoURL:Ja.currentUser.photoURL||"",login:!0,friends:A};e(NM(B))}Ne.success("Login berhasil! Selamat datang, "+(y.displayName?.split(" ")[0]||"User")),F?n("/friend-requests"):A.length>0?n("/yu-chat/my-list-friends"):n("/find-emails-chat")}catch(p){Ne.error("Gagal login: "+p.message)}finally{r(!1)}},[o,u]=z.useState(!0),h=()=>{u(!o)};return S.jsx(S.Fragment,{children:S.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-[#ebe3f8] p-5 font-sans",children:[S.jsx("div",{className:"absolute -translate-x-1/3 -translate-y-1/4 inset-0 m-auto h-86 w-86   rounded-full bg-gradient-to-br from-[#9c7ad5] to-[#8e4cff]  mix-blend-multiply filter blur-3xl animate-pulse"}),S.jsx("div",{className:"absolute -translate-x-[60%] inset-0 m-auto h-86 w-86 rounded-full bg-gradient-to-b from-[#0178ff] via-[#00ff40a8] to-[#00ff80] mix-blend-multiply filter blur-3xl animate-pulse animate-delay-400"}),S.jsxs("div",{className:"z-10 flex w-full max-w-4xl overflow-hidden rounded-2xl border border-white/20 bg-white/20 shadow-2xl backdrop-blur-lg",children:[S.jsxs("div",{className:"relative hidden w-1/2 flex-col justify-between p-12 lg:flex mb-6",children:[S.jsxs("div",{className:"z-10 mb-8",children:[S.jsx("h1",{className:" text-4xl font-bold tracking-tight text-[#322c86]",children:"Yu Chat"}),S.jsx("p",{className:"text-[#322c86]",children:"Bergabung dan mulai percakapanmu."})]}),S.jsxs("div",{className:"z-10 space-y-8",children:[S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"rounded-lg bg-[#833fce] p-3",children:S.jsx(wU,{className:"h-6 w-6 text-[white]"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-[#322c86]",children:"Pesan Real-Time"}),S.jsx("p",{className:"mt-1 text-sm text-[#322c86]",children:"Terhubung secara instan dengan teman dan keluarga tanpa jeda."})]})]}),S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"rounded-lg bg-[#833fce] p-3",children:S.jsx(SU,{className:"h-6 w-6 text-white"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-[#322c86]",children:"Aman & Pribadi"}),S.jsx("p",{className:"mt-1 text-sm text-[#322c86]",children:"Privasimu adalah prioritas kami. Semua percakapan terenkripsi."})]})]})]}),S.jsxs("p",{className:"z-10 text-xs text-slate-600/70 mt-5",children:["© ",new Date().getFullYear()," Yu Chat. All Rights Reserved."]})]}),o?S.jsxs("div",{className:"w-full bg-white rounded-2xl p-6 lg:w-1/2 m-4 flex items-center justify-center flex-col",children:[t?S.jsx(rp,{}):S.jsxs(S.Fragment,{children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Buat akun baru"}),S.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:["Sudah punya akun?"," ",S.jsx("a",{onClick:h,href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500 underline",children:"Masuk di sini"})]})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 pt-4",children:[S.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-3 rounded-md border border-gray-300/70 bg-white/70 px-4 py-3 text-sm font-medium text-gray-700 shadow-sm hover:bg-black/10 cursor-pointer",onClick:()=>s(new Wr),children:[S.jsx(wA,{className:"h-5 w-5"}),S.jsx("span",{children:"Google"})]}),S.jsxs("button",{type:"button",disabled:!0,className:"flex w-full items-center justify-center gap-3 rounded-md border border-gray-300/70 bg-white/70 px-4 py-3 text-sm font-medium text-gray-700 shadow-sm hover:bg-black/10 cursor-pointer",children:[S.jsx(TA,{className:"h-5 w-5"}),S.jsx("span",{children:"GitHub"})]})]})]}):S.jsxs("div",{className:"w-full bg-white rounded-2xl p-6 lg:w-1/2 m-4 flex items-center justify-center flex-col",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Login Ke Akun Anda"}),S.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:["Belum punya akun?"," ",S.jsx("a",{onClick:h,href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500 underline",children:"Daftar di sini"})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 pt-4",children:[S.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-3 rounded-md border border-gray-300/70 bg-white/70 px-4 py-3 text-sm font-medium text-gray-700 shadow-sm hover:bg-black/10 cursor-pointer",onClick:()=>s(new Wr),children:[S.jsx(wA,{className:"h-5 w-5"}),S.jsx("span",{children:"Google"})]}),S.jsxs("button",{type:"button",disabled:!0,className:"flex w-full items-center justify-center gap-3 rounded-md border border-gray-300/70 bg-white/70 px-4 py-3 text-sm font-medium text-gray-700 shadow-sm hover:bg-black/10 cursor-pointer",children:[S.jsx(TA,{className:"h-5 w-5"}),S.jsx("span",{children:"GitHub"})]})]})]})]})]})})};function xU(){return S.jsx(S.Fragment,{children:S.jsx("main",{className:"grid min-h-full place-items-center bg-white px-6 py-24 sm:py-32 lg:px-8",children:S.jsxs("div",{className:"text-center",children:[S.jsx("p",{className:"text-base font-semibold text-indigo-600",children:"404"}),S.jsx("h1",{className:"mt-4 text-5xl font-semibold tracking-tight text-balance text-gray-900 sm:text-7xl",children:"Page not found"}),S.jsx("p",{className:"mt-6 text-lg font-medium text-pretty text-gray-500 sm:text-xl/8",children:"Sorry, we couldn’t find the page you’re looking for."}),S.jsxs("div",{className:"mt-10 flex items-center justify-center gap-x-6",children:[S.jsx(Fs,{to:"/",className:"rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Go back home"}),S.jsxs("a",{href:"#",className:"text-sm font-semibold text-gray-900",children:["Contact support ",S.jsx("span",{"aria-hidden":"true",children:"→"})]})]})]})})})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),AA=n=>{const e=CU(n);return e.charAt(0).toUpperCase()+e.slice(1)},yC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),NU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:u,...h},d)=>z.createElement("svg",{ref:d,...DU,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:yC("lucide",s),...!o&&!NU(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,y])=>z.createElement(p,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(n,e)=>{const t=z.forwardRef(({className:r,...s},o)=>z.createElement(OU,{ref:o,iconNode:e,className:yC(`lucide-${RU(AA(n))}`,`lucide-${n}`,r),...s}));return t.displayName=AA(n),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kU=ot("arrow-left",PU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],MU=ot("arrow-right",VU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],UU=ot("bell",LU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M10 22V7a1 1 0 0 0-1-1H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a1 1 0 0 0-1-1H2",key:"1ah6g2"}],["rect",{x:"14",y:"2",width:"8",height:"8",rx:"1",key:"88lufb"}]],BU=ot("blocks",jU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qU=ot("calendar",zU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],w_=ot("chevron-down",FU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],GU=ot("ellipsis",HU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],KU=ot("file-text",$U);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],YU=ot("image",QU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],WU=ot("info",XU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ZU=ot("layout-grid",JU);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],t8=ot("list",e8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],r8=ot("log-out",n8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],s8=ot("mail",i8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],o8=ot("map-pin",a8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],u8=ot("maximize-2",l8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7",key:"43lnbm"}]],h8=ot("message-circle-heart",c8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],d8=ot("message-square",f8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],_C=ot("phone",m8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],g8=ot("search-check",p8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vC=ot("search",y8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],v8=ot("smile",_8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],E8=ot("user-minus",b8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bC=ot("user-plus",T8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],S8=ot("users",w8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],I8=ot("video",A8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],R8=ot("x",x8),C8=()=>{const[n,e]=z.useState(""),[t,r]=z.useState([]),[s,o]=z.useState(!1),u=yo(A=>A.user.selectedUser),[h,d]=z.useState(!1),[p,y]=z.useState(!1);z.useEffect(()=>{if(!u?.login)return;const A=Yn(Ct,"friendRequests"),R=hn(A,xn("to","==",u.uid),xn("status","==","pending"),Mp(1)),P=rf(R,D=>{d(!D.empty)});return()=>P()},[u?.uid,u?.login]);const v=async()=>{if(n.trim()){if(!u){Ne.error("Silakan login terlebih dahulu.");return}o(!0);try{const A=Yn(Ct,"users"),R=hn(A,xn("name",">=",n),xn("name","<=",n+"")),D=(await Ro(R)).docs.map(V=>({uid:V.id,...V.data()})).filter(V=>V.uid!==u.uid);r(D)}catch(A){console.error("Search error:",A),Ne.error("Terjadi kesalahan saat mencari.")}}},E=async A=>{if(!u?.login){Ne.error("Silakan login terlebih dahulu.");return}try{const R=Vn(Ct,"users",u.uid);if(((await Au(R)).data()?.friends||[]).includes(A)){Ne.warning("Kalian sudah berteman!");return}const V=Yn(Ct,"friendRequests"),F=hn(V,Z6($S(xn("from","==",u.uid),xn("to","==",A)),$S(xn("from","==",A),xn("to","==",u.uid))));if(!(await Ro(F)).empty){Ne.info("Permintaan pertemanan sudah dikirim atau diterima!");return}await Z0(Yn(Ct,"friendRequests"),{from:u.uid,to:A,status:"pending",createdAt:Bp()}),Ne.success("Permintaan pertemanan berhasil dikirim!"),y(!0)}catch(R){Ne.error("Gagal mengirim permintaan pertemanan."),console.error(R)}};return S.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-[#61acf38c] p-4 font-sans",children:[S.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br to-[#9b51fc] shadow-lg",children:S.jsx(h8,{className:"h-8 w-8 text-white"})}),S.jsx("h1",{className:"mb-6 text-xl font-semibold text-slate-700",children:"Temukan Email Temanmu"}),(h||p)&&S.jsx("div",{className:"mb-6 p-4 bg-indigo-500/20 border border-indigo-500 rounded-lg text-center",children:S.jsx(Fs,{to:"/friend-requests",className:"font-bold text-indigo-300 hover:text-white transition-colors",children:h?"🔔 Anda punya permintaan pertemanan baru! Klik untuk melihat.":"✅ Permintaan terkirim! Klik di sini untuk melihat status permintaanmu."})}),S.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white/70 p-2 shadow-2xl backdrop-blur-md",children:[S.jsxs("div",{className:"relative mt-4",children:[S.jsx("input",{type:"text",value:n,onChange:A=>e(A.target.value),onKeyDown:A=>A.key==="Enter"&&v(),placeholder:"Ketik nama atau departemen...",className:"w-full rounded-xl border border-gray-200 bg-slate-50 py-4 pl-5 pr-16 text-slate-800 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),S.jsx("button",{"aria-label":"Cari",onClick:v,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-[#12e2a4] p-2 text-white transition hover:bg-slate-900",children:S.jsx(MU,{className:"h-5 w-5"})})]}),S.jsxs("ul",{className:"mt-4 space-y-2",children:[s&&t.length===0&&S.jsxs("li",{className:"flex items-center justify-center space-x-2 text-sm text-slate-500",children:[S.jsx(IU,{className:"h-5 w-5"}),S.jsx("p",{children:"Maaf, sepertinya email temanmu belum mendaftar nihh"})]}),t.map(A=>S.jsxs("li",{className:"flex items-center justify-between rounded-lg bg-white p-3 shadow-sm hover:bg-gray-50",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("img",{src:A.photoURL,alt:A.name,className:"h-10 w-10 rounded-full object-cover",referrerPolicy:"no-referrer"}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-slate-800",children:A.name}),S.jsx("p",{className:"text-sm text-slate-500",children:A.email})]})]}),S.jsx("button",{onClick:()=>E(A.uid),className:"rounded-full bg-[#12e2a4] p-2 text-white hover:bg-slate-900",children:S.jsx(bC,{size:18})})]},A.uid))]})]})]})},oi=Object.create(null);oi.open="0";oi.close="1";oi.ping="2";oi.pong="3";oi.message="4";oi.upgrade="5";oi.noop="6";const _m=Object.create(null);Object.keys(oi).forEach(n=>{_m[oi[n]]=n});const xv={type:"error",data:"parser error"},EC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",TC=typeof ArrayBuffer=="function",wC=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,vb=({type:n,data:e},t,r)=>EC&&e instanceof Blob?t?r(e):IA(e,r):TC&&(e instanceof ArrayBuffer||wC(e))?t?r(e):IA(new Blob([e]),r):r(oi[n]+(e||"")),IA=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function xA(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let S_;function N8(n,e){if(EC&&n.data instanceof Blob)return n.data.arrayBuffer().then(xA).then(e);if(TC&&(n.data instanceof ArrayBuffer||wC(n.data)))return e(xA(n.data));vb(n,!1,t=>{S_||(S_=new TextEncoder),e(S_.encode(t))})}const RA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<RA.length;n++)nh[RA.charCodeAt(n)]=n;const D8=n=>{let e=n.length*.75,t=n.length,r,s=0,o,u,h,d;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const p=new ArrayBuffer(e),y=new Uint8Array(p);for(r=0;r<t;r+=4)o=nh[n.charCodeAt(r)],u=nh[n.charCodeAt(r+1)],h=nh[n.charCodeAt(r+2)],d=nh[n.charCodeAt(r+3)],y[s++]=o<<2|u>>4,y[s++]=(u&15)<<4|h>>2,y[s++]=(h&3)<<6|d&63;return p},O8=typeof ArrayBuffer=="function",bb=(n,e)=>{if(typeof n!="string")return{type:"message",data:SC(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:P8(n.substring(1),e)}:_m[t]?n.length>1?{type:_m[t],data:n.substring(1)}:{type:_m[t]}:xv},P8=(n,e)=>{if(O8){const t=D8(n);return SC(t,e)}else return{base64:!0,data:n}},SC=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},AC="",k8=(n,e)=>{const t=n.length,r=new Array(t);let s=0;n.forEach((o,u)=>{vb(o,!1,h=>{r[u]=h,++s===t&&e(r.join(AC))})})},V8=(n,e)=>{const t=n.split(AC),r=[];for(let s=0;s<t.length;s++){const o=bb(t[s],e);if(r.push(o),o.type==="error")break}return r};function M8(){return new TransformStream({transform(n,e){N8(n,t=>{const r=t.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let A_;function Yd(n){return n.reduce((e,t)=>e+t.length,0)}function Xd(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)t[s]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function L8(n,e){A_||(A_=new TextDecoder);const t=[];let r=0,s=-1,o=!1;return new TransformStream({transform(u,h){for(t.push(u);;){if(r===0){if(Yd(t)<1)break;const d=Xd(t,1);o=(d[0]&128)===128,s=d[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Yd(t)<2)break;const d=Xd(t,2);s=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),r=3}else if(r===2){if(Yd(t)<8)break;const d=Xd(t,8),p=new DataView(d.buffer,d.byteOffset,d.length),y=p.getUint32(0);if(y>Math.pow(2,21)-1){h.enqueue(xv);break}s=y*Math.pow(2,32)+p.getUint32(4),r=3}else{if(Yd(t)<s)break;const d=Xd(t,s);h.enqueue(bb(o?d:A_.decode(d),e)),r=0}if(s===0||s>n){h.enqueue(xv);break}}}})}const IC=4;function Bt(n){if(n)return U8(n)}function U8(n){for(var e in Bt.prototype)n[e]=Bt.prototype[e];return n}Bt.prototype.on=Bt.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Bt.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Bt.prototype.off=Bt.prototype.removeListener=Bt.prototype.removeAllListeners=Bt.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,s=0;s<t.length;s++)if(r=t[s],r===e||r.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Bt.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,s=t.length;r<s;++r)t[r].apply(this,e)}return this};Bt.prototype.emitReserved=Bt.prototype.emit;Bt.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Bt.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Kp=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),dr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),j8="arraybuffer";function xC(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const B8=dr.setTimeout,z8=dr.clearTimeout;function Qp(n,e){e.useNativeTimers?(n.setTimeoutFn=B8.bind(dr),n.clearTimeoutFn=z8.bind(dr)):(n.setTimeoutFn=dr.setTimeout.bind(dr),n.clearTimeoutFn=dr.clearTimeout.bind(dr))}const q8=1.33;function F8(n){return typeof n=="string"?H8(n):Math.ceil((n.byteLength||n.size)*q8)}function H8(n){let e=0,t=0;for(let r=0,s=n.length;r<s;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function RC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function G8(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function $8(n){let e={},t=n.split("&");for(let r=0,s=t.length;r<s;r++){let o=t[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class K8 extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Eb extends Bt{constructor(e){super(),this.writable=!1,Qp(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new K8(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=bb(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=G8(e);return t.length?"?"+t:""}}class Q8 extends Eb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};V8(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,k8(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=RC()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let CC=!1;try{CC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Y8=CC;function X8(){}class W8 extends Q8{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}let Hl=class vm extends Bt{constructor(e,t,r){super(),this.createRequest=e,Qp(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=xC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=vm.requestsCount++,vm.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=X8,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete vm.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Hl.requestsCount=0;Hl.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",CA);else if(typeof addEventListener=="function"){const n="onpagehide"in dr?"pagehide":"unload";addEventListener(n,CA,!1)}}function CA(){for(let n in Hl.requests)Hl.requests.hasOwnProperty(n)&&Hl.requests[n].abort()}const J8=function(){const n=NC({xdomain:!1});return n&&n.responseType!==null}();class Z8 extends W8{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=J8&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Hl(NC,this.uri(),e)}}function NC(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Y8))return new XMLHttpRequest}catch{}if(!e)try{return new dr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const DC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ej extends Eb{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=DC?{}:xC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;vb(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&Kp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=RC()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const I_=dr.WebSocket||dr.MozWebSocket;class tj extends ej{createSocket(e,t,r){return DC?new I_(e,t,r):t?new I_(e,t):new I_(e)}doWrite(e,t){this.ws.send(t)}}class nj extends Eb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=L8(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),s=M8();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:h,value:d})=>{h||(this.onPacket(d),o())}).catch(h=>{})};o();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&Kp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const rj={websocket:tj,webtransport:nj,polling:Z8},ij=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,sj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rv(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let s=ij.exec(n||""),o={},u=14;for(;u--;)o[sj[u]]=s[u]||"";return t!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=aj(o,o.path),o.queryKey=oj(o,o.query),o}function aj(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function oj(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(t[s]=o)}),t}const Cv=typeof addEventListener=="function"&&typeof removeEventListener=="function",bm=[];Cv&&addEventListener("offline",()=>{bm.forEach(n=>n())},!1);class Qs extends Bt{constructor(e,t){if(super(),this.binaryType=j8,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=Rv(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=Rv(t.host).host);Qp(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=$8(this.opts.query)),Cv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},bm.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=IC,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Qs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Qs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(t+=F8(s)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Kp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if(typeof t=="function"&&(s=t,t=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:t,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Qs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Cv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=bm.indexOf(this._offlineEventListener);r!==-1&&bm.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Qs.protocol=IC;class lj extends Qs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;Qs.priorWebsocketSuccess=!1;const s=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",v=>{if(!r)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Qs.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(y(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const E=new Error("probe error");E.transport=t.name,this.emitReserved("upgradeError",E)}}))};function o(){r||(r=!0,y(),t.close(),t=null)}const u=v=>{const E=new Error("probe error: "+v);E.transport=t.name,o(),this.emitReserved("upgradeError",E)};function h(){u("transport closed")}function d(){u("socket closed")}function p(v){t&&v.name!==t.name&&o()}const y=()=>{t.removeListener("open",s),t.removeListener("error",u),t.removeListener("close",h),this.off("close",d),this.off("upgrading",p)};t.once("open",s),t.once("error",u),t.once("close",h),this.once("close",d),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let uj=class extends lj{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>rj[s]).filter(s=>!!s)),super(e,r)}};function cj(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=Rv(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}const hj=typeof ArrayBuffer=="function",fj=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,OC=Object.prototype.toString,dj=typeof Blob=="function"||typeof Blob<"u"&&OC.call(Blob)==="[object BlobConstructor]",mj=typeof File=="function"||typeof File<"u"&&OC.call(File)==="[object FileConstructor]";function Tb(n){return hj&&(n instanceof ArrayBuffer||fj(n))||dj&&n instanceof Blob||mj&&n instanceof File}function Em(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(Em(n[t]))return!0;return!1}if(Tb(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Em(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Em(n[t]))return!0;return!1}function pj(n){const e=[],t=n.data,r=n;return r.data=Nv(t,e),r.attachments=e.length,{packet:r,buffers:e}}function Nv(n,e){if(!n)return n;if(Tb(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=Nv(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=Nv(n[r],e));return t}return n}function gj(n,e){return n.data=Dv(n.data,e),delete n.attachments,n}function Dv(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Dv(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Dv(n[t],e));return n}const yj=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_j=5;var je;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(je||(je={}));class vj{constructor(e){this.replacer=e}encode(e){return(e.type===je.EVENT||e.type===je.ACK)&&Em(e)?this.encodeAsBinary({type:e.type===je.EVENT?je.BINARY_EVENT:je.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===je.BINARY_EVENT||e.type===je.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=pj(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}}function NA(n){return Object.prototype.toString.call(n)==="[object Object]"}class wb extends Bt{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===je.BINARY_EVENT;r||t.type===je.BINARY_ACK?(t.type=r?je.EVENT:je.ACK,this.reconstructor=new bj(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Tb(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(je[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===je.BINARY_EVENT||r.type===je.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const u=e.substring(o,t);if(u!=Number(u)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(u)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(o,t)}else r.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const o=t+1;for(;++t;){const u=e.charAt(t);if(u==null||Number(u)!=u){--t;break}if(t===e.length)break}r.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(wb.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case je.CONNECT:return NA(t);case je.DISCONNECT:return t===void 0;case je.CONNECT_ERROR:return typeof t=="string"||NA(t);case je.EVENT:case je.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&yj.indexOf(t[0])===-1);case je.ACK:case je.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bj{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=gj(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ej=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wb,Encoder:vj,get PacketType(){return je},protocol:_j},Symbol.toStringTag,{value:"Module"}));function Ir(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const Tj=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class PC extends Bt{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ir(e,"open",this.onopen.bind(this)),Ir(e,"packet",this.onpacket.bind(this)),Ir(e,"error",this.onerror.bind(this)),Ir(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,o;if(Tj.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const u={type:je.EVENT,data:t};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const y=this.ids++,v=t.pop();this._registerAckCallback(y,v),u.id=y}const h=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!h||(d?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(e,t){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===e&&this.sendBuffer.splice(h,1);t.call(this,new Error("operation has timed out"))},s),u=(...h)=>{this.io.clearTimeoutFn(o),t.apply(this,h)};u.withError=!0,this.acks[e]=u}emitWithAck(e,...t){return new Promise((r,s)=>{const o=(u,h)=>u?s(u):r(h);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:je.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case je.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case je.EVENT:case je.BINARY_EVENT:this.onevent(e);break;case je.ACK:case je.BINARY_ACK:this.onack(e);break;case je.DISCONNECT:this.ondisconnect();break;case je.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...s){r||(r=!0,t.packet({type:je.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:je.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Nu(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Nu.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Nu.prototype.reset=function(){this.attempts=0};Nu.prototype.setMin=function(n){this.ms=n};Nu.prototype.setMax=function(n){this.max=n};Nu.prototype.setJitter=function(n){this.jitter=n};class Ov extends Bt{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Qp(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Nu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||Ej;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new uj(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Ir(t,"open",function(){r.onopen(),e&&e()}),o=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),e?e(h):this.maybeReconnectOnOpen()},u=Ir(t,"error",o);if(this._timeout!==!1){const h=this._timeout,d=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),t.close()},h);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(s),this.subs.push(u),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ir(e,"ping",this.onping.bind(this)),Ir(e,"data",this.ondata.bind(this)),Ir(e,"error",this.onerror.bind(this)),Ir(e,"close",this.onclose.bind(this)),Ir(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Kp(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new PC(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Yc={};function Tm(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=cj(n,e.path||"/socket.io"),r=t.source,s=t.id,o=t.path,u=Yc[s]&&o in Yc[s].nsps,h=e.forceNew||e["force new connection"]||e.multiplex===!1||u;let d;return h?d=new Ov(r,e):(Yc[s]||(Yc[s]=new Ov(r,e)),d=Yc[s]),t.query&&!e.query&&(e.query=t.queryKey),d.socket(t.path,e)}Object.assign(Tm,{Manager:Ov,Socket:PC,io:Tm,connect:Tm});const wj="https://server-yu-chat-production.up.railway.app/",Ut=Tm(wj,{autoConnect:!1}),Sj=({status:n,isCurrentUser:e})=>{if(!e)return null;switch(n){case"sending":return null;case"sent":return S.jsx("span",{title:"Terkirim",children:"✓"});case"read":return S.jsx("span",{title:"Dibaca",style:{color:"#53bdeb"},children:"✓✓"});case"failed":return S.jsx("span",{title:"Gagal terkirim",children:"❗"});default:return null}},Aj=({friend:n,currentUser:e,onSelect:t,isOnline:r})=>{const[s,o]=z.useState(null);return z.useEffect(()=>{if(!e)return;const u=[e.uid,n.uid].sort().join("-"),h=Yn(Ct,"chats",u,"messages"),d=hn(h,W0("timestamp","desc"),Mp(1)),p=rf(d,y=>{if(y.empty)o(null);else{const v=y.docs[0];o({...v.data(),id:v.id})}});return()=>p()},[e,n.uid]),S.jsxs("div",{onClick:()=>t(n),className:"flex items-center p-3 hover:bg-gray-100 dark:hover:bg-[#0000001e] cursor-pointer  border-b-[#0000002d] border-b",children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:n.photoURL||`https-ui-avatars.com/api/?name=${n.name}`,alt:n.name,className:"w-12 h-12 rounded-full mr-4",referrerPolicy:"no-referrer"}),r&&S.jsx("span",{className:"absolute bottom-0 right-4 block h-3 w-3 rounded-full bg-green-500 border-2 border-white"})]}),S.jsxs("div",{className:"flex-grow overflow-hidden",children:[S.jsx("h3",{className:"font-semibold text-black e truncate",children:n.name}),S.jsx("div",{className:"flex items-center text-sm text-gray-500",children:s?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mr-1",children:S.jsx(Sj,{status:s.status,isCurrentUser:s.senderId===e.uid})}),S.jsxs("p",{className:"truncate",children:[s.senderId===e.uid&&"You: ",s.message]})]}):S.jsx("p",{className:"truncate italic",children:"No messages yet."})})]})]})},Ij=()=>{const n=yo(p=>p.user.selectedUser),[e,t]=z.useState([]),[r,s]=z.useState(!1),o=jh(),[u,h]=z.useState([]);z.useEffect(()=>{const p=y=>{h(y)};return Ut.on("update_online_users",p),()=>{Ut.off("update_online_users",p)}},[]),z.useEffect(()=>{(async()=>{if(n?.uid){s(!0);try{const y=Vn(Ct,"users",n.uid),v=await Au(y);if(v.exists()){const A=v.data().friends;if(A&&A.length>0){const R=hn(Yn(Ct,"users"),xn("__name__","in",A)),D=(await Ro(R)).docs.map(V=>{const F=V.data(),B=F.createdAt?F.createdAt.toDate().toISOString():null;return{...F,uid:V.id,createdAt:B}});t(D)}}}catch(y){console.error("Failed to fetch friends:",y)}finally{s(!1)}}})()},[n]);const d=p=>{o(_R(p))};return n?S.jsxs("div",{className:"flex w-full h-full flex-col  bg-white",children:[S.jsx("div",{className:"flex items-center justify-between p-4",children:S.jsx("h2",{className:"text-2xl font-bold",children:"Chats"})}),S.jsx("div",{className:"p-4",children:S.jsxs("div",{className:"relative",children:[S.jsx(vC,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),S.jsx("input",{type:"text",placeholder:"Search messages",className:"w-full rounded-lg bg-gray-100 py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),S.jsx("div",{className:"flex-1 overflow-y-auto",children:r?S.jsx(rp,{}):e.length>0?S.jsx("div",{className:"p-2 space-y-1",children:e.map(p=>S.jsx(Aj,{friend:p,currentUser:n,onSelect:d,isOnline:u.includes(p.uid)},p.uid))}):S.jsx("div",{className:"flex items-center justify-center p-4",children:S.jsx(Fs,{to:"/find-emails-chat",className:"group group-hover:before:duration-500 group-hover:after:duration-500 after:duration-500 hover:ose-300 hover:before:[box-shadow:_20px_20px_20px_30px_#a21caf] duration-500 before:duration-500 hover:duration-500 underline underline-offset-2 hover:after:-right-8 hover:before:right-12 hover:before:-bottom-8 hover:before:blur hover:underline hover:underline-offset-4 origin-left hover:decoration-2 hover:text-rose-300 relative bg-neutral-800 h-16 w-64 border text-left p-3 text-gray-50 text-base font-bold rounded-lg overflow-hidden before:absolute before:w-12 before:h-12 before:content[''] before:right-1 before:top-1 before:z-10 before:bg-violet-500 before:rounded-full before:blur-lg after:absolute after:z-10 after:w-20 after:h-20 after:content[''] after:bg-rose-300 after:right-8 after:top-3 after:rounded-full after:blur-lg",children:"Find Friends .."})})})]}):S.jsx(S.Fragment,{children:S.jsx(rp,{})})},xj=()=>S.jsxs("button",{className:"flex items-center bg-[#0000001a] text-gray-600 text-lg px-5 py-1  rounded-2xl overflow-hidden cursor-pointer transition-transform duration-200 active:scale-95 group",children:[S.jsx("div",{className:"relative w-6 h-6 mr-2",children:S.jsx("div",{className:"absolute inset-0 fly-wrapper",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",className:"transform transition-transform duration-300 group-hover:translate-x-5 group-hover:rotate-45 group-hover:scale-110",children:[S.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),S.jsx("path",{fill:"currentColor",d:"M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"})]})})}),S.jsx("span",{className:"transition-transform duration-300 group-hover:translate-x-20",children:"Send"})]});function Rj(n){return rs({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M156,128a28,28,0,1,1-28-28A28,28,0,0,1,156,128ZM128,76a28,28,0,1,0-28-28A28,28,0,0,0,128,76Zm0,104a28,28,0,1,0,28,28A28,28,0,0,0,128,180Z"},child:[]}]})(n)}const Cj=({status:n,isCurrentUser:e})=>{if(!e)return null;switch(n){case"sending":return S.jsx("span",{title:"Mengirim...",children:"🕒"});case"sent":return S.jsx("span",{title:"Terkirim",children:"✓"});case"read":return S.jsx("span",{title:"Dibaca",style:{color:"#53bdeb"},children:"✓✓"});case"failed":return S.jsx("span",{title:"Gagal terkirim",children:"❗"});default:return null}},Nj=({friend:n,onToggleProfile:e})=>{const[t,r]=z.useState(""),[s,o]=z.useState([]),u=yo(te=>te.user.selectedUser),h=z.useRef(null),d=jh(),p=Ru(),[y,v]=z.useState(!1),E=[u?.uid,n.uid].sort().join("-"),[A,R]=z.useState(!1),P=z.useRef(null),[D,V]=z.useState(!1),F=()=>{V(!D)};z.useEffect(()=>{const te=()=>R(!0),C=()=>R(!1);return Ut.on("friend_is_typing",te),Ut.on("friend_stopped_typing",C),()=>{Ut.off("friend_is_typing",te),Ut.off("friend_stopped_typing",C)}},[]);const B=te=>{r(te.target.value),Ut.emit("typing_start",{room:E}),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{Ut.emit("typing_stop",{room:E})},1500)};z.useEffect(()=>{const te=C=>{v(C.includes(n.uid))};return Ut.on("update_online_users",te),Ut.emit("request_initial_status"),()=>{Ut.off("update_online_users",te)}},[n.uid]),z.useEffect(()=>{Ut.connected||Ut.connect(),Ut.emit("join_room",E);const te=Yn(Ct,"chats",E,"messages"),C=hn(te,W0("timestamp","asc")),x=rf(C,N=>{N.docChanges().forEach(()=>{});const M=N.docs.map(U=>{const q=U.data();return{...q,id:U.id,timestamp:q.timestamp?.toDate().getTime()||Date.now()}});o(M),N.docs.forEach(U=>{const q=U.data();if(q.receiverId===u?.uid&&q.status==="sent"){const k=Vn(Ct,"chats",E,"messages",U.id);fu(k,{status:"read"})}})});return()=>{x(),Ut.emit("leave_room",E)}},[E,u?.uid,n.uid]),z.useEffect(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[s]);const X=async()=>{if(!t.trim()||!u)return;const te=`temp_${Date.now()}`,C={id:te,senderId:u.uid,receiverId:n.uid,message:t,timestamp:Date.now(),status:"sending"};o(x=>[...x,C]),P.current&&clearTimeout(P.current),Ut.emit("typing_stop",{room:E}),r("");try{const x=Yn(Ct,"chats",E,"messages"),N=await Z0(x,{senderId:C.senderId,receiverId:C.receiverId,message:C.message,timestamp:Bp(),status:"sent"});await fu(N,{id:N.id})}catch(x){console.error("Gagal mengirim pesan:",x),o(N=>N.map(M=>M.id===te?{...M,status:"failed"}:M))}},ee=()=>{d(OM()),p("/yu-chat")};return S.jsxs("div",{className:"flex w-full h-full flex-col -100 shadow-lg rounded-2xl",children:[S.jsxs("div",{className:"flex items-center justify-between border-b border-b-[#00000042] w-full p-4 lg:relative fixed bg-[#6583f3] z-[99] pb-[40px] lg:rounded-tr-2xl",children:[S.jsxs("div",{onClick:e,className:"flex items-center cursor-pointer",children:[S.jsx("button",{onClick:te=>{te.stopPropagation(),ee()},className:"mr-4 lg:hidden",children:S.jsx(kU,{className:"h-6 w-6 text-white cursor-pointer"})}),n.photoURL?S.jsx("img",{src:n.photoURL,alt:n.name,className:"h-10 w-10 rounded-full object-cover",referrerPolicy:"no-referrer"}):S.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 text-white",children:n.name.charAt(0)}),S.jsxs("div",{className:"ml-4",children:[S.jsx("h2",{className:"text-lg text-white font-semibold",children:n.name}),A?S.jsx("p",{className:"text-sm text-green-500 bg-gray-100 rounded w-fit p-1 animate-pulse",children:"typing..."}):S.jsx("p",{className:`text-sm font-bold ${y?"text-white bg-green-700 rounded w-fit p-1":"text-white bg-gray-500 700 rounded w-fit p-1"}`,children:y?"Online •":"Offline •"})]})]}),S.jsx(Rj,{size:20,onClick:F,className:"cursor-pointer text-white"}),D&&S.jsxs("div",{className:"flex absolute bg-white -bottom-13 rounded p-4 right-0 items-center space-x-4",children:[S.jsx("button",{className:"text-gray-600 hover:text-blue-500",children:S.jsx(u8,{className:"h-5 w-5"})}),S.jsx("button",{className:"text-gray-600 hover:text-blue-500",children:S.jsx(_C,{className:"h-5 w-5"})}),S.jsx("button",{className:"text-gray-600 hover:text-blue-500",children:S.jsx(I8,{className:"h-5 w-5"})}),S.jsx("button",{onClick:e,className:"text-gray-600 hover:text-blue-500",children:S.jsx(WU,{className:"h-5 w-5"})})]})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-white mt-[80px] ",children:[s.length===0?S.jsx("div",{className:"flex justify-center items-center h-full",children:S.jsx("p",{className:"text-center text-gray-500",children:"Belum ada chat apapun"})}):s.map((te,C)=>S.jsx("div",{className:`flex ${te.senderId===u?.uid?"justify-end":"justify-start"}`,children:S.jsxs("div",{className:`max-w-xs md:max-w-md lg:max-w-lg rounded-full px-7 py-1 ${te.senderId===u?.uid?"bg-[#c6e8f7] text-slate-800 rounded-br-2xl ":"bg-[#0000001c] text-gray-800 rounded-bl-2xl "}`,children:[S.jsx("p",{children:te.message}),S.jsx("span",{className:"text-xs opacity-75",children:new Date(te.timestamp).toLocaleTimeString()}),S.jsx(Cj,{status:te.status,isCurrentUser:te.senderId===u?.uid})]})},C)),S.jsx("div",{ref:h})]}),S.jsx("div",{className:"w-full",children:S.jsx("div",{className:"border-t border-t-[#0000002f] p-4",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("button",{className:"text-gray-500 hover:text-blue-500 mr-3",children:S.jsx(YU,{className:"lg:h-6 lg:w-6 h-5 w-5"})}),S.jsx("button",{className:"text-gray-500 hover:text-blue-500 mr-3",children:S.jsx(v8,{className:"lg:h-6 lg:w-6 h-5 w-5"})}),S.jsx("input",{type:"text",value:t,onChange:B,onKeyPress:te=>te.key==="Enter"&&X(),placeholder:"Ketik pesan...",className:"flex-1 rounded-full bg-gray-100  w-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),S.jsx("div",{onClick:X,children:S.jsx(xj,{})})]})})})]})},Dj=({profile:n,onClose:e})=>{const t=r=>r?new Date(r).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"Info tidak tersedia";return S.jsxs("div",{className:"flex  my-6 flex-col bg-white shadow-lg",children:[S.jsxs("div",{className:"flex items-center justify-between p-4",children:[S.jsx("h2",{className:"text-xl font-bold",children:"Detail Kontak"}),S.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:S.jsx(R8,{className:"h-6 w-6"})})]}),S.jsxs("div",{className:"flex flex-col items-center  p-6",children:[n.photoURL?S.jsx("img",{src:n.photoURL,alt:n.name,className:"h-24 w-24 rounded-full object-cover",referrerPolicy:"no-referrer"}):S.jsx("div",{className:"flex h-24 w-24 items-center justify-center rounded-full bg-gray-200 text-3xl font-bold text-gray-500",children:n.name.charAt(0).toUpperCase()}),S.jsx("h3",{className:"mt-4 text-2xl font-semibold",children:n.name}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Status: Online"})]}),S.jsxs("div",{className:"flex-1 space-y-6 p-6 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-start",children:[S.jsx(s8,{className:"h-5 w-5 text-gray-400 mt-1"}),S.jsxs("div",{className:"ml-4",children:[S.jsx("p",{className:"font-semibold text-gray-800",children:"Email"}),S.jsx("p",{className:"text-gray-600",children:n.email})]})]}),S.jsxs("div",{className:"flex items-start",children:[S.jsx(_C,{className:"h-5 w-5 text-gray-400 mt-1"}),S.jsxs("div",{className:"ml-4",children:[S.jsx("p",{className:"font-semibold text-gray-800",children:"Telepon"}),S.jsx("p",{className:"text-gray-600",children:"Info tidak tersedia"})]})]}),S.jsxs("div",{className:"flex items-start",children:[S.jsx(o8,{className:"h-5 w-5 text-gray-400 mt-1"}),S.jsxs("div",{className:"ml-4",children:[S.jsx("p",{className:"font-semibold text-gray-800",children:"Lokasi"}),S.jsx("p",{className:"text-gray-600",children:"Info tidak tersedia"})]})]}),S.jsxs("div",{className:"flex items-start",children:[S.jsx(qU,{className:"h-5 w-5 text-gray-400 mt-1"}),S.jsxs("div",{className:"ml-4",children:[S.jsx("p",{className:"font-semibold text-gray-800",children:"Bergabung pada"}),S.jsx("p",{className:"text-gray-600",children:t(n.createdAt)})]})]})]}),S.jsx("div",{className:"p-4 ",children:S.jsx("button",{className:"w-full rounded-lg bg-red-500 px-4 py-2 font-semibold text-white hover:bg-red-600",children:"Hapus Teman"})})]})};function Oj(){const[n,e]=z.useState(!1),t=Ru(),r=yo(u=>u.user.selectedUser),s=yo(u=>u.user.selectedFriend),o=()=>{e(!n)};return z.useEffect(()=>{if(r?.login?(Ut.connected||Ut.connect(),Ut.emit("user_online",r.uid)):t("/"),r&&s){const u=[r.uid,s.uid].sort().join("-");Ut.emit("join_room",u)}},[r,s,t]),S.jsxs("div",{className:"flex w-full relative lg:static h-full overflow-hidden  rounded-2xl",children:[" ",S.jsx("div",{className:`w-full transition-transform duration-300 ease-in-out lg:w-96 ${s&&"hidden lg:flex"}`,children:S.jsx(Ij,{})}),S.jsx("div",{className:`w-full flex-1 transition-transform duration-300 ease-in-out ${!s&&"hidden lg:flex"}`,children:s?S.jsx(Nj,{friend:s,onToggleProfile:o}):S.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 bg-white rounded-lg",children:"Pilih teman untuk memulai percakapan"})}),s&&S.jsx("div",{className:`
           absolute w-full transform transition-transform duration-300 right-0 rounded-l-2xl h-full top-0 ease-in-out md:w-96  z-[999999999]
            ${n?"translate-x-0":"translate-x-full"}
          `,children:S.jsx(Dj,{profile:s,onClose:()=>e(!1)})})]})}const Pj=({person:n,onClick:e})=>S.jsxs("div",{onClick:e,className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition-shadow hover:shadow-lg",children:[S.jsxs("div",{className:"flex items-start justify-between",children:[n.photoURL?S.jsx("img",{src:n.photoURL,alt:n.name,className:"h-16 w-16 rounded-full object-cover",referrerPolicy:"no-referrer"}):S.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-200 text-gray-400",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 24 24",fill:"currentColor",children:S.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),S.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:S.jsx(GU,{className:"h-5 w-5"})})]}),S.jsxs("div",{className:"mt-4",children:[S.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n.name}),S.jsx("p",{className:"text-sm text-gray-500",children:n.email})]}),S.jsx("div",{className:"mt-4 border-t pt-4"})]}),kj=()=>{const e=yo(p=>p.user.selectedUser)?.uid,[t,r]=z.useState([]),[s,o]=z.useState(!1),u=jh(),h=Ru(),d=p=>{const y=t.find(v=>v.uid===p);try{y&&(u(_R(y)),h("/yu-chat")),console.log(y)}catch(v){console.error(v)}};return z.useEffect(()=>{(async()=>{if(e){o(!0);try{const y=Vn(Ct,"users",e),v=await Au(y);if(v.exists()){const A=v.data().friends;if(A&&A.length>0){const R=hn(Yn(Ct,"users"),xn("__name__","in",A)),D=(await Ro(R)).docs.map(V=>{const F=V.data(),B=F.createdAt?F.createdAt.toDate().toISOString():null;return{...F,uid:V.id,createdAt:B}});r(D)}else r([])}}catch(y){console.error("Failed to fetch friends:",y)}finally{setTimeout(()=>o(!1),1e3)}}})()},[e]),S.jsxs("div",{className:"mx-auto lg:static w-full p-4",children:[S.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Daftar Teman"}),S.jsxs("div",{className:"mt-6 flex flex-col items-baseline justify-between md:flex-row",children:[S.jsxs("div",{className:"flex border-b",children:[S.jsx("button",{className:"border-b-2 border-blue-600 px-4 py-2 text-sm font-semibold text-blue-600",children:"All"}),S.jsx("button",{className:"px-4 py-2 text-sm font-semibold text-gray-500 hover:text-gray-800",children:"Organization"})]}),S.jsxs("div",{className:"relative mt-4 w-full md:mt-0 md:w-64",children:[S.jsx(vC,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),S.jsx("input",{type:"text",placeholder:"Search by name",className:"w-full rounded-lg border bg-white py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),S.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-4",children:[S.jsxs("button",{className:"flex items-center gap-2 rounded-lg border bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50",children:["Design Team ",S.jsx(w_,{className:"h-4 w-4"})]}),S.jsxs("button",{className:"flex items-center gap-2 rounded-lg border bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50",children:["Position ",S.jsx(w_,{className:"h-4 w-4"})]}),S.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[S.jsx("span",{className:"text-sm text-gray-500",children:"Sort by:"}),S.jsxs("button",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:["All ",S.jsx(w_,{className:"h-4 w-4"})]}),S.jsxs("div",{className:"flex items-center rounded-lg border bg-white p-1 shadow-sm",children:[S.jsx("button",{className:"rounded-md bg-gray-100 p-1 text-gray-700",children:S.jsx(ZU,{className:"h-5 w-5"})}),S.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-700",children:S.jsx(t8,{className:"h-5 w-5"})})]})]})]}),S.jsx("div",{className:"mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 cursor-pointer",children:s?S.jsx(rp,{}):t.map(p=>S.jsx(Pj,{person:p,onClick:()=>d(p.uid)},p.uid))})]})},Vj=()=>{const n=yo(h=>h.user.selectedUser),[e,t]=z.useState([]),[r,s]=z.useState(!0);z.useEffect(()=>{(async()=>{if(n?.login){s(!0);try{const d=Yn(Ct,"friendRequests"),p=hn(d,xn("to","==",n?.uid),xn("status","==","pending")),y=await Ro(p);if(y.empty){t([]),s(!1);return}const E=(await Promise.all(y.docs.map(async A=>{const R=A.data(),P=Vn(Ct,"users",R.from),D=await Au(P);return{requestId:A.id,sender:D.data()||null,...R}}))).filter(A=>!!A.sender);t(E)}catch(d){console.error("Error fetching friend requests:",d),Ne.error("Gagal memuat permintaan pertemanan.")}finally{s(!1)}}})()},[n?.uid,n?.login]);const o=async(h,d)=>{if(n?.login)try{const p=Vn(Ct,"users",n.uid);await fu(p,{friends:gv(d)});const y=Vn(Ct,"users",d);await fu(y,{friends:gv(n.uid)}),await pv(Vn(Ct,"friendRequests",h)),Ne.success("Permintaan pertemanan diterima!"),t(v=>v.filter(E=>E.requestId!==h))}catch(p){console.error("Error accepting request:",p),Ne.error("Gagal menerima permintaan.")}},u=async h=>{try{await pv(Vn(Ct,"friendRequests",h)),Ne.info("Permintaan pertemanan ditolak."),t(d=>d.filter(p=>p.requestId!==h))}catch(d){console.error("Error declining request:",d),Ne.error("Gagal menolak permintaan.")}};return S.jsx("div",{className:"flex flex-col flex-grow",children:S.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto",children:[S.jsx("h1",{className:"text-2xl font-bold mb-6 text-slate-800",children:"Permintaan Pertemanan"}),r?S.jsx("p",{className:"text-center p-10 text-slate-400",children:"Memuat..."}):e.length>0?S.jsx("ul",{className:"space-y-3",children:e.map(h=>S.jsxs("li",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg shadow-md",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("img",{src:h.sender.photoURL,alt:h.sender.displayName,className:"w-12 h-12 rounded-full object-cover"}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-slate-100",children:h.sender.displayName}),S.jsx("p",{className:"text-sm text-slate-400",children:h.sender.email})]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:()=>o(h.requestId,h.from),className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors",title:"Terima",children:S.jsx(bC,{size:18})}),S.jsx("button",{onClick:()=>u(h.requestId),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Tolak",children:S.jsx(E8,{size:18})})]})]},h.requestId))}):S.jsx("p",{className:"text-center p-10 text-slate-800",children:"Tidak ada permintaan pertemanan saat ini."})]})})};function Mj(n){return rs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(n)}function Lj(n){return rs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const Uj=()=>{const n=jh(),e=Ru(),[t,r]=z.useState(!1),s=da();z.useEffect(()=>{r(!1)},[s.pathname]);const o=()=>{n(DM()),e("/register")};return S.jsxs(S.Fragment,{children:[S.jsx("button",{className:"lg:hidden fixed top-4 right-4 z-40 p-2 bg-brand-primary rounded-md text-black",onClick:()=>r(!t),"aria-label":"Toggle Menu",children:t?S.jsx(Lj,{size:24}):S.jsx(Mj,{size:24})}),t&&S.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-10",onClick:()=>r(!1)}),S.jsxs("aside",{className:`
          bg-white w-64 flex flex-col 
          fixed top-0 left-0 z-20 lg:relative
          transition-transform duration-300 ease-in-out
          ${t?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
          h-screen lg:h-full overflow-y-auto rounded-l-2xl pt-[25px]
        `,children:[S.jsx("div",{className:"flex h-16 items-center -b px-6",children:S.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Yu Chat 😽"})}),S.jsxs("nav",{className:"flex-1 space-y-1 p-4",children:[S.jsx("p",{className:"px-4 text-xs font-semibold uppercase text-gray-400",children:"Main Menu"}),S.jsxs(Fs,{to:"/yu-chat",end:!0,className:({isActive:u})=>`flex items-center rounded-lg px-4 py-2 font-semibold ${u?"text-blue-600 -l-4 -blue-600 bg-blue-100":"text-black bg-blue-50"}`,children:[S.jsx(d8,{className:"mr-3 h-5 w-5"}),"Messages"]}),S.jsxs(Fs,{to:"/yu-chat/my-list-friends",className:({isActive:u})=>`flex items-center rounded-lg px-4 py-2 font-semibold ${u?"text-blue-600 -l-4 -blue-600 bg-blue-100":"text-black bg-blue-50"}`,children:[S.jsx(AU,{className:"mr-3 h-5 w-5"}),"Friend Lists"]}),S.jsxs(Fs,{to:"/friend-requests",className:({isActive:u})=>`flex items-center rounded-lg px-4 py-2 font-semibold ${u?"text-blue-600 -l-4 -blue-600 bg-blue-100":"text-black bg-blue-50"}`,children:[S.jsx(UU,{className:"mr-3 h-5 w-5"}),"Requests"]}),S.jsxs(Fs,{to:"/find-emails-chat",className:({isActive:u})=>`flex items-center rounded-lg px-4 py-2 font-semibold ${u?"text-blue-600 -l-4 -blue-600 bg-blue-100":"text-black bg-blue-50"}`,children:[S.jsx(g8,{className:"mr-3 h-5 w-5"}),"Find Emails"]}),S.jsx("p",{className:"px-4 pt-4 text-xs font-semibold uppercase text-gray-400",children:"Applicants"}),S.jsxs("a",{href:"#",className:"flex items-center rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-100",children:[S.jsx(S8,{className:"mr-3 h-5 w-5"})," Applicants"]}),S.jsxs("a",{href:"#",className:"flex items-center rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-100",children:[S.jsx(KU,{className:"mr-3 h-5 w-5"})," Resumes"]}),S.jsxs("div",{className:"p-4",children:[S.jsxs("div",{className:"rounded-lg bg-blue-50 p-4 text-center",children:[S.jsx(BU,{className:"mx-auto h-8 w-8 text-blue-500"}),S.jsx("h3",{className:"font-semibold text-gray-800 mt-2",children:"Integration Apps"}),S.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"You can integrate several apps to automate productivity."}),S.jsx("button",{className:"mt-4 w-full rounded-lg bg-blue-600 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Try Integration"})]}),S.jsx("div",{className:"mt-auto",children:S.jsxs("button",{onClick:o,className:"flex w-full items-center justify-center space-x-2 rounded-lg p-2 text-sm font-medium text-red-500 transition-colors duration-200 hover:bg-red-100 cursor-pointer bg-red-200",children:[S.jsx(r8,{className:"w-5 h-5"}),S.jsx("span",{children:"Logout"})]})})]})]})]})]})},jj=()=>S.jsxs("div",{className:"flex h-screen w-full overflow-x-hidden bg-[#bedfff] font-sans lg:p-[25px]",children:[S.jsx(Uj,{}),S.jsxs("main",{className:"flex-1 overflow-y-auto bg-white lg:rounded-r-2xl",children:[S.jsx(P5,{})," "]})]});dD.createRoot(document.getElementById("root")).render(S.jsx(z.StrictMode,{children:S.jsx(hO,{store:vR,children:S.jsx(bR,{loading:null,persistor:MM,children:S.jsxs(sL,{basename:"/yu-chat",children:[S.jsxs(V5,{children:[S.jsx(Ui,{path:"/register",element:S.jsx(SA,{})}),S.jsxs(Ui,{element:S.jsx(jj,{}),children:[S.jsx(Ui,{path:"/yu-chat",element:S.jsx(Oj,{})}),S.jsx(Ui,{path:"/yu-chat/my-list-friends",element:S.jsx(kj,{})}),S.jsx(Ui,{path:"/friend-requests",element:S.jsx(Vj,{})}),S.jsx(Ui,{path:"/find-emails-chat",element:S.jsx(C8,{})})]}),S.jsx(Ui,{path:"*",element:S.jsx(xU,{})}),S.jsx(Ui,{path:"/",element:S.jsx(SA,{})})]}),S.jsx(QD,{})]})})})}));
